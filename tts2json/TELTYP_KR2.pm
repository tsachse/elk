#############################################################
#                                                           #
# generated by teltyp_gen_perl.pl                           #
# Thu Sep  2 11:07:57 2010                                  #
#                                                           #
#############################################################

package TELTYP_KR2;

# use strict;



#############################################################
#  Telegramm SDG                                            #
#############################################################

sub SDG_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SDG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub SDG_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SDG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub SDG_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SDG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub SDG_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SDG";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub SDG_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SDG";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub SDG_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SDG";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub SDG_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SDG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub SDG_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SDG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub SDG_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SDG: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub SDG_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SDG: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm ZBS                                            #
#############################################################

sub ZBS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ZBS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub ZBS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ZBS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub ZBS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ZBS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub ZBS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZBS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub ZBS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZBS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub ZBS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZBS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub ZBS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZBS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub ZBS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZBS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub ZBS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ZBS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub ZBS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZBS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm NSB                                            #
#############################################################

sub NSB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSB";
   ${$rtel}{'art_nr'} = substr(${$rbuf},4,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},19,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},23,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},30,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},37,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},44,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},53,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},55,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},66,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},68,1);
}


sub NSB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSB";
   ${$rtel}{'art_nr'} = substr(${$rbuf},3,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},17,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},20,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},26,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},32,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},46,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},47,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},57,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},58,1);
}


sub NSB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "NSB";
   ${$rtel}{'art_nr'} = $f[1];
   ${$rtel}{'art_gr'} = $f[2];
   ${$rtel}{'lkz'} = $f[3];
   ${$rtel}{'m_fakt'} = $f[4];
   ${$rtel}{'m_frest'} = $f[5];
   ${$rtel}{'la_ort'} = $f[6];
   ${$rtel}{'platz_kz'} = $f[7];
   ${$rtel}{'kolli_id'} = $f[8];
   ${$rtel}{'lag_ber'} = $f[9];
   ${$rtel}{'kom_typ'} = $f[10];
}


sub NSB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSB";
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kom_typ'});
}


sub NSB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSB";
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kom_typ'});
}


sub NSB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSB";
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kom_typ'});
}


sub NSB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSB: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},4,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},19,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},23,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},30,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},37,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},44,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},53,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},55,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},66,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},68,1) . "'";

   return $trcbuf;
}


sub NSB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSB: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},3,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},17,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},20,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},26,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},32,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},46,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},47,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},57,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},58,1) . "'";

   return $trcbuf;
}


sub NSB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm NSB: ";
   $trcbuf .= "art_nr='" . $f[1]  . "', ";
   $trcbuf .= "art_gr='" . $f[2]  . "', ";
   $trcbuf .= "lkz='" . $f[3]  . "', ";
   $trcbuf .= "m_fakt='" . $f[4]  . "', ";
   $trcbuf .= "m_frest='" . $f[5]  . "', ";
   $trcbuf .= "la_ort='" . $f[6]  . "', ";
   $trcbuf .= "platz_kz='" . $f[7]  . "', ";
   $trcbuf .= "kolli_id='" . $f[8]  . "', ";
   $trcbuf .= "lag_ber='" . $f[9]  . "', ";
   $trcbuf .= "kom_typ='" . $f[10]  . "'";

   return $trcbuf;
}


sub NSB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSB: ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "m_fakt='" . ${$rtel}{"m_fakt"} . "', ";
   $trcbuf .= "m_frest='" . ${$rtel}{"m_frest"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "platz_kz='" . ${$rtel}{"platz_kz"} . "', ";
   $trcbuf .= "kolli_id='" . ${$rtel}{"kolli_id"} . "', ";
   $trcbuf .= "lag_ber='" . ${$rtel}{"lag_ber"} . "', ";
   $trcbuf .= "kom_typ='" . ${$rtel}{"kom_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm NSZ                                            #
#############################################################

sub NSZ_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSZ";
   ${$rtel}{'art_nr'} = substr(${$rbuf},4,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},19,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},23,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},30,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},37,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},44,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},53,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},55,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},66,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},68,1);
}


sub NSZ_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSZ";
   ${$rtel}{'art_nr'} = substr(${$rbuf},3,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},17,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},20,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},26,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},32,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},46,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},47,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},57,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},58,1);
}


sub NSZ_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "NSZ";
   ${$rtel}{'art_nr'} = $f[1];
   ${$rtel}{'art_gr'} = $f[2];
   ${$rtel}{'lkz'} = $f[3];
   ${$rtel}{'m_fakt'} = $f[4];
   ${$rtel}{'m_frest'} = $f[5];
   ${$rtel}{'la_ort'} = $f[6];
   ${$rtel}{'platz_kz'} = $f[7];
   ${$rtel}{'kolli_id'} = $f[8];
   ${$rtel}{'lag_ber'} = $f[9];
   ${$rtel}{'kom_typ'} = $f[10];
}


sub NSZ_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSZ";
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kom_typ'});
}


sub NSZ_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSZ";
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kom_typ'});
}


sub NSZ_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSZ";
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kom_typ'});
}


sub NSZ_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSZ: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},4,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},19,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},23,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},30,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},37,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},44,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},53,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},55,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},66,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},68,1) . "'";

   return $trcbuf;
}


sub NSZ_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSZ: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},3,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},17,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},20,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},26,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},32,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},46,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},47,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},57,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},58,1) . "'";

   return $trcbuf;
}


sub NSZ_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm NSZ: ";
   $trcbuf .= "art_nr='" . $f[1]  . "', ";
   $trcbuf .= "art_gr='" . $f[2]  . "', ";
   $trcbuf .= "lkz='" . $f[3]  . "', ";
   $trcbuf .= "m_fakt='" . $f[4]  . "', ";
   $trcbuf .= "m_frest='" . $f[5]  . "', ";
   $trcbuf .= "la_ort='" . $f[6]  . "', ";
   $trcbuf .= "platz_kz='" . $f[7]  . "', ";
   $trcbuf .= "kolli_id='" . $f[8]  . "', ";
   $trcbuf .= "lag_ber='" . $f[9]  . "', ";
   $trcbuf .= "kom_typ='" . $f[10]  . "'";

   return $trcbuf;
}


sub NSZ_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSZ: ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "m_fakt='" . ${$rtel}{"m_fakt"} . "', ";
   $trcbuf .= "m_frest='" . ${$rtel}{"m_frest"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "platz_kz='" . ${$rtel}{"platz_kz"} . "', ";
   $trcbuf .= "kolli_id='" . ${$rtel}{"kolli_id"} . "', ";
   $trcbuf .= "lag_ber='" . ${$rtel}{"lag_ber"} . "', ";
   $trcbuf .= "kom_typ='" . ${$rtel}{"kom_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm NSD                                            #
#############################################################

sub NSD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSD";
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},4,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},13,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},17,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},24,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},31,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},47,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},49,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},60,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},62,1);
}


sub NSD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSD";
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},3,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},11,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},14,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},20,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},26,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},32,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},40,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},41,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},51,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},52,1);
}


sub NSD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "NSD";
   ${$rtel}{'art_num'} = sprintf("%d",$f[1]);
   ${$rtel}{'art_gr'} = $f[2];
   ${$rtel}{'lkz'} = $f[3];
   ${$rtel}{'m_fakt'} = $f[4];
   ${$rtel}{'m_frest'} = $f[5];
   ${$rtel}{'la_ort'} = $f[6];
   ${$rtel}{'platz_kz'} = $f[7];
   ${$rtel}{'kolli_id'} = $f[8];
   ${$rtel}{'lag_ber'} = $f[9];
   ${$rtel}{'kom_typ'} = $f[10];
}


sub NSD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSD";
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kom_typ'});
}


sub NSD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSD";
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kom_typ'});
}


sub NSD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSD";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kom_typ'});
}


sub NSD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSD: ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},4,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},13,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},17,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},24,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},31,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},47,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},49,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},60,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},62,1) . "'";

   return $trcbuf;
}


sub NSD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSD: ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},3,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},11,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},14,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},20,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},26,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},32,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},40,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},41,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},51,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},52,1) . "'";

   return $trcbuf;
}


sub NSD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm NSD: ";
   $trcbuf .= "art_num=" . $f[1]  . ", ";
   $trcbuf .= "art_gr='" . $f[2]  . "', ";
   $trcbuf .= "lkz='" . $f[3]  . "', ";
   $trcbuf .= "m_fakt='" . $f[4]  . "', ";
   $trcbuf .= "m_frest='" . $f[5]  . "', ";
   $trcbuf .= "la_ort='" . $f[6]  . "', ";
   $trcbuf .= "platz_kz='" . $f[7]  . "', ";
   $trcbuf .= "kolli_id='" . $f[8]  . "', ";
   $trcbuf .= "lag_ber='" . $f[9]  . "', ";
   $trcbuf .= "kom_typ='" . $f[10]  . "'";

   return $trcbuf;
}


sub NSD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSD: ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "m_fakt='" . ${$rtel}{"m_fakt"} . "', ";
   $trcbuf .= "m_frest='" . ${$rtel}{"m_frest"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "platz_kz='" . ${$rtel}{"platz_kz"} . "', ";
   $trcbuf .= "kolli_id='" . ${$rtel}{"kolli_id"} . "', ";
   $trcbuf .= "lag_ber='" . ${$rtel}{"lag_ber"} . "', ";
   $trcbuf .= "kom_typ='" . ${$rtel}{"kom_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm NSS                                            #
#############################################################

sub NSS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSS";
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},4,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},13,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},17,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},24,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},31,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},47,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},49,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},60,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},62,1);
}


sub NSS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "NSS";
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},3,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},11,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},14,6);
   ${$rtel}{'m_fakt'} = substr(${$rbuf},20,6);
   ${$rtel}{'m_frest'} = substr(${$rbuf},26,6);
   ${$rtel}{'la_ort'} = substr(${$rbuf},32,8);
   ${$rtel}{'platz_kz'} = substr(${$rbuf},40,1);
   ${$rtel}{'kolli_id'} = substr(${$rbuf},41,10);
   ${$rtel}{'lag_ber'} = substr(${$rbuf},51,1);
   ${$rtel}{'kom_typ'} = substr(${$rbuf},52,1);
}


sub NSS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "NSS";
   ${$rtel}{'art_num'} = sprintf("%d",$f[1]);
   ${$rtel}{'art_gr'} = $f[2];
   ${$rtel}{'lkz'} = $f[3];
   ${$rtel}{'m_fakt'} = $f[4];
   ${$rtel}{'m_frest'} = $f[5];
   ${$rtel}{'la_ort'} = $f[6];
   ${$rtel}{'platz_kz'} = $f[7];
   ${$rtel}{'kolli_id'} = $f[8];
   ${$rtel}{'lag_ber'} = $f[9];
   ${$rtel}{'kom_typ'} = $f[10];
}


sub NSS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSS";
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kom_typ'});
}


sub NSS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSS";
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kom_typ'});
}


sub NSS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "NSS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_fakt'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'m_frest'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'platz_kz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'kolli_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'lag_ber'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kom_typ'});
}


sub NSS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSS: ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},4,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},13,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},17,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},24,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},31,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},47,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},49,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},60,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},62,1) . "'";

   return $trcbuf;
}


sub NSS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSS: ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},3,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},11,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},14,6) . "', ";
   $trcbuf .= "m_fakt='" . substr(${$rbuf},20,6) . "', ";
   $trcbuf .= "m_frest='" . substr(${$rbuf},26,6) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},32,8) . "', ";
   $trcbuf .= "platz_kz='" . substr(${$rbuf},40,1) . "', ";
   $trcbuf .= "kolli_id='" . substr(${$rbuf},41,10) . "', ";
   $trcbuf .= "lag_ber='" . substr(${$rbuf},51,1) . "', ";
   $trcbuf .= "kom_typ='" . substr(${$rbuf},52,1) . "'";

   return $trcbuf;
}


sub NSS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm NSS: ";
   $trcbuf .= "art_num=" . $f[1]  . ", ";
   $trcbuf .= "art_gr='" . $f[2]  . "', ";
   $trcbuf .= "lkz='" . $f[3]  . "', ";
   $trcbuf .= "m_fakt='" . $f[4]  . "', ";
   $trcbuf .= "m_frest='" . $f[5]  . "', ";
   $trcbuf .= "la_ort='" . $f[6]  . "', ";
   $trcbuf .= "platz_kz='" . $f[7]  . "', ";
   $trcbuf .= "kolli_id='" . $f[8]  . "', ";
   $trcbuf .= "lag_ber='" . $f[9]  . "', ";
   $trcbuf .= "kom_typ='" . $f[10]  . "'";

   return $trcbuf;
}


sub NSS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm NSS: ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "m_fakt='" . ${$rtel}{"m_fakt"} . "', ";
   $trcbuf .= "m_frest='" . ${$rtel}{"m_frest"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "platz_kz='" . ${$rtel}{"platz_kz"} . "', ";
   $trcbuf .= "kolli_id='" . ${$rtel}{"kolli_id"} . "', ";
   $trcbuf .= "lag_ber='" . ${$rtel}{"lag_ber"} . "', ";
   $trcbuf .= "kom_typ='" . ${$rtel}{"kom_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ADR                                            #
#############################################################

sub ADR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ADR";
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},4,8));
   ${$rtel}{'ne_kaba'} = substr(${$rbuf},13,18);
   ${$rtel}{'ean'} = substr(${$rbuf},32,13);
}


sub ADR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ADR";
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},3,8));
   ${$rtel}{'ne_kaba'} = substr(${$rbuf},11,18);
   ${$rtel}{'ean'} = substr(${$rbuf},29,13);
}


sub ADR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ADR";
   ${$rtel}{'ref_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'ne_kaba'} = $f[2];
   ${$rtel}{'ean'} = $f[3];
}


sub ADR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ADR";
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'ne_kaba'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean'});
}


sub ADR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ADR";
   ${$rbuf} .= sprintf("%08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'ne_kaba'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean'});
}


sub ADR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ADR";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'ne_kaba'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean'});
}


sub ADR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ADR: ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},4,8)) . ", ";
   $trcbuf .= "ne_kaba='" . substr(${$rbuf},13,18) . "', ";
   $trcbuf .= "ean='" . substr(${$rbuf},32,13) . "'";

   return $trcbuf;
}


sub ADR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ADR: ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},3,8)) . ", ";
   $trcbuf .= "ne_kaba='" . substr(${$rbuf},11,18) . "', ";
   $trcbuf .= "ean='" . substr(${$rbuf},29,13) . "'";

   return $trcbuf;
}


sub ADR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ADR: ";
   $trcbuf .= "ref_nr=" . $f[1]  . ", ";
   $trcbuf .= "ne_kaba='" . $f[2]  . "', ";
   $trcbuf .= "ean='" . $f[3]  . "'";

   return $trcbuf;
}


sub ADR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ADR: ";
   $trcbuf .= "ref_nr=" . ${$rtel}{"ref_nr"} . ", ";
   $trcbuf .= "ne_kaba='" . ${$rtel}{"ne_kaba"} . "', ";
   $trcbuf .= "ean='" . ${$rtel}{"ean"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm EDR                                            #
#############################################################

sub EDR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EDR";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},13,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},18,2));
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},21,8));
   ${$rtel}{'art_nr'} = substr(${$rbuf},30,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},45,3);
   ${$rtel}{'ean_1'} = substr(${$rbuf},49,13);
   ${$rtel}{'ean_2'} = substr(${$rbuf},63,13);
   ${$rtel}{'ean_3'} = substr(${$rbuf},77,13);
   ${$rtel}{'ean_4'} = substr(${$rbuf},91,13);
   ${$rtel}{'ean_5'} = substr(${$rbuf},105,13);
   ${$rtel}{'ean_6'} = substr(${$rbuf},119,13);
   ${$rtel}{'batch_typ'} = substr(${$rbuf},133,1);
   ${$rtel}{'layout_nr'} = sprintf("%d",substr(${$rbuf},135,2));
   ${$rtel}{'barcode_1'} = substr(${$rbuf},138,18);
   ${$rtel}{'barcode_2'} = substr(${$rbuf},157,10);
}


sub EDR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EDR";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},13,2));
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},15,8));
   ${$rtel}{'art_nr'} = substr(${$rbuf},23,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},37,3);
   ${$rtel}{'ean_1'} = substr(${$rbuf},40,13);
   ${$rtel}{'ean_2'} = substr(${$rbuf},53,13);
   ${$rtel}{'ean_3'} = substr(${$rbuf},66,13);
   ${$rtel}{'ean_4'} = substr(${$rbuf},79,13);
   ${$rtel}{'ean_5'} = substr(${$rbuf},92,13);
   ${$rtel}{'ean_6'} = substr(${$rbuf},105,13);
   ${$rtel}{'batch_typ'} = substr(${$rbuf},118,1);
   ${$rtel}{'layout_nr'} = sprintf("%d",substr(${$rbuf},119,2));
   ${$rtel}{'barcode_1'} = substr(${$rbuf},121,18);
   ${$rtel}{'barcode_2'} = substr(${$rbuf},139,10);
}


sub EDR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "EDR";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[5]);
   ${$rtel}{'ref_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'art_nr'} = $f[7];
   ${$rtel}{'art_gr'} = $f[8];
   ${$rtel}{'ean_1'} = $f[9];
   ${$rtel}{'ean_2'} = $f[10];
   ${$rtel}{'ean_3'} = $f[11];
   ${$rtel}{'ean_4'} = $f[12];
   ${$rtel}{'ean_5'} = $f[13];
   ${$rtel}{'ean_6'} = $f[14];
   ${$rtel}{'batch_typ'} = $f[15];
   ${$rtel}{'layout_nr'} = sprintf("%d",$f[16]);
   ${$rtel}{'barcode_1'} = $f[17];
   ${$rtel}{'barcode_2'} = $f[18];
}


sub EDR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EDR";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_1'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_2'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_3'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_4'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_5'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'ean_6'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'layout_nr'});
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'barcode_1'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'barcode_2'});
}


sub EDR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EDR";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_1'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_2'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_3'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_4'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_5'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'ean_6'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'layout_nr'});
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'barcode_1'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'barcode_2'});
}


sub EDR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EDR";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_1'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_2'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_3'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_4'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_5'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'ean_6'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'layout_nr'});
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'barcode_1'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'barcode_2'});
}


sub EDR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EDR: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},13,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},18,2)) . ", ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},21,8)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},30,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},45,3) . "', ";
   $trcbuf .= "ean_1='" . substr(${$rbuf},49,13) . "', ";
   $trcbuf .= "ean_2='" . substr(${$rbuf},63,13) . "', ";
   $trcbuf .= "ean_3='" . substr(${$rbuf},77,13) . "', ";
   $trcbuf .= "ean_4='" . substr(${$rbuf},91,13) . "', ";
   $trcbuf .= "ean_5='" . substr(${$rbuf},105,13) . "', ";
   $trcbuf .= "ean_6='" . substr(${$rbuf},119,13) . "', ";
   $trcbuf .= "batch_typ='" . substr(${$rbuf},133,1) . "', ";
   $trcbuf .= "layout_nr=" . sprintf("%d",substr(${$rbuf},135,2)) . ", ";
   $trcbuf .= "barcode_1='" . substr(${$rbuf},138,18) . "', ";
   $trcbuf .= "barcode_2='" . substr(${$rbuf},157,10) . "'";

   return $trcbuf;
}


sub EDR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EDR: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},13,2)) . ", ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},15,8)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},23,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},37,3) . "', ";
   $trcbuf .= "ean_1='" . substr(${$rbuf},40,13) . "', ";
   $trcbuf .= "ean_2='" . substr(${$rbuf},53,13) . "', ";
   $trcbuf .= "ean_3='" . substr(${$rbuf},66,13) . "', ";
   $trcbuf .= "ean_4='" . substr(${$rbuf},79,13) . "', ";
   $trcbuf .= "ean_5='" . substr(${$rbuf},92,13) . "', ";
   $trcbuf .= "ean_6='" . substr(${$rbuf},105,13) . "', ";
   $trcbuf .= "batch_typ='" . substr(${$rbuf},118,1) . "', ";
   $trcbuf .= "layout_nr=" . sprintf("%d",substr(${$rbuf},119,2)) . ", ";
   $trcbuf .= "barcode_1='" . substr(${$rbuf},121,18) . "', ";
   $trcbuf .= "barcode_2='" . substr(${$rbuf},139,10) . "'";

   return $trcbuf;
}


sub EDR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm EDR: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "sen_nr=" . $f[4]  . ", ";
   $trcbuf .= "art_za=" . $f[5]  . ", ";
   $trcbuf .= "ref_nr=" . $f[6]  . ", ";
   $trcbuf .= "art_nr='" . $f[7]  . "', ";
   $trcbuf .= "art_gr='" . $f[8]  . "', ";
   $trcbuf .= "ean_1='" . $f[9]  . "', ";
   $trcbuf .= "ean_2='" . $f[10]  . "', ";
   $trcbuf .= "ean_3='" . $f[11]  . "', ";
   $trcbuf .= "ean_4='" . $f[12]  . "', ";
   $trcbuf .= "ean_5='" . $f[13]  . "', ";
   $trcbuf .= "ean_6='" . $f[14]  . "', ";
   $trcbuf .= "batch_typ='" . $f[15]  . "', ";
   $trcbuf .= "layout_nr=" . $f[16]  . ", ";
   $trcbuf .= "barcode_1='" . $f[17]  . "', ";
   $trcbuf .= "barcode_2='" . $f[18]  . "'";

   return $trcbuf;
}


sub EDR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EDR: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "ref_nr=" . ${$rtel}{"ref_nr"} . ", ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "ean_1='" . ${$rtel}{"ean_1"} . "', ";
   $trcbuf .= "ean_2='" . ${$rtel}{"ean_2"} . "', ";
   $trcbuf .= "ean_3='" . ${$rtel}{"ean_3"} . "', ";
   $trcbuf .= "ean_4='" . ${$rtel}{"ean_4"} . "', ";
   $trcbuf .= "ean_5='" . ${$rtel}{"ean_5"} . "', ";
   $trcbuf .= "ean_6='" . ${$rtel}{"ean_6"} . "', ";
   $trcbuf .= "batch_typ='" . ${$rtel}{"batch_typ"} . "', ";
   $trcbuf .= "layout_nr=" . ${$rtel}{"layout_nr"} . ", ";
   $trcbuf .= "barcode_1='" . ${$rtel}{"barcode_1"} . "', ";
   $trcbuf .= "barcode_2='" . ${$rtel}{"barcode_2"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm DBA                                            #
#############################################################

sub DBA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "DBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
}


sub DBA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "DBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub DBA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "DBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
}


sub DBA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DBA";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
}


sub DBA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DBA";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
}


sub DBA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DBA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
}


sub DBA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DBA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . "";

   return $trcbuf;
}


sub DBA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DBA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub DBA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm DBA: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . "";

   return $trcbuf;
}


sub DBA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DBA: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm RUD                                            #
#############################################################

sub RUD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RUD";
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},4,8));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},17,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},20,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},22,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'status'} = substr(${$rbuf},30,1);
   ${$rtel}{'code'} = substr(${$rbuf},32,18);
}


sub RUD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RUD";
   ${$rtel}{'ref_nr'} = sprintf("%d",substr(${$rbuf},3,8));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},11,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},16,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},17,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'status'} = substr(${$rbuf},23,1);
   ${$rtel}{'code'} = substr(${$rbuf},24,18);
}


sub RUD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RUD";
   ${$rtel}{'ref_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[6]);
   ${$rtel}{'status'} = $f[7];
   ${$rtel}{'code'} = $f[8];
}


sub RUD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RUD";
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'code'});
}


sub RUD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RUD";
   ${$rbuf} .= sprintf("%08d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'code'});
}


sub RUD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RUD";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'ref_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'code'});
}


sub RUD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RUD: ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},4,8)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},17,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},20,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},22,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},30,1) . "', ";
   $trcbuf .= "code='" . substr(${$rbuf},32,18) . "'";

   return $trcbuf;
}


sub RUD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RUD: ";
   $trcbuf .= "ref_nr=" . sprintf("%d",substr(${$rbuf},3,8)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},11,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},16,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},17,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},23,1) . "', ";
   $trcbuf .= "code='" . substr(${$rbuf},24,18) . "'";

   return $trcbuf;
}


sub RUD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RUD: ";
   $trcbuf .= "ref_nr=" . $f[1]  . ", ";
   $trcbuf .= "lfd_tag=" . $f[2]  . ", ";
   $trcbuf .= "bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sen_nr=" . $f[5]  . ", ";
   $trcbuf .= "art_za=" . $f[6]  . ", ";
   $trcbuf .= "status='" . $f[7]  . "', ";
   $trcbuf .= "code='" . $f[8]  . "'";

   return $trcbuf;
}


sub RUD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RUD: ";
   $trcbuf .= "ref_nr=" . ${$rtel}{"ref_nr"} . ", ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "', ";
   $trcbuf .= "code='" . ${$rtel}{"code"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm STA                                            #
#############################################################

sub STA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STA";
   ${$rtel}{'status'} = substr(${$rbuf},4,1);
   ${$rtel}{'zuord_order'} = substr(${$rbuf},6,1);
}


sub STA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STA";
   ${$rtel}{'status'} = substr(${$rbuf},3,1);
   ${$rtel}{'zuord_order'} = substr(${$rbuf},4,1);
}


sub STA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "STA";
   ${$rtel}{'status'} = $f[1];
   ${$rtel}{'zuord_order'} = $f[2];
}


sub STA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STA";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zuord_order'});
}


sub STA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STA";
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zuord_order'});
}


sub STA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STA";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zuord_order'});
}


sub STA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STA: ";
   $trcbuf .= "status='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "zuord_order='" . substr(${$rbuf},6,1) . "'";

   return $trcbuf;
}


sub STA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STA: ";
   $trcbuf .= "status='" . substr(${$rbuf},3,1) . "', ";
   $trcbuf .= "zuord_order='" . substr(${$rbuf},4,1) . "'";

   return $trcbuf;
}


sub STA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm STA: ";
   $trcbuf .= "status='" . $f[1]  . "', ";
   $trcbuf .= "zuord_order='" . $f[2]  . "'";

   return $trcbuf;
}


sub STA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STA: ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "', ";
   $trcbuf .= "zuord_order='" . ${$rtel}{"zuord_order"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm AKI                                            #
#############################################################

sub AKI_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AKI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},13,1);
   ${$rtel}{'lager'} = substr(${$rbuf},15,1);
   ${$rtel}{'etage'} = substr(${$rbuf},17,1);
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},19,6));
}


sub AKI_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AKI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},9,1);
   ${$rtel}{'lager'} = substr(${$rbuf},10,1);
   ${$rtel}{'etage'} = substr(${$rbuf},11,1);
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},12,6));
}


sub AKI_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AKI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_typ'} = $f[4];
   ${$rtel}{'lager'} = $f[5];
   ${$rtel}{'etage'} = $f[6];
   ${$rtel}{'anz_ak'} = sprintf("%d",$f[7]);
}


sub AKI_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKI";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'lager'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'etage'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_ak'});
}


sub AKI_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKI";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'lager'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'etage'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_ak'});
}


sub AKI_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKI";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'lager'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'etage'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_ak'});
}


sub AKI_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKI: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "lager='" . substr(${$rbuf},15,1) . "', ";
   $trcbuf .= "etage='" . substr(${$rbuf},17,1) . "', ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},19,6)) . "";

   return $trcbuf;
}


sub AKI_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKI: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},9,1) . "', ";
   $trcbuf .= "lager='" . substr(${$rbuf},10,1) . "', ";
   $trcbuf .= "etage='" . substr(${$rbuf},11,1) . "', ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},12,6)) . "";

   return $trcbuf;
}


sub AKI_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AKI: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "bat_typ='" . $f[4]  . "', ";
   $trcbuf .= "lager='" . $f[5]  . "', ";
   $trcbuf .= "etage='" . $f[6]  . "', ";
   $trcbuf .= "anz_ak=" . $f[7]  . "";

   return $trcbuf;
}


sub AKI_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKI: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "lager='" . ${$rtel}{"lager"} . "', ";
   $trcbuf .= "etage='" . ${$rtel}{"etage"} . "', ";
   $trcbuf .= "anz_ak=" . ${$rtel}{"anz_ak"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm AKS                                            #
#############################################################

sub AKS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},13,1);
   ${$rtel}{'einbuchen_lager'} = substr(${$rbuf},15,1);
   ${$rtel}{'einbuchen_etage'} = substr(${$rbuf},17,1);
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},19,1));
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},21,6));
}


sub AKS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},9,1);
   ${$rtel}{'einbuchen_lager'} = substr(${$rbuf},10,1);
   ${$rtel}{'einbuchen_etage'} = substr(${$rbuf},11,1);
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},12,1));
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},13,6));
}


sub AKS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_typ'} = $f[4];
   ${$rtel}{'einbuchen_lager'} = $f[5];
   ${$rtel}{'einbuchen_etage'} = $f[6];
   ${$rtel}{'lvs'} = sprintf("%d",$f[7]);
   ${$rtel}{'anz_ak'} = sprintf("%d",$f[8]);
}


sub AKS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'einbuchen_lager'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'einbuchen_etage'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_ak'});
}


sub AKS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'einbuchen_lager'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'einbuchen_etage'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_ak'});
}


sub AKS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AKS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'einbuchen_lager'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'einbuchen_etage'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_ak'});
}


sub AKS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "einbuchen_lager='" . substr(${$rbuf},15,1) . "', ";
   $trcbuf .= "einbuchen_etage='" . substr(${$rbuf},17,1) . "', ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},19,1)) . ", ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},21,6)) . "";

   return $trcbuf;
}


sub AKS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},9,1) . "', ";
   $trcbuf .= "einbuchen_lager='" . substr(${$rbuf},10,1) . "', ";
   $trcbuf .= "einbuchen_etage='" . substr(${$rbuf},11,1) . "', ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},12,1)) . ", ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},13,6)) . "";

   return $trcbuf;
}


sub AKS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AKS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "bat_typ='" . $f[4]  . "', ";
   $trcbuf .= "einbuchen_lager='" . $f[5]  . "', ";
   $trcbuf .= "einbuchen_etage='" . $f[6]  . "', ";
   $trcbuf .= "lvs=" . $f[7]  . ", ";
   $trcbuf .= "anz_ak=" . $f[8]  . "";

   return $trcbuf;
}


sub AKS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AKS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "einbuchen_lager='" . ${$rtel}{"einbuchen_lager"} . "', ";
   $trcbuf .= "einbuchen_etage='" . ${$rtel}{"einbuchen_etage"} . "', ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "anz_ak=" . ${$rtel}{"anz_ak"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SAN                                            #
#############################################################

sub SAN_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAN";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'manr'} = sprintf("%d",substr(${$rbuf},12,4));
}


sub SAN_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAN";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'manr'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub SAN_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SAN";
   ${$rtel}{'rutsche'} = sprintf("%d",$f[1]);
   ${$rtel}{'apnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'manr'} = sprintf("%d",$f[3]);
}


sub SAN_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAN";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'manr'});
}


sub SAN_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAN";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'manr'});
}


sub SAN_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAN";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'manr'});
}


sub SAN_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAN: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "manr=" . sprintf("%d",substr(${$rbuf},12,4)) . "";

   return $trcbuf;
}


sub SAN_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAN: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "manr=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub SAN_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SAN: ";
   $trcbuf .= "rutsche=" . $f[1]  . ", ";
   $trcbuf .= "apnr=" . $f[2]  . ", ";
   $trcbuf .= "manr=" . $f[3]  . "";

   return $trcbuf;
}


sub SAN_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAN: ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "manr=" . ${$rtel}{"manr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SAB                                            #
#############################################################

sub SAB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAB";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'manr'} = sprintf("%d",substr(${$rbuf},12,4));
}


sub SAB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAB";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'manr'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub SAB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SAB";
   ${$rtel}{'rutsche'} = sprintf("%d",$f[1]);
   ${$rtel}{'apnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'manr'} = sprintf("%d",$f[3]);
}


sub SAB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAB";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'manr'});
}


sub SAB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAB";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'manr'});
}


sub SAB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'manr'});
}


sub SAB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAB: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "manr=" . sprintf("%d",substr(${$rbuf},12,4)) . "";

   return $trcbuf;
}


sub SAB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAB: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "manr=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub SAB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SAB: ";
   $trcbuf .= "rutsche=" . $f[1]  . ", ";
   $trcbuf .= "apnr=" . $f[2]  . ", ";
   $trcbuf .= "manr=" . $f[3]  . "";

   return $trcbuf;
}


sub SAB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAB: ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "manr=" . ${$rtel}{"manr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SWI                                            #
#############################################################

sub SWI_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SWI";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'kaso'} = sprintf("%d",substr(${$rbuf},12,1));
   ${$rtel}{'waid'} = sprintf("%d",substr(${$rbuf},14,6));
   ${$rtel}{'liste'} = substr(${$rbuf},21,1100);
}


sub SWI_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SWI";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'kaso'} = sprintf("%d",substr(${$rbuf},9,1));
   ${$rtel}{'waid'} = sprintf("%d",substr(${$rbuf},10,6));
   ${$rtel}{'liste'} = substr(${$rbuf},16,1100);
}


sub SWI_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SWI";
   ${$rtel}{'rutsche'} = sprintf("%d",$f[1]);
   ${$rtel}{'apnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'kaso'} = sprintf("%d",$f[3]);
   ${$rtel}{'waid'} = sprintf("%d",$f[4]);
   ${$rtel}{'liste'} = $f[5];
}


sub SWI_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWI";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'waid'});
   ${$rbuf} .= sprintf(" %-1100.1100s",${$rtel}{'liste'});
}


sub SWI_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWI";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'waid'});
   ${$rbuf} .= sprintf("%-1100.1100s",${$rtel}{'liste'});
}


sub SWI_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWI";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'waid'});
   ${$rbuf} .= sprintf("\t%-.1100s",${$rtel}{'liste'});
}


sub SWI_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWI: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "kaso=" . sprintf("%d",substr(${$rbuf},12,1)) . ", ";
   $trcbuf .= "waid=" . sprintf("%d",substr(${$rbuf},14,6)) . ", ";
   $trcbuf .= "liste='" . substr(${$rbuf},21,1100) . "'";

   return $trcbuf;
}


sub SWI_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWI: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "kaso=" . sprintf("%d",substr(${$rbuf},9,1)) . ", ";
   $trcbuf .= "waid=" . sprintf("%d",substr(${$rbuf},10,6)) . ", ";
   $trcbuf .= "liste='" . substr(${$rbuf},16,1100) . "'";

   return $trcbuf;
}


sub SWI_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SWI: ";
   $trcbuf .= "rutsche=" . $f[1]  . ", ";
   $trcbuf .= "apnr=" . $f[2]  . ", ";
   $trcbuf .= "kaso=" . $f[3]  . ", ";
   $trcbuf .= "waid=" . $f[4]  . ", ";
   $trcbuf .= "liste='" . $f[5]  . "'";

   return $trcbuf;
}


sub SWI_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWI: ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "kaso=" . ${$rtel}{"kaso"} . ", ";
   $trcbuf .= "waid=" . ${$rtel}{"waid"} . ", ";
   $trcbuf .= "liste='" . ${$rtel}{"liste"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SRE                                            #
#############################################################

sub SRE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SRE";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'kaso'} = sprintf("%d",substr(${$rbuf},12,1));
   ${$rtel}{'typ'} = substr(${$rbuf},14,1);
   ${$rtel}{'id'} = substr(${$rbuf},16,10);
}


sub SRE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SRE";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'kaso'} = sprintf("%d",substr(${$rbuf},9,1));
   ${$rtel}{'typ'} = substr(${$rbuf},10,1);
   ${$rtel}{'id'} = substr(${$rbuf},11,10);
}


sub SRE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SRE";
   ${$rtel}{'rutsche'} = sprintf("%d",$f[1]);
   ${$rtel}{'apnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'kaso'} = sprintf("%d",$f[3]);
   ${$rtel}{'typ'} = $f[4];
   ${$rtel}{'id'} = $f[5];
}


sub SRE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SRE";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'id'});
}


sub SRE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SRE";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'id'});
}


sub SRE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SRE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kaso'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'id'});
}


sub SRE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SRE: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "kaso=" . sprintf("%d",substr(${$rbuf},12,1)) . ", ";
   $trcbuf .= "typ='" . substr(${$rbuf},14,1) . "', ";
   $trcbuf .= "id='" . substr(${$rbuf},16,10) . "'";

   return $trcbuf;
}


sub SRE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SRE: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "kaso=" . sprintf("%d",substr(${$rbuf},9,1)) . ", ";
   $trcbuf .= "typ='" . substr(${$rbuf},10,1) . "', ";
   $trcbuf .= "id='" . substr(${$rbuf},11,10) . "'";

   return $trcbuf;
}


sub SRE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SRE: ";
   $trcbuf .= "rutsche=" . $f[1]  . ", ";
   $trcbuf .= "apnr=" . $f[2]  . ", ";
   $trcbuf .= "kaso=" . $f[3]  . ", ";
   $trcbuf .= "typ='" . $f[4]  . "', ";
   $trcbuf .= "id='" . $f[5]  . "'";

   return $trcbuf;
}


sub SRE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SRE: ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "kaso=" . ${$rtel}{"kaso"} . ", ";
   $trcbuf .= "typ='" . ${$rtel}{"typ"} . "', ";
   $trcbuf .= "id='" . ${$rtel}{"id"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SWA                                            #
#############################################################

sub SWA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SWA";
   ${$rtel}{'waid'} = sprintf("%d",substr(${$rbuf},4,6));
}


sub SWA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SWA";
   ${$rtel}{'waid'} = sprintf("%d",substr(${$rbuf},3,6));
}


sub SWA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SWA";
   ${$rtel}{'waid'} = sprintf("%d",$f[1]);
}


sub SWA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWA";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'waid'});
}


sub SWA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWA";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'waid'});
}


sub SWA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SWA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'waid'});
}


sub SWA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWA: ";
   $trcbuf .= "waid=" . sprintf("%d",substr(${$rbuf},4,6)) . "";

   return $trcbuf;
}


sub SWA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWA: ";
   $trcbuf .= "waid=" . sprintf("%d",substr(${$rbuf},3,6)) . "";

   return $trcbuf;
}


sub SWA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SWA: ";
   $trcbuf .= "waid=" . $f[1]  . "";

   return $trcbuf;
}


sub SWA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SWA: ";
   $trcbuf .= "waid=" . ${$rtel}{"waid"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SID                                            #
#############################################################

sub SID_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SID";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'identcode'} = substr(${$rbuf},16,30);
}


sub SID_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SID";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'identcode'} = substr(${$rbuf},12,30);
}


sub SID_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SID";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'identcode'} = $f[4];
}


sub SID_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SID";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'identcode'});
}


sub SID_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SID";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'identcode'});
}


sub SID_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SID";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'identcode'});
}


sub SID_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SID: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "identcode='" . substr(${$rbuf},16,30) . "'";

   return $trcbuf;
}


sub SID_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SID: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "identcode='" . substr(${$rbuf},12,30) . "'";

   return $trcbuf;
}


sub SID_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SID: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "identcode='" . $f[4]  . "'";

   return $trcbuf;
}


sub SID_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SID: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "identcode='" . ${$rtel}{"identcode"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FST1                                           #
#############################################################

sub FST1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FST1";
   ${$rtel}{'wsname'} = substr(${$rbuf},5,16);
   ${$rtel}{'idcode'} = substr(${$rbuf},22,30);
   ${$rtel}{'kzmodus'} = substr(${$rbuf},53,1);
   ${$rtel}{'fid_bereich'} = substr(${$rbuf},55,2);
   ${$rtel}{'dmode_eti'} = substr(${$rbuf},58,4);
   ${$rtel}{'dname_eti'} = substr(${$rbuf},63,80);
}


sub FST1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FST1";
   ${$rtel}{'wsname'} = substr(${$rbuf},4,16);
   ${$rtel}{'idcode'} = substr(${$rbuf},20,30);
   ${$rtel}{'kzmodus'} = substr(${$rbuf},50,1);
   ${$rtel}{'fid_bereich'} = substr(${$rbuf},51,2);
   ${$rtel}{'dmode_eti'} = substr(${$rbuf},53,4);
   ${$rtel}{'dname_eti'} = substr(${$rbuf},57,80);
}


sub FST1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FST1";
   ${$rtel}{'wsname'} = $f[1];
   ${$rtel}{'idcode'} = $f[2];
   ${$rtel}{'kzmodus'} = $f[3];
   ${$rtel}{'fid_bereich'} = $f[4];
   ${$rtel}{'dmode_eti'} = $f[5];
   ${$rtel}{'dname_eti'} = $f[6];
}


sub FST1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FST1";
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'idcode'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf(" %-80.80s",${$rtel}{'dname_eti'});
}


sub FST1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FST1";
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'idcode'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf("%-80.80s",${$rtel}{'dname_eti'});
}


sub FST1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FST1";
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'idcode'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf("\t%-.80s",${$rtel}{'dname_eti'});
}


sub FST1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FST1: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},5,16) . "', ";
   $trcbuf .= "idcode='" . substr(${$rbuf},22,30) . "', ";
   $trcbuf .= "kzmodus='" . substr(${$rbuf},53,1) . "', ";
   $trcbuf .= "fid_bereich='" . substr(${$rbuf},55,2) . "', ";
   $trcbuf .= "dmode_eti='" . substr(${$rbuf},58,4) . "', ";
   $trcbuf .= "dname_eti='" . substr(${$rbuf},63,80) . "'";

   return $trcbuf;
}


sub FST1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FST1: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},4,16) . "', ";
   $trcbuf .= "idcode='" . substr(${$rbuf},20,30) . "', ";
   $trcbuf .= "kzmodus='" . substr(${$rbuf},50,1) . "', ";
   $trcbuf .= "fid_bereich='" . substr(${$rbuf},51,2) . "', ";
   $trcbuf .= "dmode_eti='" . substr(${$rbuf},53,4) . "', ";
   $trcbuf .= "dname_eti='" . substr(${$rbuf},57,80) . "'";

   return $trcbuf;
}


sub FST1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FST1: ";
   $trcbuf .= "wsname='" . $f[1]  . "', ";
   $trcbuf .= "idcode='" . $f[2]  . "', ";
   $trcbuf .= "kzmodus='" . $f[3]  . "', ";
   $trcbuf .= "fid_bereich='" . $f[4]  . "', ";
   $trcbuf .= "dmode_eti='" . $f[5]  . "', ";
   $trcbuf .= "dname_eti='" . $f[6]  . "'";

   return $trcbuf;
}


sub FST1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FST1: ";
   $trcbuf .= "wsname='" . ${$rtel}{"wsname"} . "', ";
   $trcbuf .= "idcode='" . ${$rtel}{"idcode"} . "', ";
   $trcbuf .= "kzmodus='" . ${$rtel}{"kzmodus"} . "', ";
   $trcbuf .= "fid_bereich='" . ${$rtel}{"fid_bereich"} . "', ";
   $trcbuf .= "dmode_eti='" . ${$rtel}{"dmode_eti"} . "', ";
   $trcbuf .= "dname_eti='" . ${$rtel}{"dname_eti"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FSTBEA                                         #
#############################################################

sub FSTBEA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FSTBEA";
   ${$rtel}{'wsname'} = substr(${$rbuf},7,16);
   ${$rtel}{'fid_bereich'} = substr(${$rbuf},24,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},27,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},31,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},34,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},39,2));
   ${$rtel}{'kzmodus'} = substr(${$rbuf},42,1);
   ${$rtel}{'kzanfrage'} = substr(${$rbuf},44,1);
   ${$rtel}{'kzrech'} = substr(${$rbuf},46,1);
   ${$rtel}{'kzetikett'} = substr(${$rbuf},48,1);
   ${$rtel}{'kzherkunft'} = substr(${$rbuf},50,1);
   ${$rtel}{'nrrutsche'} = sprintf("%d",substr(${$rbuf},52,4));
   ${$rtel}{'anz_fehlart'} = sprintf("%d",substr(${$rbuf},57,2));
   ${$rtel}{'anz_artikel'} = sprintf("%d",substr(${$rbuf},60,2));
   ${$rtel}{'kzftyp'} = substr(${$rbuf},63,100);
   ${$rtel}{'dmode_eti'} = substr(${$rbuf},164,4);
   ${$rtel}{'dname_eti'} = substr(${$rbuf},169,80);
}


sub FSTBEA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FSTBEA";
   ${$rtel}{'wsname'} = substr(${$rbuf},6,16);
   ${$rtel}{'fid_bereich'} = substr(${$rbuf},22,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},24,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},29,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},33,2));
   ${$rtel}{'kzmodus'} = substr(${$rbuf},35,1);
   ${$rtel}{'kzanfrage'} = substr(${$rbuf},36,1);
   ${$rtel}{'kzrech'} = substr(${$rbuf},37,1);
   ${$rtel}{'kzetikett'} = substr(${$rbuf},38,1);
   ${$rtel}{'kzherkunft'} = substr(${$rbuf},39,1);
   ${$rtel}{'nrrutsche'} = sprintf("%d",substr(${$rbuf},40,4));
   ${$rtel}{'anz_fehlart'} = sprintf("%d",substr(${$rbuf},44,2));
   ${$rtel}{'anz_artikel'} = sprintf("%d",substr(${$rbuf},46,2));
   ${$rtel}{'kzftyp'} = substr(${$rbuf},48,100);
   ${$rtel}{'dmode_eti'} = substr(${$rbuf},148,4);
   ${$rtel}{'dname_eti'} = substr(${$rbuf},152,80);
}


sub FSTBEA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FSTBEA";
   ${$rtel}{'wsname'} = $f[1];
   ${$rtel}{'fid_bereich'} = $f[2];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[6]);
   ${$rtel}{'kzmodus'} = $f[7];
   ${$rtel}{'kzanfrage'} = $f[8];
   ${$rtel}{'kzrech'} = $f[9];
   ${$rtel}{'kzetikett'} = $f[10];
   ${$rtel}{'kzherkunft'} = $f[11];
   ${$rtel}{'nrrutsche'} = sprintf("%d",$f[12]);
   ${$rtel}{'anz_fehlart'} = sprintf("%d",$f[13]);
   ${$rtel}{'anz_artikel'} = sprintf("%d",$f[14]);
   ${$rtel}{'kzftyp'} = $f[15];
   ${$rtel}{'dmode_eti'} = $f[16];
   ${$rtel}{'dname_eti'} = $f[17];
}


sub FSTBEA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSTBEA";
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzanfrage'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzrech'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzetikett'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kzherkunft'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'nrrutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_fehlart'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf(" %-100.100s",${$rtel}{'kzftyp'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf(" %-80.80s",${$rtel}{'dname_eti'});
}


sub FSTBEA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSTBEA";
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzanfrage'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzrech'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzetikett'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kzherkunft'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'nrrutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_fehlart'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf("%-100.100s",${$rtel}{'kzftyp'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf("%-80.80s",${$rtel}{'dname_eti'});
}


sub FSTBEA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSTBEA";
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'fid_bereich'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzmodus'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzanfrage'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzrech'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzetikett'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kzherkunft'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nrrutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_fehlart'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf("\t%-.100s",${$rtel}{'kzftyp'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'dmode_eti'});
   ${$rbuf} .= sprintf("\t%-.80s",${$rtel}{'dname_eti'});
}


sub FSTBEA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSTBEA: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},7,16) . "', ";
   $trcbuf .= "fid_bereich='" . substr(${$rbuf},24,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},27,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},31,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},34,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},39,2)) . ", ";
   $trcbuf .= "kzmodus='" . substr(${$rbuf},42,1) . "', ";
   $trcbuf .= "kzanfrage='" . substr(${$rbuf},44,1) . "', ";
   $trcbuf .= "kzrech='" . substr(${$rbuf},46,1) . "', ";
   $trcbuf .= "kzetikett='" . substr(${$rbuf},48,1) . "', ";
   $trcbuf .= "kzherkunft='" . substr(${$rbuf},50,1) . "', ";
   $trcbuf .= "nrrutsche=" . sprintf("%d",substr(${$rbuf},52,4)) . ", ";
   $trcbuf .= "anz_fehlart=" . sprintf("%d",substr(${$rbuf},57,2)) . ", ";
   $trcbuf .= "anz_artikel=" . sprintf("%d",substr(${$rbuf},60,2)) . ", ";
   $trcbuf .= "kzftyp='" . substr(${$rbuf},63,100) . "', ";
   $trcbuf .= "dmode_eti='" . substr(${$rbuf},164,4) . "', ";
   $trcbuf .= "dname_eti='" . substr(${$rbuf},169,80) . "'";

   return $trcbuf;
}


sub FSTBEA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSTBEA: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},6,16) . "', ";
   $trcbuf .= "fid_bereich='" . substr(${$rbuf},22,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},24,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},29,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},33,2)) . ", ";
   $trcbuf .= "kzmodus='" . substr(${$rbuf},35,1) . "', ";
   $trcbuf .= "kzanfrage='" . substr(${$rbuf},36,1) . "', ";
   $trcbuf .= "kzrech='" . substr(${$rbuf},37,1) . "', ";
   $trcbuf .= "kzetikett='" . substr(${$rbuf},38,1) . "', ";
   $trcbuf .= "kzherkunft='" . substr(${$rbuf},39,1) . "', ";
   $trcbuf .= "nrrutsche=" . sprintf("%d",substr(${$rbuf},40,4)) . ", ";
   $trcbuf .= "anz_fehlart=" . sprintf("%d",substr(${$rbuf},44,2)) . ", ";
   $trcbuf .= "anz_artikel=" . sprintf("%d",substr(${$rbuf},46,2)) . ", ";
   $trcbuf .= "kzftyp='" . substr(${$rbuf},48,100) . "', ";
   $trcbuf .= "dmode_eti='" . substr(${$rbuf},148,4) . "', ";
   $trcbuf .= "dname_eti='" . substr(${$rbuf},152,80) . "'";

   return $trcbuf;
}


sub FSTBEA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FSTBEA: ";
   $trcbuf .= "wsname='" . $f[1]  . "', ";
   $trcbuf .= "fid_bereich='" . $f[2]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sen_nr=" . $f[5]  . ", ";
   $trcbuf .= "art_za=" . $f[6]  . ", ";
   $trcbuf .= "kzmodus='" . $f[7]  . "', ";
   $trcbuf .= "kzanfrage='" . $f[8]  . "', ";
   $trcbuf .= "kzrech='" . $f[9]  . "', ";
   $trcbuf .= "kzetikett='" . $f[10]  . "', ";
   $trcbuf .= "kzherkunft='" . $f[11]  . "', ";
   $trcbuf .= "nrrutsche=" . $f[12]  . ", ";
   $trcbuf .= "anz_fehlart=" . $f[13]  . ", ";
   $trcbuf .= "anz_artikel=" . $f[14]  . ", ";
   $trcbuf .= "kzftyp='" . $f[15]  . "', ";
   $trcbuf .= "dmode_eti='" . $f[16]  . "', ";
   $trcbuf .= "dname_eti='" . $f[17]  . "'";

   return $trcbuf;
}


sub FSTBEA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSTBEA: ";
   $trcbuf .= "wsname='" . ${$rtel}{"wsname"} . "', ";
   $trcbuf .= "fid_bereich='" . ${$rtel}{"fid_bereich"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "kzmodus='" . ${$rtel}{"kzmodus"} . "', ";
   $trcbuf .= "kzanfrage='" . ${$rtel}{"kzanfrage"} . "', ";
   $trcbuf .= "kzrech='" . ${$rtel}{"kzrech"} . "', ";
   $trcbuf .= "kzetikett='" . ${$rtel}{"kzetikett"} . "', ";
   $trcbuf .= "kzherkunft='" . ${$rtel}{"kzherkunft"} . "', ";
   $trcbuf .= "nrrutsche=" . ${$rtel}{"nrrutsche"} . ", ";
   $trcbuf .= "anz_fehlart=" . ${$rtel}{"anz_fehlart"} . ", ";
   $trcbuf .= "anz_artikel=" . ${$rtel}{"anz_artikel"} . ", ";
   $trcbuf .= "kzftyp='" . ${$rtel}{"kzftyp"} . "', ";
   $trcbuf .= "dmode_eti='" . ${$rtel}{"dmode_eti"} . "', ";
   $trcbuf .= "dname_eti='" . ${$rtel}{"dname_eti"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm WEBREDR                                        #
#############################################################

sub WEBREDR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBREDR";
   ${$rtel}{'wsname'} = substr(${$rbuf},8,16);
   ${$rtel}{'kztermin'} = substr(${$rbuf},25,1);
   ${$rtel}{'gruppe'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'kennung'} = substr(${$rbuf},30,1);
}


sub WEBREDR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBREDR";
   ${$rtel}{'wsname'} = substr(${$rbuf},7,16);
   ${$rtel}{'kztermin'} = substr(${$rbuf},23,1);
   ${$rtel}{'gruppe'} = sprintf("%d",substr(${$rbuf},24,2));
   ${$rtel}{'kennung'} = substr(${$rbuf},26,1);
}


sub WEBREDR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WEBREDR";
   ${$rtel}{'wsname'} = $f[1];
   ${$rtel}{'kztermin'} = $f[2];
   ${$rtel}{'gruppe'} = sprintf("%d",$f[3]);
   ${$rtel}{'kennung'} = $f[4];
}


sub WEBREDR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBREDR";
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kennung'});
}


sub WEBREDR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBREDR";
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kennung'});
}


sub WEBREDR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBREDR";
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kennung'});
}


sub WEBREDR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBREDR: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},8,16) . "', ";
   $trcbuf .= "kztermin='" . substr(${$rbuf},25,1) . "', ";
   $trcbuf .= "gruppe=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "kennung='" . substr(${$rbuf},30,1) . "'";

   return $trcbuf;
}


sub WEBREDR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBREDR: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},7,16) . "', ";
   $trcbuf .= "kztermin='" . substr(${$rbuf},23,1) . "', ";
   $trcbuf .= "gruppe=" . sprintf("%d",substr(${$rbuf},24,2)) . ", ";
   $trcbuf .= "kennung='" . substr(${$rbuf},26,1) . "'";

   return $trcbuf;
}


sub WEBREDR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WEBREDR: ";
   $trcbuf .= "wsname='" . $f[1]  . "', ";
   $trcbuf .= "kztermin='" . $f[2]  . "', ";
   $trcbuf .= "gruppe=" . $f[3]  . ", ";
   $trcbuf .= "kennung='" . $f[4]  . "'";

   return $trcbuf;
}


sub WEBREDR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBREDR: ";
   $trcbuf .= "wsname='" . ${$rtel}{"wsname"} . "', ";
   $trcbuf .= "kztermin='" . ${$rtel}{"kztermin"} . "', ";
   $trcbuf .= "gruppe=" . ${$rtel}{"gruppe"} . ", ";
   $trcbuf .= "kennung='" . ${$rtel}{"kennung"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm WEBDR                                          #
#############################################################

sub WEBDR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBDR";
   ${$rtel}{'wsname'} = substr(${$rbuf},6,16);
   ${$rtel}{'kztermin'} = substr(${$rbuf},23,1);
   ${$rtel}{'gruppe'} = sprintf("%d",substr(${$rbuf},25,2));
   ${$rtel}{'kennung'} = substr(${$rbuf},28,1);
   ${$rtel}{'von_ber'} = substr(${$rbuf},30,4);
   ${$rtel}{'bis_ber'} = substr(${$rbuf},35,4);
}


sub WEBDR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBDR";
   ${$rtel}{'wsname'} = substr(${$rbuf},5,16);
   ${$rtel}{'kztermin'} = substr(${$rbuf},21,1);
   ${$rtel}{'gruppe'} = sprintf("%d",substr(${$rbuf},22,2));
   ${$rtel}{'kennung'} = substr(${$rbuf},24,1);
   ${$rtel}{'von_ber'} = substr(${$rbuf},25,4);
   ${$rtel}{'bis_ber'} = substr(${$rbuf},29,4);
}


sub WEBDR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WEBDR";
   ${$rtel}{'wsname'} = $f[1];
   ${$rtel}{'kztermin'} = $f[2];
   ${$rtel}{'gruppe'} = sprintf("%d",$f[3]);
   ${$rtel}{'kennung'} = $f[4];
   ${$rtel}{'von_ber'} = $f[5];
   ${$rtel}{'bis_ber'} = $f[6];
}


sub WEBDR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBDR";
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kennung'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'von_ber'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'bis_ber'});
}


sub WEBDR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBDR";
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kennung'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'von_ber'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'bis_ber'});
}


sub WEBDR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBDR";
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kztermin'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'gruppe'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kennung'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'von_ber'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'bis_ber'});
}


sub WEBDR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBDR: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},6,16) . "', ";
   $trcbuf .= "kztermin='" . substr(${$rbuf},23,1) . "', ";
   $trcbuf .= "gruppe=" . sprintf("%d",substr(${$rbuf},25,2)) . ", ";
   $trcbuf .= "kennung='" . substr(${$rbuf},28,1) . "', ";
   $trcbuf .= "von_ber='" . substr(${$rbuf},30,4) . "', ";
   $trcbuf .= "bis_ber='" . substr(${$rbuf},35,4) . "'";

   return $trcbuf;
}


sub WEBDR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBDR: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},5,16) . "', ";
   $trcbuf .= "kztermin='" . substr(${$rbuf},21,1) . "', ";
   $trcbuf .= "gruppe=" . sprintf("%d",substr(${$rbuf},22,2)) . ", ";
   $trcbuf .= "kennung='" . substr(${$rbuf},24,1) . "', ";
   $trcbuf .= "von_ber='" . substr(${$rbuf},25,4) . "', ";
   $trcbuf .= "bis_ber='" . substr(${$rbuf},29,4) . "'";

   return $trcbuf;
}


sub WEBDR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WEBDR: ";
   $trcbuf .= "wsname='" . $f[1]  . "', ";
   $trcbuf .= "kztermin='" . $f[2]  . "', ";
   $trcbuf .= "gruppe=" . $f[3]  . ", ";
   $trcbuf .= "kennung='" . $f[4]  . "', ";
   $trcbuf .= "von_ber='" . $f[5]  . "', ";
   $trcbuf .= "bis_ber='" . $f[6]  . "'";

   return $trcbuf;
}


sub WEBDR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBDR: ";
   $trcbuf .= "wsname='" . ${$rtel}{"wsname"} . "', ";
   $trcbuf .= "kztermin='" . ${$rtel}{"kztermin"} . "', ";
   $trcbuf .= "gruppe=" . ${$rtel}{"gruppe"} . ", ";
   $trcbuf .= "kennung='" . ${$rtel}{"kennung"} . "', ";
   $trcbuf .= "von_ber='" . ${$rtel}{"von_ber"} . "', ";
   $trcbuf .= "bis_ber='" . ${$rtel}{"bis_ber"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm WEBRAUM                                        #
#############################################################

sub WEBRAUM_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBRAUM";
   ${$rtel}{'wsname'} = substr(${$rbuf},8,16);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},25,3));
   ${$rtel}{'von_fid'} = substr(${$rbuf},29,7);
   ${$rtel}{'bis_fid'} = substr(${$rbuf},37,7);
}


sub WEBRAUM_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WEBRAUM";
   ${$rtel}{'wsname'} = substr(${$rbuf},7,16);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},23,3));
   ${$rtel}{'von_fid'} = substr(${$rbuf},26,7);
   ${$rtel}{'bis_fid'} = substr(${$rbuf},33,7);
}


sub WEBRAUM_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WEBRAUM";
   ${$rtel}{'wsname'} = $f[1];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'von_fid'} = $f[3];
   ${$rtel}{'bis_fid'} = $f[4];
}


sub WEBRAUM_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBRAUM";
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %-7.7s",${$rtel}{'von_fid'});
   ${$rbuf} .= sprintf(" %-7.7s",${$rtel}{'bis_fid'});
}


sub WEBRAUM_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBRAUM";
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%-7.7s",${$rtel}{'von_fid'});
   ${$rbuf} .= sprintf("%-7.7s",${$rtel}{'bis_fid'});
}


sub WEBRAUM_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WEBRAUM";
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'wsname'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%-.7s",${$rtel}{'von_fid'});
   ${$rbuf} .= sprintf("\t%-.7s",${$rtel}{'bis_fid'});
}


sub WEBRAUM_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBRAUM: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},8,16) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},25,3)) . ", ";
   $trcbuf .= "von_fid='" . substr(${$rbuf},29,7) . "', ";
   $trcbuf .= "bis_fid='" . substr(${$rbuf},37,7) . "'";

   return $trcbuf;
}


sub WEBRAUM_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBRAUM: ";
   $trcbuf .= "wsname='" . substr(${$rbuf},7,16) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},23,3)) . ", ";
   $trcbuf .= "von_fid='" . substr(${$rbuf},26,7) . "', ";
   $trcbuf .= "bis_fid='" . substr(${$rbuf},33,7) . "'";

   return $trcbuf;
}


sub WEBRAUM_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WEBRAUM: ";
   $trcbuf .= "wsname='" . $f[1]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[2]  . ", ";
   $trcbuf .= "von_fid='" . $f[3]  . "', ";
   $trcbuf .= "bis_fid='" . $f[4]  . "'";

   return $trcbuf;
}


sub WEBRAUM_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WEBRAUM: ";
   $trcbuf .= "wsname='" . ${$rtel}{"wsname"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "von_fid='" . ${$rtel}{"von_fid"} . "', ";
   $trcbuf .= "bis_fid='" . ${$rtel}{"bis_fid"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm DAT                                            #
#############################################################

sub DAT_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "DAT";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'fak_typ'} = substr(${$rbuf},10,1);
}


sub DAT_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "DAT";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'fak_typ'} = substr(${$rbuf},7,1);
}


sub DAT_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "DAT";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'fak_typ'} = $f[3];
}


sub DAT_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DAT";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'fak_typ'});
}


sub DAT_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DAT";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'fak_typ'});
}


sub DAT_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "DAT";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'fak_typ'});
}


sub DAT_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DAT: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "fak_typ='" . substr(${$rbuf},10,1) . "'";

   return $trcbuf;
}


sub DAT_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DAT: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "fak_typ='" . substr(${$rbuf},7,1) . "'";

   return $trcbuf;
}


sub DAT_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm DAT: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "fak_typ='" . $f[3]  . "'";

   return $trcbuf;
}


sub DAT_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm DAT: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "fak_typ='" . ${$rtel}{"fak_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm LAG                                            #
#############################################################

sub LAG_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LAG";
   ${$rtel}{'file_name'} = substr(${$rbuf},4,11);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub LAG_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LAG";
   ${$rtel}{'file_name'} = substr(${$rbuf},3,11);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},18,4));
}


sub LAG_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LAG";
   ${$rtel}{'file_name'} = $f[1];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[3]);
}


sub LAG_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LAG";
   ${$rbuf} .= sprintf(" %-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lvs'});
}


sub LAG_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LAG";
   ${$rbuf} .= sprintf("%-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lvs'});
}


sub LAG_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LAG";
   ${$rbuf} .= sprintf("\t%-.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub LAG_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LAG: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},4,11) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub LAG_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LAG: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},3,11) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},18,4)) . "";

   return $trcbuf;
}


sub LAG_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LAG: ";
   $trcbuf .= "file_name='" . $f[1]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[2]  . ", ";
   $trcbuf .= "lvs=" . $f[3]  . "";

   return $trcbuf;
}


sub LAG_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LAG: ";
   $trcbuf .= "file_name='" . ${$rtel}{"file_name"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SI3                                            #
#############################################################

sub SI3_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SI3";
   ${$rtel}{'file_name'} = substr(${$rbuf},4,11);
   ${$rtel}{'datum'} = substr(${$rbuf},16,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},25,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},30,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},34,1));
}


sub SI3_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SI3";
   ${$rtel}{'file_name'} = substr(${$rbuf},3,11);
   ${$rtel}{'datum'} = substr(${$rbuf},14,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},22,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},26,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},29,1));
}


sub SI3_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SI3";
   ${$rtel}{'file_name'} = $f[1];
   ${$rtel}{'datum'} = $f[2];
   ${$rtel}{'zeit'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[5]);
}


sub SI3_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SI3";
   ${$rbuf} .= sprintf(" %-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub SI3_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SI3";
   ${$rbuf} .= sprintf("%-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub SI3_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SI3";
   ${$rbuf} .= sprintf("\t%-.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub SI3_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SI3: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},4,11) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},16,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},25,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},30,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},34,1)) . "";

   return $trcbuf;
}


sub SI3_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SI3: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},3,11) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},14,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},22,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},26,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},29,1)) . "";

   return $trcbuf;
}


sub SI3_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SI3: ";
   $trcbuf .= "file_name='" . $f[1]  . "', ";
   $trcbuf .= "datum='" . $f[2]  . "', ";
   $trcbuf .= "zeit='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "lvs=" . $f[5]  . "";

   return $trcbuf;
}


sub SI3_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SI3: ";
   $trcbuf .= "file_name='" . ${$rtel}{"file_name"} . "', ";
   $trcbuf .= "datum='" . ${$rtel}{"datum"} . "', ";
   $trcbuf .= "zeit='" . ${$rtel}{"zeit"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BRF                                            #
#############################################################

sub BRF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BRF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'batch_prio'} = sprintf("%d",substr(${$rbuf},10,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},15,1));
   ${$rtel}{'batch_typ'} = substr(${$rbuf},17,1);
   ${$rtel}{'batch_typ_BS'} = substr(${$rbuf},19,1);
   ${$rtel}{'kzsort'} = substr(${$rbuf},21,1);
   ${$rtel}{'sendung_von'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'sendung_bis'} = sprintf("%d",substr(${$rbuf},28,4));
}


sub BRF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BRF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'batch_prio'} = sprintf("%d",substr(${$rbuf},7,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},10,1));
   ${$rtel}{'batch_typ'} = substr(${$rbuf},11,1);
   ${$rtel}{'batch_typ_BS'} = substr(${$rbuf},12,1);
   ${$rtel}{'kzsort'} = substr(${$rbuf},13,1);
   ${$rtel}{'sendung_von'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'sendung_bis'} = sprintf("%d",substr(${$rbuf},18,4));
}


sub BRF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BRF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'batch_prio'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'batch_typ'} = $f[6];
   ${$rtel}{'batch_typ_BS'} = $f[7];
   ${$rtel}{'kzsort'} = $f[8];
   ${$rtel}{'sendung_von'} = sprintf("%d",$f[9]);
   ${$rtel}{'sendung_bis'} = sprintf("%d",$f[10]);
}


sub BRF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BRF";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'batch_prio'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'batch_typ_BS'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'kzsort'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sendung_von'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sendung_bis'});
}


sub BRF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BRF";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'batch_prio'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'batch_typ_BS'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'kzsort'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sendung_von'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sendung_bis'});
}


sub BRF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BRF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'batch_prio'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'batch_typ'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'batch_typ_BS'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'kzsort'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sendung_von'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sendung_bis'});
}


sub BRF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BRF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "batch_prio=" . sprintf("%d",substr(${$rbuf},10,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},15,1)) . ", ";
   $trcbuf .= "batch_typ='" . substr(${$rbuf},17,1) . "', ";
   $trcbuf .= "batch_typ_BS='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "kzsort='" . substr(${$rbuf},21,1) . "', ";
   $trcbuf .= "sendung_von=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "sendung_bis=" . sprintf("%d",substr(${$rbuf},28,4)) . "";

   return $trcbuf;
}


sub BRF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BRF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "batch_prio=" . sprintf("%d",substr(${$rbuf},7,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},10,1)) . ", ";
   $trcbuf .= "batch_typ='" . substr(${$rbuf},11,1) . "', ";
   $trcbuf .= "batch_typ_BS='" . substr(${$rbuf},12,1) . "', ";
   $trcbuf .= "kzsort='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "sendung_von=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "sendung_bis=" . sprintf("%d",substr(${$rbuf},18,4)) . "";

   return $trcbuf;
}


sub BRF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BRF: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "batch_prio=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "batch_typ='" . $f[6]  . "', ";
   $trcbuf .= "batch_typ_BS='" . $f[7]  . "', ";
   $trcbuf .= "kzsort='" . $f[8]  . "', ";
   $trcbuf .= "sendung_von=" . $f[9]  . ", ";
   $trcbuf .= "sendung_bis=" . $f[10]  . "";

   return $trcbuf;
}


sub BRF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BRF: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "batch_prio=" . ${$rtel}{"batch_prio"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "batch_typ='" . ${$rtel}{"batch_typ"} . "', ";
   $trcbuf .= "batch_typ_BS='" . ${$rtel}{"batch_typ_BS"} . "', ";
   $trcbuf .= "kzsort='" . ${$rtel}{"kzsort"} . "', ";
   $trcbuf .= "sendung_von=" . ${$rtel}{"sendung_von"} . ", ";
   $trcbuf .= "sendung_bis=" . ${$rtel}{"sendung_bis"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm WA1                                            #
#############################################################

sub WA1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA1";
   ${$rtel}{'wa_id_kz'} = substr(${$rbuf},4,1);
   ${$rtel}{'wa_id'} = substr(${$rbuf},6,14);
   ${$rtel}{'wa_typ'} = sprintf("%d",substr(${$rbuf},21,1));
}


sub WA1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA1";
   ${$rtel}{'wa_id_kz'} = substr(${$rbuf},3,1);
   ${$rtel}{'wa_id'} = substr(${$rbuf},4,14);
   ${$rtel}{'wa_typ'} = sprintf("%d",substr(${$rbuf},18,1));
}


sub WA1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WA1";
   ${$rtel}{'wa_id_kz'} = $f[1];
   ${$rtel}{'wa_id'} = $f[2];
   ${$rtel}{'wa_typ'} = sprintf("%d",$f[3]);
}


sub WA1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA1";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'wa_typ'});
}


sub WA1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA1";
   ${$rbuf} .= sprintf("%s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'wa_typ'});
}


sub WA1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA1";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wa_typ'});
}


sub WA1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA1: ";
   $trcbuf .= "wa_id_kz='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "wa_id='" . substr(${$rbuf},6,14) . "', ";
   $trcbuf .= "wa_typ=" . sprintf("%d",substr(${$rbuf},21,1)) . "";

   return $trcbuf;
}


sub WA1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA1: ";
   $trcbuf .= "wa_id_kz='" . substr(${$rbuf},3,1) . "', ";
   $trcbuf .= "wa_id='" . substr(${$rbuf},4,14) . "', ";
   $trcbuf .= "wa_typ=" . sprintf("%d",substr(${$rbuf},18,1)) . "";

   return $trcbuf;
}


sub WA1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WA1: ";
   $trcbuf .= "wa_id_kz='" . $f[1]  . "', ";
   $trcbuf .= "wa_id='" . $f[2]  . "', ";
   $trcbuf .= "wa_typ=" . $f[3]  . "";

   return $trcbuf;
}


sub WA1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA1: ";
   $trcbuf .= "wa_id_kz='" . ${$rtel}{"wa_id_kz"} . "', ";
   $trcbuf .= "wa_id='" . ${$rtel}{"wa_id"} . "', ";
   $trcbuf .= "wa_typ=" . ${$rtel}{"wa_typ"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm WA9                                            #
#############################################################

sub WA9_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA9";
   ${$rtel}{'identcode'} = substr(${$rbuf},4,30);
   ${$rtel}{'leitcode'} = substr(${$rbuf},35,30);
   ${$rtel}{'sondercode'} = substr(${$rbuf},66,8);
   ${$rtel}{'einschleusung'} = substr(${$rbuf},75,2);
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},78,3));
   ${$rtel}{'herkunft'} = substr(${$rbuf},82,1);
}


sub WA9_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA9";
   ${$rtel}{'identcode'} = substr(${$rbuf},3,30);
   ${$rtel}{'leitcode'} = substr(${$rbuf},33,30);
   ${$rtel}{'sondercode'} = substr(${$rbuf},63,8);
   ${$rtel}{'einschleusung'} = substr(${$rbuf},71,2);
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},73,3));
   ${$rtel}{'herkunft'} = substr(${$rbuf},76,1);
}


sub WA9_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WA9";
   ${$rtel}{'identcode'} = $f[1];
   ${$rtel}{'leitcode'} = $f[2];
   ${$rtel}{'sondercode'} = $f[3];
   ${$rtel}{'einschleusung'} = $f[4];
   ${$rtel}{'richtung'} = sprintf("%d",$f[5]);
   ${$rtel}{'herkunft'} = $f[6];
}


sub WA9_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA9";
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'leitcode'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'sondercode'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'einschleusung'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'herkunft'});
}


sub WA9_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA9";
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'leitcode'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'sondercode'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'einschleusung'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'herkunft'});
}


sub WA9_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA9";
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'leitcode'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'sondercode'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'einschleusung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'herkunft'});
}


sub WA9_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA9: ";
   $trcbuf .= "identcode='" . substr(${$rbuf},4,30) . "', ";
   $trcbuf .= "leitcode='" . substr(${$rbuf},35,30) . "', ";
   $trcbuf .= "sondercode='" . substr(${$rbuf},66,8) . "', ";
   $trcbuf .= "einschleusung='" . substr(${$rbuf},75,2) . "', ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},78,3)) . ", ";
   $trcbuf .= "herkunft='" . substr(${$rbuf},82,1) . "'";

   return $trcbuf;
}


sub WA9_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA9: ";
   $trcbuf .= "identcode='" . substr(${$rbuf},3,30) . "', ";
   $trcbuf .= "leitcode='" . substr(${$rbuf},33,30) . "', ";
   $trcbuf .= "sondercode='" . substr(${$rbuf},63,8) . "', ";
   $trcbuf .= "einschleusung='" . substr(${$rbuf},71,2) . "', ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},73,3)) . ", ";
   $trcbuf .= "herkunft='" . substr(${$rbuf},76,1) . "'";

   return $trcbuf;
}


sub WA9_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WA9: ";
   $trcbuf .= "identcode='" . $f[1]  . "', ";
   $trcbuf .= "leitcode='" . $f[2]  . "', ";
   $trcbuf .= "sondercode='" . $f[3]  . "', ";
   $trcbuf .= "einschleusung='" . $f[4]  . "', ";
   $trcbuf .= "richtung=" . $f[5]  . ", ";
   $trcbuf .= "herkunft='" . $f[6]  . "'";

   return $trcbuf;
}


sub WA9_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA9: ";
   $trcbuf .= "identcode='" . ${$rtel}{"identcode"} . "', ";
   $trcbuf .= "leitcode='" . ${$rtel}{"leitcode"} . "', ";
   $trcbuf .= "sondercode='" . ${$rtel}{"sondercode"} . "', ";
   $trcbuf .= "einschleusung='" . ${$rtel}{"einschleusung"} . "', ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "herkunft='" . ${$rtel}{"herkunft"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm WA2                                            #
#############################################################

sub WA2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA2";
   ${$rtel}{'wa_id_kz'} = substr(${$rbuf},4,1);
   ${$rtel}{'wa_id'} = substr(${$rbuf},6,14);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},21,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},25,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},28,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},33,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},35,3));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},39,1);
   ${$rtel}{'tue_kar_kz'} = substr(${$rbuf},41,1);
}


sub WA2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "WA2";
   ${$rtel}{'wa_id_kz'} = substr(${$rbuf},3,1);
   ${$rtel}{'wa_id'} = substr(${$rbuf},4,14);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},18,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},27,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},28,3));
   ${$rtel}{'bat_typ'} = substr(${$rbuf},31,1);
   ${$rtel}{'tue_kar_kz'} = substr(${$rbuf},32,1);
}


sub WA2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "WA2";
   ${$rtel}{'wa_id_kz'} = $f[1];
   ${$rtel}{'wa_id'} = $f[2];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[6]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[7]);
   ${$rtel}{'bat_typ'} = $f[8];
   ${$rtel}{'tue_kar_kz'} = $f[9];
}


sub WA2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA2";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'tue_kar_kz'});
}


sub WA2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA2";
   ${$rbuf} .= sprintf("%s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'tue_kar_kz'});
}


sub WA2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "WA2";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'wa_id_kz'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'wa_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'tue_kar_kz'});
}


sub WA2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA2: ";
   $trcbuf .= "wa_id_kz='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "wa_id='" . substr(${$rbuf},6,14) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},21,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},25,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},28,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},33,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},35,3)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},39,1) . "', ";
   $trcbuf .= "tue_kar_kz='" . substr(${$rbuf},41,1) . "'";

   return $trcbuf;
}


sub WA2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA2: ";
   $trcbuf .= "wa_id_kz='" . substr(${$rbuf},3,1) . "', ";
   $trcbuf .= "wa_id='" . substr(${$rbuf},4,14) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},18,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},27,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},28,3)) . ", ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},31,1) . "', ";
   $trcbuf .= "tue_kar_kz='" . substr(${$rbuf},32,1) . "'";

   return $trcbuf;
}


sub WA2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm WA2: ";
   $trcbuf .= "wa_id_kz='" . $f[1]  . "', ";
   $trcbuf .= "wa_id='" . $f[2]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sen_nr=" . $f[5]  . ", ";
   $trcbuf .= "lvs=" . $f[6]  . ", ";
   $trcbuf .= "richtung=" . $f[7]  . ", ";
   $trcbuf .= "bat_typ='" . $f[8]  . "', ";
   $trcbuf .= "tue_kar_kz='" . $f[9]  . "'";

   return $trcbuf;
}


sub WA2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm WA2: ";
   $trcbuf .= "wa_id_kz='" . ${$rtel}{"wa_id_kz"} . "', ";
   $trcbuf .= "wa_id='" . ${$rtel}{"wa_id"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "tue_kar_kz='" . ${$rtel}{"tue_kar_kz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FE1                                            #
#############################################################

sub FE1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},19,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},21,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},32,1);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},34,6));
}


sub FE1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},14,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},15,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},25,1);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},26,6));
}


sub FE1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'fkz'} = $f[5];
   ${$rtel}{'rggali_sei'} = $f[6];
   ${$rtel}{'bat_typ'} = $f[7];
   ${$rtel}{'personal_nr'} = sprintf("%d",$f[8]);
}


sub FE1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FE1";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'personal_nr'});
}


sub FE1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FE1";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'personal_nr'});
}


sub FE1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FE1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'personal_nr'});
}


sub FE1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},21,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},32,1) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},34,6)) . "";

   return $trcbuf;
}


sub FE1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},14,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},15,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},25,1) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},26,6)) . "";

   return $trcbuf;
}


sub FE1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FE1: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "fkz='" . $f[5]  . "', ";
   $trcbuf .= "rggali_sei='" . $f[6]  . "', ";
   $trcbuf .= "bat_typ='" . $f[7]  . "', ";
   $trcbuf .= "personal_nr=" . $f[8]  . "";

   return $trcbuf;
}


sub FE1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FE1: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "fkz='" . ${$rtel}{"fkz"} . "', ";
   $trcbuf .= "rggali_sei='" . ${$rtel}{"rggali_sei"} . "', ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "personal_nr=" . ${$rtel}{"personal_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm FA1                                            #
#############################################################

sub FA1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FA1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},19,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},21,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},32,1);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},34,6));
}


sub FA1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FA1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},14,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},15,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},25,1);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},26,6));
}


sub FA1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FA1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'fkz'} = $f[5];
   ${$rtel}{'rggali_sei'} = $f[6];
   ${$rtel}{'bat_typ'} = $f[7];
   ${$rtel}{'personal_nr'} = sprintf("%d",$f[8]);
}


sub FA1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FA1";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'personal_nr'});
}


sub FA1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FA1";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'personal_nr'});
}


sub FA1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FA1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'personal_nr'});
}


sub FA1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FA1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},21,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},32,1) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},34,6)) . "";

   return $trcbuf;
}


sub FA1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FA1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},14,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},15,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},25,1) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},26,6)) . "";

   return $trcbuf;
}


sub FA1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FA1: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "fkz='" . $f[5]  . "', ";
   $trcbuf .= "rggali_sei='" . $f[6]  . "', ";
   $trcbuf .= "bat_typ='" . $f[7]  . "', ";
   $trcbuf .= "personal_nr=" . $f[8]  . "";

   return $trcbuf;
}


sub FA1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FA1: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "fkz='" . ${$rtel}{"fkz"} . "', ";
   $trcbuf .= "rggali_sei='" . ${$rtel}{"rggali_sei"} . "', ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "personal_nr=" . ${$rtel}{"personal_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm FS2                                            #
#############################################################

sub FS2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FS2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'redu_kz'} = substr(${$rbuf},19,1);
}


sub FS2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FS2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'redu_kz'} = substr(${$rbuf},14,1);
}


sub FS2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FS2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'redu_kz'} = $f[5];
}


sub FS2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FS2";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'redu_kz'});
}


sub FS2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FS2";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'redu_kz'});
}


sub FS2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FS2";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'redu_kz'});
}


sub FS2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FS2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "redu_kz='" . substr(${$rbuf},19,1) . "'";

   return $trcbuf;
}


sub FS2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FS2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "redu_kz='" . substr(${$rbuf},14,1) . "'";

   return $trcbuf;
}


sub FS2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FS2: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "redu_kz='" . $f[5]  . "'";

   return $trcbuf;
}


sub FS2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FS2: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "redu_kz='" . ${$rtel}{"redu_kz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FKD                                            #
#############################################################

sub FKD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'drkclass'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub FKD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'drkclass'} = sprintf("%d",substr(${$rbuf},12,4));
}


sub FKD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'drkclass'} = sprintf("%d",$f[4]);
}


sub FKD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FKD";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'drkclass'});
}


sub FKD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FKD";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'drkclass'});
}


sub FKD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FKD";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'drkclass'});
}


sub FKD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FKD: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "drkclass=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub FKD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FKD: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "drkclass=" . sprintf("%d",substr(${$rbuf},12,4)) . "";

   return $trcbuf;
}


sub FKD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FKD: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "drkclass=" . $f[4]  . "";

   return $trcbuf;
}


sub FKD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FKD: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "drkclass=" . ${$rtel}{"drkclass"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm FSE                                            #
#############################################################

sub FSE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FSE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'fehlertyp'} = substr(${$rbuf},16,1);
   ${$rtel}{'uml_kz'} = substr(${$rbuf},18,1);
   ${$rtel}{'sta_verarb'} = substr(${$rbuf},20,1);
}


sub FSE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FSE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'fehlertyp'} = substr(${$rbuf},12,1);
   ${$rtel}{'uml_kz'} = substr(${$rbuf},13,1);
   ${$rtel}{'sta_verarb'} = substr(${$rbuf},14,1);
}


sub FSE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FSE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'fehlertyp'} = $f[4];
   ${$rtel}{'uml_kz'} = $f[5];
   ${$rtel}{'sta_verarb'} = $f[6];
}


sub FSE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSE";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fehlertyp'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'uml_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sta_verarb'});
}


sub FSE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSE";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fehlertyp'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'uml_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sta_verarb'});
}


sub FSE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FSE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fehlertyp'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'uml_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sta_verarb'});
}


sub FSE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "fehlertyp='" . substr(${$rbuf},16,1) . "', ";
   $trcbuf .= "uml_kz='" . substr(${$rbuf},18,1) . "', ";
   $trcbuf .= "sta_verarb='" . substr(${$rbuf},20,1) . "'";

   return $trcbuf;
}


sub FSE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "fehlertyp='" . substr(${$rbuf},12,1) . "', ";
   $trcbuf .= "uml_kz='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "sta_verarb='" . substr(${$rbuf},14,1) . "'";

   return $trcbuf;
}


sub FSE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FSE: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "fehlertyp='" . $f[4]  . "', ";
   $trcbuf .= "uml_kz='" . $f[5]  . "', ";
   $trcbuf .= "sta_verarb='" . $f[6]  . "'";

   return $trcbuf;
}


sub FSE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FSE: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "fehlertyp='" . ${$rtel}{"fehlertyp"} . "', ";
   $trcbuf .= "uml_kz='" . ${$rtel}{"uml_kz"} . "', ";
   $trcbuf .= "sta_verarb='" . ${$rtel}{"sta_verarb"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm AE1                                            #
#############################################################

sub AE1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},19,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},34,3);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'termin_kz'} = substr(${$rbuf},47,1);
   ${$rtel}{'prio'} = sprintf("%d",substr(${$rbuf},49,1));
}


sub AE1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},14,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},28,3);
   ${$rtel}{'la_ort'} = substr(${$rbuf},31,8);
   ${$rtel}{'termin_kz'} = substr(${$rbuf},39,1);
   ${$rtel}{'prio'} = sprintf("%d",substr(${$rbuf},40,1));
}


sub AE1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'art_nr'} = $f[5];
   ${$rtel}{'art_gr'} = $f[6];
   ${$rtel}{'la_ort'} = $f[7];
   ${$rtel}{'termin_kz'} = $f[8];
   ${$rtel}{'prio'} = sprintf("%d",$f[9]);
}


sub AE1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AE1";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'termin_kz'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'prio'});
}


sub AE1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AE1";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'termin_kz'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'prio'});
}


sub AE1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AE1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'termin_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'prio'});
}


sub AE1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},19,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},34,3) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "termin_kz='" . substr(${$rbuf},47,1) . "', ";
   $trcbuf .= "prio=" . sprintf("%d",substr(${$rbuf},49,1)) . "";

   return $trcbuf;
}


sub AE1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},14,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},28,3) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},31,8) . "', ";
   $trcbuf .= "termin_kz='" . substr(${$rbuf},39,1) . "', ";
   $trcbuf .= "prio=" . sprintf("%d",substr(${$rbuf},40,1)) . "";

   return $trcbuf;
}


sub AE1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AE1: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "art_nr='" . $f[5]  . "', ";
   $trcbuf .= "art_gr='" . $f[6]  . "', ";
   $trcbuf .= "la_ort='" . $f[7]  . "', ";
   $trcbuf .= "termin_kz='" . $f[8]  . "', ";
   $trcbuf .= "prio=" . $f[9]  . "";

   return $trcbuf;
}


sub AE1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AE1: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "termin_kz='" . ${$rtel}{"termin_kz"} . "', ";
   $trcbuf .= "prio=" . ${$rtel}{"prio"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm LE1                                            #
#############################################################

sub LE1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},19,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},34,3);
   ${$rtel}{'la_ort'} = substr(${$rbuf},38,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},47,1);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},49,1);
}


sub LE1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},14,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},28,3);
   ${$rtel}{'la_ort'} = substr(${$rbuf},31,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},39,1);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},40,1);
}


sub LE1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'art_nr'} = $f[5];
   ${$rtel}{'art_gr'} = $f[6];
   ${$rtel}{'la_ort'} = $f[7];
   ${$rtel}{'raeum_stat'} = $f[8];
   ${$rtel}{'zoll_kz'} = $f[9];
}


sub LE1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LE1";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'raeum_stat'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
}


sub LE1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LE1";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'raeum_stat'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
}


sub LE1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LE1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'raeum_stat'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
}


sub LE1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},19,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},34,3) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},38,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},47,1) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},49,1) . "'";

   return $trcbuf;
}


sub LE1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},14,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},28,3) . "', ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},31,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},39,1) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},40,1) . "'";

   return $trcbuf;
}


sub LE1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LE1: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "art_nr='" . $f[5]  . "', ";
   $trcbuf .= "art_gr='" . $f[6]  . "', ";
   $trcbuf .= "la_ort='" . $f[7]  . "', ";
   $trcbuf .= "raeum_stat='" . $f[8]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[9]  . "'";

   return $trcbuf;
}


sub LE1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LE1: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "raeum_stat='" . ${$rtel}{"raeum_stat"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm PKO                                            #
#############################################################

sub PKO_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "PKO";
   ${$rtel}{'kz_taetigkeit'} = substr(${$rbuf},4,1);
   ${$rtel}{'zugriffs_schl'} = substr(${$rbuf},6,16);
   ${$rtel}{'menge'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'zeitwert'} = sprintf("%d",substr(${$rbuf},28,6));
}


sub PKO_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "PKO";
   ${$rtel}{'kz_taetigkeit'} = substr(${$rbuf},3,1);
   ${$rtel}{'zugriffs_schl'} = substr(${$rbuf},4,16);
   ${$rtel}{'menge'} = sprintf("%d",substr(${$rbuf},20,4));
   ${$rtel}{'zeitwert'} = sprintf("%d",substr(${$rbuf},24,6));
}


sub PKO_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "PKO";
   ${$rtel}{'kz_taetigkeit'} = $f[1];
   ${$rtel}{'zugriffs_schl'} = $f[2];
   ${$rtel}{'menge'} = sprintf("%d",$f[3]);
   ${$rtel}{'zeitwert'} = sprintf("%d",$f[4]);
}


sub PKO_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "PKO";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kz_taetigkeit'});
   ${$rbuf} .= sprintf(" %-16.16s",${$rtel}{'zugriffs_schl'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'menge'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'zeitwert'});
}


sub PKO_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "PKO";
   ${$rbuf} .= sprintf("%s",${$rtel}{'kz_taetigkeit'});
   ${$rbuf} .= sprintf("%-16.16s",${$rtel}{'zugriffs_schl'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'menge'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'zeitwert'});
}


sub PKO_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "PKO";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kz_taetigkeit'});
   ${$rbuf} .= sprintf("\t%-.16s",${$rtel}{'zugriffs_schl'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'zeitwert'});
}


sub PKO_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm PKO: ";
   $trcbuf .= "kz_taetigkeit='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "zugriffs_schl='" . substr(${$rbuf},6,16) . "', ";
   $trcbuf .= "menge=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "zeitwert=" . sprintf("%d",substr(${$rbuf},28,6)) . "";

   return $trcbuf;
}


sub PKO_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm PKO: ";
   $trcbuf .= "kz_taetigkeit='" . substr(${$rbuf},3,1) . "', ";
   $trcbuf .= "zugriffs_schl='" . substr(${$rbuf},4,16) . "', ";
   $trcbuf .= "menge=" . sprintf("%d",substr(${$rbuf},20,4)) . ", ";
   $trcbuf .= "zeitwert=" . sprintf("%d",substr(${$rbuf},24,6)) . "";

   return $trcbuf;
}


sub PKO_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm PKO: ";
   $trcbuf .= "kz_taetigkeit='" . $f[1]  . "', ";
   $trcbuf .= "zugriffs_schl='" . $f[2]  . "', ";
   $trcbuf .= "menge=" . $f[3]  . ", ";
   $trcbuf .= "zeitwert=" . $f[4]  . "";

   return $trcbuf;
}


sub PKO_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm PKO: ";
   $trcbuf .= "kz_taetigkeit='" . ${$rtel}{"kz_taetigkeit"} . "', ";
   $trcbuf .= "zugriffs_schl='" . ${$rtel}{"zugriffs_schl"} . "', ";
   $trcbuf .= "menge=" . ${$rtel}{"menge"} . ", ";
   $trcbuf .= "zeitwert=" . ${$rtel}{"zeitwert"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm RSP                                            #
#############################################################

sub RSP_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RSP";
   ${$rtel}{'galicode'} = substr(${$rbuf},4,10);
   ${$rtel}{'personal'} = substr(${$rbuf},15,6);
   ${$rtel}{'galiseite'} = substr(${$rbuf},22,12);
   ${$rtel}{'label'} = sprintf("%d",substr(${$rbuf},35,3));
   ${$rtel}{'vorgabe_1'} = sprintf("%d",substr(${$rbuf},39,6));
   ${$rtel}{'menge_1'} = sprintf("%d",substr(${$rbuf},46,6));
   ${$rtel}{'vorgabe_2'} = sprintf("%d",substr(${$rbuf},53,6));
   ${$rtel}{'menge_2'} = sprintf("%d",substr(${$rbuf},60,6));
}


sub RSP_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RSP";
   ${$rtel}{'galicode'} = substr(${$rbuf},3,10);
   ${$rtel}{'personal'} = substr(${$rbuf},13,6);
   ${$rtel}{'galiseite'} = substr(${$rbuf},19,12);
   ${$rtel}{'label'} = sprintf("%d",substr(${$rbuf},31,3));
   ${$rtel}{'vorgabe_1'} = sprintf("%d",substr(${$rbuf},34,6));
   ${$rtel}{'menge_1'} = sprintf("%d",substr(${$rbuf},40,6));
   ${$rtel}{'vorgabe_2'} = sprintf("%d",substr(${$rbuf},46,6));
   ${$rtel}{'menge_2'} = sprintf("%d",substr(${$rbuf},52,6));
}


sub RSP_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RSP";
   ${$rtel}{'galicode'} = $f[1];
   ${$rtel}{'personal'} = $f[2];
   ${$rtel}{'galiseite'} = $f[3];
   ${$rtel}{'label'} = sprintf("%d",$f[4]);
   ${$rtel}{'vorgabe_1'} = sprintf("%d",$f[5]);
   ${$rtel}{'menge_1'} = sprintf("%d",$f[6]);
   ${$rtel}{'vorgabe_2'} = sprintf("%d",$f[7]);
   ${$rtel}{'menge_2'} = sprintf("%d",$f[8]);
}


sub RSP_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RSP";
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'galicode'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'personal'});
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'galiseite'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'label'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'vorgabe_1'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'menge_1'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'vorgabe_2'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'menge_2'});
}


sub RSP_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RSP";
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'galicode'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'personal'});
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'galiseite'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'label'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'vorgabe_1'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'menge_1'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'vorgabe_2'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'menge_2'});
}


sub RSP_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RSP";
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'galicode'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'personal'});
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'galiseite'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'label'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'vorgabe_1'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge_1'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'vorgabe_2'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge_2'});
}


sub RSP_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RSP: ";
   $trcbuf .= "galicode='" . substr(${$rbuf},4,10) . "', ";
   $trcbuf .= "personal='" . substr(${$rbuf},15,6) . "', ";
   $trcbuf .= "galiseite='" . substr(${$rbuf},22,12) . "', ";
   $trcbuf .= "label=" . sprintf("%d",substr(${$rbuf},35,3)) . ", ";
   $trcbuf .= "vorgabe_1=" . sprintf("%d",substr(${$rbuf},39,6)) . ", ";
   $trcbuf .= "menge_1=" . sprintf("%d",substr(${$rbuf},46,6)) . ", ";
   $trcbuf .= "vorgabe_2=" . sprintf("%d",substr(${$rbuf},53,6)) . ", ";
   $trcbuf .= "menge_2=" . sprintf("%d",substr(${$rbuf},60,6)) . "";

   return $trcbuf;
}


sub RSP_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RSP: ";
   $trcbuf .= "galicode='" . substr(${$rbuf},3,10) . "', ";
   $trcbuf .= "personal='" . substr(${$rbuf},13,6) . "', ";
   $trcbuf .= "galiseite='" . substr(${$rbuf},19,12) . "', ";
   $trcbuf .= "label=" . sprintf("%d",substr(${$rbuf},31,3)) . ", ";
   $trcbuf .= "vorgabe_1=" . sprintf("%d",substr(${$rbuf},34,6)) . ", ";
   $trcbuf .= "menge_1=" . sprintf("%d",substr(${$rbuf},40,6)) . ", ";
   $trcbuf .= "vorgabe_2=" . sprintf("%d",substr(${$rbuf},46,6)) . ", ";
   $trcbuf .= "menge_2=" . sprintf("%d",substr(${$rbuf},52,6)) . "";

   return $trcbuf;
}


sub RSP_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RSP: ";
   $trcbuf .= "galicode='" . $f[1]  . "', ";
   $trcbuf .= "personal='" . $f[2]  . "', ";
   $trcbuf .= "galiseite='" . $f[3]  . "', ";
   $trcbuf .= "label=" . $f[4]  . ", ";
   $trcbuf .= "vorgabe_1=" . $f[5]  . ", ";
   $trcbuf .= "menge_1=" . $f[6]  . ", ";
   $trcbuf .= "vorgabe_2=" . $f[7]  . ", ";
   $trcbuf .= "menge_2=" . $f[8]  . "";

   return $trcbuf;
}


sub RSP_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RSP: ";
   $trcbuf .= "galicode='" . ${$rtel}{"galicode"} . "', ";
   $trcbuf .= "personal='" . ${$rtel}{"personal"} . "', ";
   $trcbuf .= "galiseite='" . ${$rtel}{"galiseite"} . "', ";
   $trcbuf .= "label=" . ${$rtel}{"label"} . ", ";
   $trcbuf .= "vorgabe_1=" . ${$rtel}{"vorgabe_1"} . ", ";
   $trcbuf .= "menge_1=" . ${$rtel}{"menge_1"} . ", ";
   $trcbuf .= "vorgabe_2=" . ${$rtel}{"vorgabe_2"} . ", ";
   $trcbuf .= "menge_2=" . ${$rtel}{"menge_2"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm RDF                                            #
#############################################################

sub RDF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RDF";
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},4,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},15,1);
   ${$rtel}{'rdf_zeit'} = substr(${$rbuf},17,14);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},32,6));
}


sub RDF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RDF";
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},3,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},13,1);
   ${$rtel}{'rdf_zeit'} = substr(${$rbuf},14,14);
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},28,6));
}


sub RDF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RDF";
   ${$rtel}{'rggali_sei'} = $f[1];
   ${$rtel}{'bat_typ'} = $f[2];
   ${$rtel}{'rdf_zeit'} = $f[3];
   ${$rtel}{'personal_nr'} = sprintf("%d",$f[4]);
}


sub RDF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RDF";
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'rdf_zeit'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'personal_nr'});
}


sub RDF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RDF";
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'rdf_zeit'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'personal_nr'});
}


sub RDF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RDF";
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'rdf_zeit'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'personal_nr'});
}


sub RDF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RDF: ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},4,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},15,1) . "', ";
   $trcbuf .= "rdf_zeit='" . substr(${$rbuf},17,14) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},32,6)) . "";

   return $trcbuf;
}


sub RDF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RDF: ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},3,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "rdf_zeit='" . substr(${$rbuf},14,14) . "', ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},28,6)) . "";

   return $trcbuf;
}


sub RDF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RDF: ";
   $trcbuf .= "rggali_sei='" . $f[1]  . "', ";
   $trcbuf .= "bat_typ='" . $f[2]  . "', ";
   $trcbuf .= "rdf_zeit='" . $f[3]  . "', ";
   $trcbuf .= "personal_nr=" . $f[4]  . "";

   return $trcbuf;
}


sub RDF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RDF: ";
   $trcbuf .= "rggali_sei='" . ${$rtel}{"rggali_sei"} . "', ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "', ";
   $trcbuf .= "rdf_zeit='" . ${$rtel}{"rdf_zeit"} . "', ";
   $trcbuf .= "personal_nr=" . ${$rtel}{"personal_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SFL                                            #
#############################################################

sub SFL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SFL";
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'ga_sc'} = substr(${$rbuf},11,10);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},22,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},33,1);
}


sub SFL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SFL";
   ${$rtel}{'personal_nr'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'ga_sc'} = substr(${$rbuf},9,10);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},19,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},29,1);
}


sub SFL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SFL";
   ${$rtel}{'personal_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'ga_sc'} = $f[2];
   ${$rtel}{'rggali_sei'} = $f[3];
   ${$rtel}{'bat_typ'} = $f[4];
}


sub SFL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'personal_nr'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'ga_sc'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
}


sub SFL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'personal_nr'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'ga_sc'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
}


sub SFL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'personal_nr'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'ga_sc'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
}


sub SFL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFL: ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "ga_sc='" . substr(${$rbuf},11,10) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},22,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},33,1) . "'";

   return $trcbuf;
}


sub SFL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFL: ";
   $trcbuf .= "personal_nr=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "ga_sc='" . substr(${$rbuf},9,10) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},19,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},29,1) . "'";

   return $trcbuf;
}


sub SFL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SFL: ";
   $trcbuf .= "personal_nr=" . $f[1]  . ", ";
   $trcbuf .= "ga_sc='" . $f[2]  . "', ";
   $trcbuf .= "rggali_sei='" . $f[3]  . "', ";
   $trcbuf .= "bat_typ='" . $f[4]  . "'";

   return $trcbuf;
}


sub SFL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFL: ";
   $trcbuf .= "personal_nr=" . ${$rtel}{"personal_nr"} . ", ";
   $trcbuf .= "ga_sc='" . ${$rtel}{"ga_sc"} . "', ";
   $trcbuf .= "rggali_sei='" . ${$rtel}{"rggali_sei"} . "', ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm XFL                                            #
#############################################################

sub XFL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "XFL";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},19,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},21,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},32,1);
}


sub XFL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "XFL";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'fkz'} = substr(${$rbuf},14,1);
   ${$rtel}{'rggali_sei'} = substr(${$rbuf},15,10);
   ${$rtel}{'bat_typ'} = substr(${$rbuf},25,1);
}


sub XFL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "XFL";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'fkz'} = $f[5];
   ${$rtel}{'rggali_sei'} = $f[6];
   ${$rtel}{'bat_typ'} = $f[7];
}


sub XFL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "XFL";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bat_typ'});
}


sub XFL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "XFL";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bat_typ'});
}


sub XFL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "XFL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fkz'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'rggali_sei'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bat_typ'});
}


sub XFL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm XFL: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},21,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},32,1) . "'";

   return $trcbuf;
}


sub XFL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm XFL: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "fkz='" . substr(${$rbuf},14,1) . "', ";
   $trcbuf .= "rggali_sei='" . substr(${$rbuf},15,10) . "', ";
   $trcbuf .= "bat_typ='" . substr(${$rbuf},25,1) . "'";

   return $trcbuf;
}


sub XFL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm XFL: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "fkz='" . $f[5]  . "', ";
   $trcbuf .= "rggali_sei='" . $f[6]  . "', ";
   $trcbuf .= "bat_typ='" . $f[7]  . "'";

   return $trcbuf;
}


sub XFL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm XFL: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "fkz='" . ${$rtel}{"fkz"} . "', ";
   $trcbuf .= "rggali_sei='" . ${$rtel}{"rggali_sei"} . "', ";
   $trcbuf .= "bat_typ='" . ${$rtel}{"bat_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SFB                                            #
#############################################################

sub SFB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
}


sub SFB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub SFB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
}


sub SFB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFB";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
}


sub SFB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFB";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
}


sub SFB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SFB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
}


sub SFB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . "";

   return $trcbuf;
}


sub SFB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub SFB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SFB: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . "";

   return $trcbuf;
}


sub SFB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SFB: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SBM                                            #
#############################################################

sub SBM_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SBM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SBM_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SBM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SBM_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SBM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SBM_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBM";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SBM_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBM";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SBM_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBM";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SBM_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SBM_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SBM_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SBM: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SBM_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBM: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SKD                                            #
#############################################################

sub SKD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SKD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SKD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SKD";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SKD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKD";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SKD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKD";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SKD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKD";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SKD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKD: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SKD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKD: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SKD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SKD: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SKD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKD: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SKM                                            #
#############################################################

sub SKM_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SKM_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SKM_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SKM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SKM_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKM";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SKM_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKM";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SKM_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKM";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SKM_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SKM_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SKM_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SKM: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SKM_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKM: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SKS                                            #
#############################################################

sub SKS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SKS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SKS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SKS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SKS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SKS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SKS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SKS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SKS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SKS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SKS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SKS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SKS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SSM                                            #
#############################################################

sub SSM_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SSM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SSM_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SSM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SSM_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SSM";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SSM_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSM";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SSM_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSM";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SSM_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSM";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SSM_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SSM_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSM: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SSM_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SSM: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SSM_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSM: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SSS                                            #
#############################################################

sub SSS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SSS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SSS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SSS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SSS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SSS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SSS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SSS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SSS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SSS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SSS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SSS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SSS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SSS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SSS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SSS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SVF                                            #
#############################################################

sub SVF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SVF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},21,4));
}


sub SVF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SVF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'anz_sen'} = sprintf("%d",substr(${$rbuf},12,4));
   ${$rtel}{'anz_art'} = sprintf("%d",substr(${$rbuf},16,4));
}


sub SVF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SVF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art'} = sprintf("%d",$f[5]);
}


sub SVF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SVF";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_art'});
}


sub SVF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SVF";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_art'});
}


sub SVF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SVF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art'});
}


sub SVF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SVF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},21,4)) . "";

   return $trcbuf;
}


sub SVF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SVF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "anz_sen=" . sprintf("%d",substr(${$rbuf},12,4)) . ", ";
   $trcbuf .= "anz_art=" . sprintf("%d",substr(${$rbuf},16,4)) . "";

   return $trcbuf;
}


sub SVF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SVF: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen=" . $f[4]  . ", ";
   $trcbuf .= "anz_art=" . $f[5]  . "";

   return $trcbuf;
}


sub SVF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SVF: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_sen=" . ${$rtel}{"anz_sen"} . ", ";
   $trcbuf .= "anz_art=" . ${$rtel}{"anz_art"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SNS                                            #
#############################################################

sub SNS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SNS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},19,4));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'lfd_nr'} = sprintf("%d",substr(${$rbuf},31,4));
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",substr(${$rbuf},36,4));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},41,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},46,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},48,1);
}


sub SNS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SNS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},7,4));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},15,4));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},19,6));
   ${$rtel}{'lfd_nr'} = sprintf("%d",substr(${$rbuf},25,4));
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",substr(${$rbuf},29,4));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},33,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},37,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},38,1);
}


sub SNS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SNS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[5]);
   ${$rtel}{'lfd_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",$f[7]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[8]);
   ${$rtel}{'flag_druck'} = $f[9];
   ${$rtel}{'druck_typ'} = $f[10];
}


sub SNS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNS";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'druck_typ'});
}


sub SNS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNS";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'druck_typ'});
}


sub SNS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'druck_typ'});
}


sub SNS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},19,4)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "lfd_nr=" . sprintf("%d",substr(${$rbuf},31,4)) . ", ";
   $trcbuf .= "lfd_nr_max=" . sprintf("%d",substr(${$rbuf},36,4)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},41,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},46,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},48,1) . "'";

   return $trcbuf;
}


sub SNS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},7,4)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},15,4)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},19,6)) . ", ";
   $trcbuf .= "lfd_nr=" . sprintf("%d",substr(${$rbuf},25,4)) . ", ";
   $trcbuf .= "lfd_nr_max=" . sprintf("%d",substr(${$rbuf},29,4)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},33,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},37,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},38,1) . "'";

   return $trcbuf;
}


sub SNS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SNS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "wannen_id=" . $f[5]  . ", ";
   $trcbuf .= "lfd_nr=" . $f[6]  . ", ";
   $trcbuf .= "lfd_nr_max=" . $f[7]  . ", ";
   $trcbuf .= "rutsche=" . $f[8]  . ", ";
   $trcbuf .= "flag_druck='" . $f[9]  . "', ";
   $trcbuf .= "druck_typ='" . $f[10]  . "'";

   return $trcbuf;
}


sub SNS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "lfd_nr=" . ${$rtel}{"lfd_nr"} . ", ";
   $trcbuf .= "lfd_nr_max=" . ${$rtel}{"lfd_nr_max"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "flag_druck='" . ${$rtel}{"flag_druck"} . "', ";
   $trcbuf .= "druck_typ='" . ${$rtel}{"druck_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SQS                                            #
#############################################################

sub SQS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SQS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},19,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},26,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},31,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},33,1);
   ${$rtel}{'status'} = substr(${$rbuf},35,1);
}


sub SQS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SQS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},7,4));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},15,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},21,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},25,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},26,1);
   ${$rtel}{'status'} = substr(${$rbuf},27,1);
}


sub SQS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SQS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[4]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[5]);
   ${$rtel}{'flag_druck'} = $f[6];
   ${$rtel}{'druck_typ'} = $f[7];
   ${$rtel}{'status'} = $f[8];
}


sub SQS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQS";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub SQS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQS";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub SQS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub SQS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},19,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},26,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},31,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},33,1) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},35,1) . "'";

   return $trcbuf;
}


sub SQS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},7,4)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},15,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},21,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},25,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},26,1) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},27,1) . "'";

   return $trcbuf;
}


sub SQS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SQS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "wannen_id=" . $f[4]  . ", ";
   $trcbuf .= "rutsche=" . $f[5]  . ", ";
   $trcbuf .= "flag_druck='" . $f[6]  . "', ";
   $trcbuf .= "druck_typ='" . $f[7]  . "', ";
   $trcbuf .= "status='" . $f[8]  . "'";

   return $trcbuf;
}


sub SQS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "flag_druck='" . ${$rtel}{"flag_druck"} . "', ";
   $trcbuf .= "druck_typ='" . ${$rtel}{"druck_typ"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SQL                                            #
#############################################################

sub SQL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},16,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},18,1);
   ${$rtel}{'status'} = substr(${$rbuf},20,1);
}


sub SQL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},13,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},14,1);
   ${$rtel}{'status'} = substr(${$rbuf},15,1);
}


sub SQL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[2]);
   ${$rtel}{'flag_druck'} = $f[3];
   ${$rtel}{'druck_typ'} = $f[4];
   ${$rtel}{'status'} = $f[5];
}


sub SQL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub SQL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub SQL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SQL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub SQL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},16,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},18,1) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},20,1) . "'";

   return $trcbuf;
}


sub SQL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},13,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},14,1) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},15,1) . "'";

   return $trcbuf;
}


sub SQL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SQL: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "rutsche=" . $f[2]  . ", ";
   $trcbuf .= "flag_druck='" . $f[3]  . "', ";
   $trcbuf .= "druck_typ='" . $f[4]  . "', ";
   $trcbuf .= "status='" . $f[5]  . "'";

   return $trcbuf;
}


sub SQL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SQL: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "flag_druck='" . ${$rtel}{"flag_druck"} . "', ";
   $trcbuf .= "druck_typ='" . ${$rtel}{"druck_typ"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ST4                                            #
#############################################################

sub ST4_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ST4";
   ${$rtel}{'file_name'} = substr(${$rbuf},4,11);
   ${$rtel}{'datum'} = substr(${$rbuf},16,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},25,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},30,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},34,2));
   ${$rtel}{'lo_lager'} = sprintf("%d",substr(${$rbuf},37,1));
   ${$rtel}{'lo_etage'} = sprintf("%d",substr(${$rbuf},39,1));
   ${$rtel}{'nks_kz'} = sprintf("%d",substr(${$rbuf},41,1));
   ${$rtel}{'file_ext'} = substr(${$rbuf},43,3);
}


sub ST4_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ST4";
   ${$rtel}{'file_name'} = substr(${$rbuf},3,11);
   ${$rtel}{'datum'} = substr(${$rbuf},14,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},22,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},26,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},29,2));
   ${$rtel}{'lo_lager'} = sprintf("%d",substr(${$rbuf},31,1));
   ${$rtel}{'lo_etage'} = sprintf("%d",substr(${$rbuf},32,1));
   ${$rtel}{'nks_kz'} = sprintf("%d",substr(${$rbuf},33,1));
   ${$rtel}{'file_ext'} = substr(${$rbuf},34,3);
}


sub ST4_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ST4";
   ${$rtel}{'file_name'} = $f[1];
   ${$rtel}{'datum'} = $f[2];
   ${$rtel}{'zeit'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[5]);
   ${$rtel}{'lo_lager'} = sprintf("%d",$f[6]);
   ${$rtel}{'lo_etage'} = sprintf("%d",$f[7]);
   ${$rtel}{'nks_kz'} = sprintf("%d",$f[8]);
   ${$rtel}{'file_ext'} = $f[9];
}


sub ST4_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST4";
   ${$rbuf} .= sprintf(" %-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'file_ext'});
}


sub ST4_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST4";
   ${$rbuf} .= sprintf("%-11.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'file_ext'});
}


sub ST4_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST4";
   ${$rbuf} .= sprintf("\t%-.11s",${$rtel}{'file_name'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'file_ext'});
}


sub ST4_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST4: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},4,11) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},16,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},25,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},30,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},34,2)) . ", ";
   $trcbuf .= "lo_lager=" . sprintf("%d",substr(${$rbuf},37,1)) . ", ";
   $trcbuf .= "lo_etage=" . sprintf("%d",substr(${$rbuf},39,1)) . ", ";
   $trcbuf .= "nks_kz=" . sprintf("%d",substr(${$rbuf},41,1)) . ", ";
   $trcbuf .= "file_ext='" . substr(${$rbuf},43,3) . "'";

   return $trcbuf;
}


sub ST4_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST4: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},3,11) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},14,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},22,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},26,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},29,2)) . ", ";
   $trcbuf .= "lo_lager=" . sprintf("%d",substr(${$rbuf},31,1)) . ", ";
   $trcbuf .= "lo_etage=" . sprintf("%d",substr(${$rbuf},32,1)) . ", ";
   $trcbuf .= "nks_kz=" . sprintf("%d",substr(${$rbuf},33,1)) . ", ";
   $trcbuf .= "file_ext='" . substr(${$rbuf},34,3) . "'";

   return $trcbuf;
}


sub ST4_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ST4: ";
   $trcbuf .= "file_name='" . $f[1]  . "', ";
   $trcbuf .= "datum='" . $f[2]  . "', ";
   $trcbuf .= "zeit='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "lvs=" . $f[5]  . ", ";
   $trcbuf .= "lo_lager=" . $f[6]  . ", ";
   $trcbuf .= "lo_etage=" . $f[7]  . ", ";
   $trcbuf .= "nks_kz=" . $f[8]  . ", ";
   $trcbuf .= "file_ext='" . $f[9]  . "'";

   return $trcbuf;
}


sub ST4_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST4: ";
   $trcbuf .= "file_name='" . ${$rtel}{"file_name"} . "', ";
   $trcbuf .= "datum='" . ${$rtel}{"datum"} . "', ";
   $trcbuf .= "zeit='" . ${$rtel}{"zeit"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "lo_lager=" . ${$rtel}{"lo_lager"} . ", ";
   $trcbuf .= "lo_etage=" . ${$rtel}{"lo_etage"} . ", ";
   $trcbuf .= "nks_kz=" . ${$rtel}{"nks_kz"} . ", ";
   $trcbuf .= "file_ext='" . ${$rtel}{"file_ext"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm STF                                            #
#############################################################

sub STF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STF";
   ${$rtel}{'file_name'} = substr(${$rbuf},4,11);
}


sub STF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STF";
   ${$rtel}{'file_name'} = substr(${$rbuf},3,11);
}


sub STF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "STF";
   ${$rtel}{'file_name'} = $f[1];
}


sub STF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STF";
   ${$rbuf} .= sprintf(" %-11.11s",${$rtel}{'file_name'});
}


sub STF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STF";
   ${$rbuf} .= sprintf("%-11.11s",${$rtel}{'file_name'});
}


sub STF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STF";
   ${$rbuf} .= sprintf("\t%-.11s",${$rtel}{'file_name'});
}


sub STF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STF: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},4,11) . "'";

   return $trcbuf;
}


sub STF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STF: ";
   $trcbuf .= "file_name='" . substr(${$rbuf},3,11) . "'";

   return $trcbuf;
}


sub STF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm STF: ";
   $trcbuf .= "file_name='" . $f[1]  . "'";

   return $trcbuf;
}


sub STF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STF: ";
   $trcbuf .= "file_name='" . ${$rtel}{"file_name"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ST6                                            #
#############################################################

sub ST6_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ST6";
   ${$rtel}{'file_namend'} = substr(${$rbuf},4,17);
   ${$rtel}{'datum'} = substr(${$rbuf},22,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},31,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},36,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},41,4));
   ${$rtel}{'lo_lager'} = sprintf("%d",substr(${$rbuf},46,4));
   ${$rtel}{'lo_etage'} = sprintf("%d",substr(${$rbuf},51,4));
   ${$rtel}{'nks_kz'} = sprintf("%d",substr(${$rbuf},56,4));
   ${$rtel}{'block'} = sprintf("%d",substr(${$rbuf},61,4));
}


sub ST6_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ST6";
   ${$rtel}{'file_namend'} = substr(${$rbuf},3,17);
   ${$rtel}{'datum'} = substr(${$rbuf},20,8);
   ${$rtel}{'zeit'} = substr(${$rbuf},28,4);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},32,4));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},36,4));
   ${$rtel}{'lo_lager'} = sprintf("%d",substr(${$rbuf},40,4));
   ${$rtel}{'lo_etage'} = sprintf("%d",substr(${$rbuf},44,4));
   ${$rtel}{'nks_kz'} = sprintf("%d",substr(${$rbuf},48,4));
   ${$rtel}{'block'} = sprintf("%d",substr(${$rbuf},52,4));
}


sub ST6_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ST6";
   ${$rtel}{'file_namend'} = $f[1];
   ${$rtel}{'datum'} = $f[2];
   ${$rtel}{'zeit'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[5]);
   ${$rtel}{'lo_lager'} = sprintf("%d",$f[6]);
   ${$rtel}{'lo_etage'} = sprintf("%d",$f[7]);
   ${$rtel}{'nks_kz'} = sprintf("%d",$f[8]);
   ${$rtel}{'block'} = sprintf("%d",$f[9]);
}


sub ST6_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST6";
   ${$rbuf} .= sprintf(" %-17.17s",${$rtel}{'file_namend'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'block'});
}


sub ST6_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST6";
   ${$rbuf} .= sprintf("%-17.17s",${$rtel}{'file_namend'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'block'});
}


sub ST6_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ST6";
   ${$rbuf} .= sprintf("\t%-.17s",${$rtel}{'file_namend'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'zeit'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lo_lager'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lo_etage'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nks_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'block'});
}


sub ST6_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST6: ";
   $trcbuf .= "file_namend='" . substr(${$rbuf},4,17) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},22,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},31,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},36,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},41,4)) . ", ";
   $trcbuf .= "lo_lager=" . sprintf("%d",substr(${$rbuf},46,4)) . ", ";
   $trcbuf .= "lo_etage=" . sprintf("%d",substr(${$rbuf},51,4)) . ", ";
   $trcbuf .= "nks_kz=" . sprintf("%d",substr(${$rbuf},56,4)) . ", ";
   $trcbuf .= "block=" . sprintf("%d",substr(${$rbuf},61,4)) . "";

   return $trcbuf;
}


sub ST6_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST6: ";
   $trcbuf .= "file_namend='" . substr(${$rbuf},3,17) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},20,8) . "', ";
   $trcbuf .= "zeit='" . substr(${$rbuf},28,4) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},32,4)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},36,4)) . ", ";
   $trcbuf .= "lo_lager=" . sprintf("%d",substr(${$rbuf},40,4)) . ", ";
   $trcbuf .= "lo_etage=" . sprintf("%d",substr(${$rbuf},44,4)) . ", ";
   $trcbuf .= "nks_kz=" . sprintf("%d",substr(${$rbuf},48,4)) . ", ";
   $trcbuf .= "block=" . sprintf("%d",substr(${$rbuf},52,4)) . "";

   return $trcbuf;
}


sub ST6_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ST6: ";
   $trcbuf .= "file_namend='" . $f[1]  . "', ";
   $trcbuf .= "datum='" . $f[2]  . "', ";
   $trcbuf .= "zeit='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "lvs=" . $f[5]  . ", ";
   $trcbuf .= "lo_lager=" . $f[6]  . ", ";
   $trcbuf .= "lo_etage=" . $f[7]  . ", ";
   $trcbuf .= "nks_kz=" . $f[8]  . ", ";
   $trcbuf .= "block=" . $f[9]  . "";

   return $trcbuf;
}


sub ST6_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ST6: ";
   $trcbuf .= "file_namend='" . ${$rtel}{"file_namend"} . "', ";
   $trcbuf .= "datum='" . ${$rtel}{"datum"} . "', ";
   $trcbuf .= "zeit='" . ${$rtel}{"zeit"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "lo_lager=" . ${$rtel}{"lo_lager"} . ", ";
   $trcbuf .= "lo_etage=" . ${$rtel}{"lo_etage"} . ", ";
   $trcbuf .= "nks_kz=" . ${$rtel}{"nks_kz"} . ", ";
   $trcbuf .= "block=" . ${$rtel}{"block"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm EBD                                            #
#############################################################

sub EBD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EBD";
   ${$rtel}{'bde_daten'} = substr(${$rbuf},4,256);
}


sub EBD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EBD";
   ${$rtel}{'bde_daten'} = substr(${$rbuf},3,256);
}


sub EBD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "EBD";
   ${$rtel}{'bde_daten'} = $f[1];
}


sub EBD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EBD";
   ${$rbuf} .= sprintf(" %-256.256s",${$rtel}{'bde_daten'});
}


sub EBD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EBD";
   ${$rbuf} .= sprintf("%-256.256s",${$rtel}{'bde_daten'});
}


sub EBD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EBD";
   ${$rbuf} .= sprintf("\t%-.256s",${$rtel}{'bde_daten'});
}


sub EBD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EBD: ";
   $trcbuf .= "bde_daten='" . substr(${$rbuf},4,256) . "'";

   return $trcbuf;
}


sub EBD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EBD: ";
   $trcbuf .= "bde_daten='" . substr(${$rbuf},3,256) . "'";

   return $trcbuf;
}


sub EBD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm EBD: ";
   $trcbuf .= "bde_daten='" . $f[1]  . "'";

   return $trcbuf;
}


sub EBD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EBD: ";
   $trcbuf .= "bde_daten='" . ${$rtel}{"bde_daten"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FDAT                                           #
#############################################################

sub FDAT_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FDAT";
   ${$rtel}{'satzart'} = substr(${$rbuf},5,1);
   ${$rtel}{'tag'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'bat'} = sprintf("%d",substr(${$rbuf},11,2));
   ${$rtel}{'sen'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'art'} = sprintf("%d",substr(${$rbuf},19,2));
   ${$rtel}{'fehl_kz'} = substr(${$rbuf},22,1);
   ${$rtel}{'kz_aktion'} = substr(${$rbuf},24,1);
   ${$rtel}{'fehl_kz_org'} = substr(${$rbuf},26,1);
   ${$rtel}{'azbereich'} = substr(${$rbuf},28,1);
}


sub FDAT_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FDAT";
   ${$rtel}{'satzart'} = substr(${$rbuf},4,1);
   ${$rtel}{'tag'} = sprintf("%d",substr(${$rbuf},5,3));
   ${$rtel}{'bat'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen'} = sprintf("%d",substr(${$rbuf},10,4));
   ${$rtel}{'art'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'fehl_kz'} = substr(${$rbuf},16,1);
   ${$rtel}{'kz_aktion'} = substr(${$rbuf},17,1);
   ${$rtel}{'fehl_kz_org'} = substr(${$rbuf},18,1);
   ${$rtel}{'azbereich'} = substr(${$rbuf},19,1);
}


sub FDAT_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FDAT";
   ${$rtel}{'satzart'} = $f[1];
   ${$rtel}{'tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'bat'} = sprintf("%d",$f[3]);
   ${$rtel}{'sen'} = sprintf("%d",$f[4]);
   ${$rtel}{'art'} = sprintf("%d",$f[5]);
   ${$rtel}{'fehl_kz'} = $f[6];
   ${$rtel}{'kz_aktion'} = $f[7];
   ${$rtel}{'fehl_kz_org'} = $f[8];
   ${$rtel}{'azbereich'} = $f[9];
}


sub FDAT_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FDAT";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'satzart'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fehl_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kz_aktion'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'fehl_kz_org'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'azbereich'});
}


sub FDAT_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FDAT";
   ${$rbuf} .= sprintf("%s",${$rtel}{'satzart'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fehl_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kz_aktion'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'fehl_kz_org'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'azbereich'});
}


sub FDAT_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FDAT";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'satzart'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fehl_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kz_aktion'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'fehl_kz_org'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'azbereich'});
}


sub FDAT_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FDAT: ";
   $trcbuf .= "satzart='" . substr(${$rbuf},5,1) . "', ";
   $trcbuf .= "tag=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "bat=" . sprintf("%d",substr(${$rbuf},11,2)) . ", ";
   $trcbuf .= "sen=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "art=" . sprintf("%d",substr(${$rbuf},19,2)) . ", ";
   $trcbuf .= "fehl_kz='" . substr(${$rbuf},22,1) . "', ";
   $trcbuf .= "kz_aktion='" . substr(${$rbuf},24,1) . "', ";
   $trcbuf .= "fehl_kz_org='" . substr(${$rbuf},26,1) . "', ";
   $trcbuf .= "azbereich='" . substr(${$rbuf},28,1) . "'";

   return $trcbuf;
}


sub FDAT_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FDAT: ";
   $trcbuf .= "satzart='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "tag=" . sprintf("%d",substr(${$rbuf},5,3)) . ", ";
   $trcbuf .= "bat=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen=" . sprintf("%d",substr(${$rbuf},10,4)) . ", ";
   $trcbuf .= "art=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "fehl_kz='" . substr(${$rbuf},16,1) . "', ";
   $trcbuf .= "kz_aktion='" . substr(${$rbuf},17,1) . "', ";
   $trcbuf .= "fehl_kz_org='" . substr(${$rbuf},18,1) . "', ";
   $trcbuf .= "azbereich='" . substr(${$rbuf},19,1) . "'";

   return $trcbuf;
}


sub FDAT_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FDAT: ";
   $trcbuf .= "satzart='" . $f[1]  . "', ";
   $trcbuf .= "tag=" . $f[2]  . ", ";
   $trcbuf .= "bat=" . $f[3]  . ", ";
   $trcbuf .= "sen=" . $f[4]  . ", ";
   $trcbuf .= "art=" . $f[5]  . ", ";
   $trcbuf .= "fehl_kz='" . $f[6]  . "', ";
   $trcbuf .= "kz_aktion='" . $f[7]  . "', ";
   $trcbuf .= "fehl_kz_org='" . $f[8]  . "', ";
   $trcbuf .= "azbereich='" . $f[9]  . "'";

   return $trcbuf;
}


sub FDAT_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FDAT: ";
   $trcbuf .= "satzart='" . ${$rtel}{"satzart"} . "', ";
   $trcbuf .= "tag=" . ${$rtel}{"tag"} . ", ";
   $trcbuf .= "bat=" . ${$rtel}{"bat"} . ", ";
   $trcbuf .= "sen=" . ${$rtel}{"sen"} . ", ";
   $trcbuf .= "art=" . ${$rtel}{"art"} . ", ";
   $trcbuf .= "fehl_kz='" . ${$rtel}{"fehl_kz"} . "', ";
   $trcbuf .= "kz_aktion='" . ${$rtel}{"kz_aktion"} . "', ";
   $trcbuf .= "fehl_kz_org='" . ${$rtel}{"fehl_kz_org"} . "', ";
   $trcbuf .= "azbereich='" . ${$rtel}{"azbereich"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ETI                                            #
#############################################################

sub ETI_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ETI";
   ${$rtel}{'dname'} = substr(${$rbuf},4,30);
   ${$rtel}{'path_filename'} = substr(${$rbuf},35,100);
   ${$rtel}{'ename'} = substr(${$rbuf},136,20);
   ${$rtel}{'druckfelder'} = substr(${$rbuf},157,300);
}


sub ETI_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ETI";
   ${$rtel}{'dname'} = substr(${$rbuf},3,30);
   ${$rtel}{'path_filename'} = substr(${$rbuf},33,100);
   ${$rtel}{'ename'} = substr(${$rbuf},133,20);
   ${$rtel}{'druckfelder'} = substr(${$rbuf},153,300);
}


sub ETI_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ETI";
   ${$rtel}{'dname'} = $f[1];
   ${$rtel}{'path_filename'} = $f[2];
   ${$rtel}{'ename'} = $f[3];
   ${$rtel}{'druckfelder'} = $f[4];
}


sub ETI_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ETI";
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'dname'});
   ${$rbuf} .= sprintf(" %-100.100s",${$rtel}{'path_filename'});
   ${$rbuf} .= sprintf(" %-20.20s",${$rtel}{'ename'});
   ${$rbuf} .= sprintf(" %-300.300s",${$rtel}{'druckfelder'});
}


sub ETI_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ETI";
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'dname'});
   ${$rbuf} .= sprintf("%-100.100s",${$rtel}{'path_filename'});
   ${$rbuf} .= sprintf("%-20.20s",${$rtel}{'ename'});
   ${$rbuf} .= sprintf("%-300.300s",${$rtel}{'druckfelder'});
}


sub ETI_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ETI";
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'dname'});
   ${$rbuf} .= sprintf("\t%-.100s",${$rtel}{'path_filename'});
   ${$rbuf} .= sprintf("\t%-.20s",${$rtel}{'ename'});
   ${$rbuf} .= sprintf("\t%-.300s",${$rtel}{'druckfelder'});
}


sub ETI_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ETI: ";
   $trcbuf .= "dname='" . substr(${$rbuf},4,30) . "', ";
   $trcbuf .= "path_filename='" . substr(${$rbuf},35,100) . "', ";
   $trcbuf .= "ename='" . substr(${$rbuf},136,20) . "', ";
   $trcbuf .= "druckfelder='" . substr(${$rbuf},157,300) . "'";

   return $trcbuf;
}


sub ETI_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ETI: ";
   $trcbuf .= "dname='" . substr(${$rbuf},3,30) . "', ";
   $trcbuf .= "path_filename='" . substr(${$rbuf},33,100) . "', ";
   $trcbuf .= "ename='" . substr(${$rbuf},133,20) . "', ";
   $trcbuf .= "druckfelder='" . substr(${$rbuf},153,300) . "'";

   return $trcbuf;
}


sub ETI_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ETI: ";
   $trcbuf .= "dname='" . $f[1]  . "', ";
   $trcbuf .= "path_filename='" . $f[2]  . "', ";
   $trcbuf .= "ename='" . $f[3]  . "', ";
   $trcbuf .= "druckfelder='" . $f[4]  . "'";

   return $trcbuf;
}


sub ETI_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ETI: ";
   $trcbuf .= "dname='" . ${$rtel}{"dname"} . "', ";
   $trcbuf .= "path_filename='" . ${$rtel}{"path_filename"} . "', ";
   $trcbuf .= "ename='" . ${$rtel}{"ename"} . "', ";
   $trcbuf .= "druckfelder='" . ${$rtel}{"druckfelder"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm SCE                                            #
#############################################################

sub SCE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SCE";
   ${$rtel}{'loader'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'barc_sorter'} = substr(${$rbuf},7,10);
   ${$rtel}{'barc_ne'} = substr(${$rbuf},18,18);
   ${$rtel}{'barc_ean'} = substr(${$rbuf},37,13);
}


sub SCE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SCE";
   ${$rtel}{'loader'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'barc_sorter'} = substr(${$rbuf},5,10);
   ${$rtel}{'barc_ne'} = substr(${$rbuf},15,18);
   ${$rtel}{'barc_ean'} = substr(${$rbuf},33,13);
}


sub SCE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SCE";
   ${$rtel}{'loader'} = sprintf("%d",$f[1]);
   ${$rtel}{'barc_sorter'} = $f[2];
   ${$rtel}{'barc_ne'} = $f[3];
   ${$rtel}{'barc_ean'} = $f[4];
}


sub SCE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SCE";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'loader'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'barc_sorter'});
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'barc_ne'});
   ${$rbuf} .= sprintf(" %-13.13s",${$rtel}{'barc_ean'});
}


sub SCE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SCE";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'loader'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'barc_sorter'});
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'barc_ne'});
   ${$rbuf} .= sprintf("%-13.13s",${$rtel}{'barc_ean'});
}


sub SCE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SCE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'loader'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'barc_sorter'});
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'barc_ne'});
   ${$rbuf} .= sprintf("\t%-.13s",${$rtel}{'barc_ean'});
}


sub SCE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SCE: ";
   $trcbuf .= "loader=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "barc_sorter='" . substr(${$rbuf},7,10) . "', ";
   $trcbuf .= "barc_ne='" . substr(${$rbuf},18,18) . "', ";
   $trcbuf .= "barc_ean='" . substr(${$rbuf},37,13) . "'";

   return $trcbuf;
}


sub SCE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SCE: ";
   $trcbuf .= "loader=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "barc_sorter='" . substr(${$rbuf},5,10) . "', ";
   $trcbuf .= "barc_ne='" . substr(${$rbuf},15,18) . "', ";
   $trcbuf .= "barc_ean='" . substr(${$rbuf},33,13) . "'";

   return $trcbuf;
}


sub SCE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SCE: ";
   $trcbuf .= "loader=" . $f[1]  . ", ";
   $trcbuf .= "barc_sorter='" . $f[2]  . "', ";
   $trcbuf .= "barc_ne='" . $f[3]  . "', ";
   $trcbuf .= "barc_ean='" . $f[4]  . "'";

   return $trcbuf;
}


sub SCE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SCE: ";
   $trcbuf .= "loader=" . ${$rtel}{"loader"} . ", ";
   $trcbuf .= "barc_sorter='" . ${$rtel}{"barc_sorter"} . "', ";
   $trcbuf .= "barc_ne='" . ${$rtel}{"barc_ne"} . "', ";
   $trcbuf .= "barc_ean='" . ${$rtel}{"barc_ean"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BAN                                            #
#############################################################

sub BAN_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAN";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'anab_zeit'} = substr(${$rbuf},17,10);
}


sub BAN_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAN";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'anab_zeit'} = substr(${$rbuf},13,10);
}


sub BAN_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BAN";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'anab_zeit'} = $f[4];
}


sub BAN_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAN";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'anab_zeit'});
}


sub BAN_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAN";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'anab_zeit'});
}


sub BAN_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAN";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'anab_zeit'});
}


sub BAN_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAN: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "'";

   return $trcbuf;
}


sub BAN_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAN: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "'";

   return $trcbuf;
}


sub BAN_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BAN: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "'";

   return $trcbuf;
}


sub BAN_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAN: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BAB                                            #
#############################################################

sub BAB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAB";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'anab_zeit'} = substr(${$rbuf},17,10);
}


sub BAB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAB";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'anab_zeit'} = substr(${$rbuf},13,10);
}


sub BAB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BAB";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'anab_zeit'} = $f[4];
}


sub BAB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAB";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'anab_zeit'});
}


sub BAB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAB";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'anab_zeit'});
}


sub BAB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'anab_zeit'});
}


sub BAB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAB: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "'";

   return $trcbuf;
}


sub BAB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAB: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "'";

   return $trcbuf;
}


sub BAB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BAB: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "'";

   return $trcbuf;
}


sub BAB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAB: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BSD                                            #
#############################################################

sub BSD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSD";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'senid'} = substr(${$rbuf},17,30);
}


sub BSD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSD";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'senid'} = substr(${$rbuf},13,30);
}


sub BSD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BSD";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'senid'} = $f[4];
}


sub BSD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSD";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'senid'});
}


sub BSD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSD";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'senid'});
}


sub BSD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSD";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'senid'});
}


sub BSD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSD: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "senid='" . substr(${$rbuf},17,30) . "'";

   return $trcbuf;
}


sub BSD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSD: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "senid='" . substr(${$rbuf},13,30) . "'";

   return $trcbuf;
}


sub BSD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BSD: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "senid='" . $f[4]  . "'";

   return $trcbuf;
}


sub BSD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSD: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "senid='" . ${$rtel}{"senid"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BSA                                            #
#############################################################

sub BSA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSA";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'sta_sendg'} = substr(${$rbuf},29,1);
   ${$rtel}{'anz_artikel'} = sprintf("%d",substr(${$rbuf},31,2));
   ${$rtel}{'anz_beilagen'} = sprintf("%d",substr(${$rbuf},34,2));
   ${$rtel}{'anz_aufkleber'} = sprintf("%d",substr(${$rbuf},37,2));
   ${$rtel}{'anz_kom_stat'} = sprintf("%d",substr(${$rbuf},40,2));
   ${$rtel}{'anz_kom_dyn'} = sprintf("%d",substr(${$rbuf},43,2));
   ${$rtel}{'sta_abschl'} = substr(${$rbuf},46,1);
   ${$rtel}{'anz_fehlersen'} = sprintf("%d",substr(${$rbuf},48,2));
   ${$rtel}{'anz_fehlerart'} = sprintf("%d",substr(${$rbuf},51,2));
   ${$rtel}{'anz_fehlerbei'} = sprintf("%d",substr(${$rbuf},54,2));
   ${$rtel}{'anz_fehlerauf'} = sprintf("%d",substr(${$rbuf},57,2));
}


sub BSA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSA";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'sta_sendg'} = substr(${$rbuf},22,1);
   ${$rtel}{'anz_artikel'} = sprintf("%d",substr(${$rbuf},23,2));
   ${$rtel}{'anz_beilagen'} = sprintf("%d",substr(${$rbuf},25,2));
   ${$rtel}{'anz_aufkleber'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'anz_kom_stat'} = sprintf("%d",substr(${$rbuf},29,2));
   ${$rtel}{'anz_kom_dyn'} = sprintf("%d",substr(${$rbuf},31,2));
   ${$rtel}{'sta_abschl'} = substr(${$rbuf},33,1);
   ${$rtel}{'anz_fehlersen'} = sprintf("%d",substr(${$rbuf},34,2));
   ${$rtel}{'anz_fehlerart'} = sprintf("%d",substr(${$rbuf},36,2));
   ${$rtel}{'anz_fehlerbei'} = sprintf("%d",substr(${$rbuf},38,2));
   ${$rtel}{'anz_fehlerauf'} = sprintf("%d",substr(${$rbuf},40,2));
}


sub BSA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BSA";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'sta_sendg'} = $f[7];
   ${$rtel}{'anz_artikel'} = sprintf("%d",$f[8]);
   ${$rtel}{'anz_beilagen'} = sprintf("%d",$f[9]);
   ${$rtel}{'anz_aufkleber'} = sprintf("%d",$f[10]);
   ${$rtel}{'anz_kom_stat'} = sprintf("%d",$f[11]);
   ${$rtel}{'anz_kom_dyn'} = sprintf("%d",$f[12]);
   ${$rtel}{'sta_abschl'} = $f[13];
   ${$rtel}{'anz_fehlersen'} = sprintf("%d",$f[14]);
   ${$rtel}{'anz_fehlerart'} = sprintf("%d",$f[15]);
   ${$rtel}{'anz_fehlerbei'} = sprintf("%d",$f[16]);
   ${$rtel}{'anz_fehlerauf'} = sprintf("%d",$f[17]);
}


sub BSA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSA";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sta_sendg'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_beilagen'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_aufkleber'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_kom_stat'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_kom_dyn'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sta_abschl'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_fehlersen'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_fehlerart'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_fehlerbei'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_fehlerauf'});
}


sub BSA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSA";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sta_sendg'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_beilagen'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_aufkleber'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_kom_stat'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_kom_dyn'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sta_abschl'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_fehlersen'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_fehlerart'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_fehlerbei'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_fehlerauf'});
}


sub BSA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sta_sendg'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_artikel'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_beilagen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_aufkleber'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kom_stat'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kom_dyn'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sta_abschl'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_fehlersen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_fehlerart'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_fehlerbei'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_fehlerauf'});
}


sub BSA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSA: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "sta_sendg='" . substr(${$rbuf},29,1) . "', ";
   $trcbuf .= "anz_artikel=" . sprintf("%d",substr(${$rbuf},31,2)) . ", ";
   $trcbuf .= "anz_beilagen=" . sprintf("%d",substr(${$rbuf},34,2)) . ", ";
   $trcbuf .= "anz_aufkleber=" . sprintf("%d",substr(${$rbuf},37,2)) . ", ";
   $trcbuf .= "anz_kom_stat=" . sprintf("%d",substr(${$rbuf},40,2)) . ", ";
   $trcbuf .= "anz_kom_dyn=" . sprintf("%d",substr(${$rbuf},43,2)) . ", ";
   $trcbuf .= "sta_abschl='" . substr(${$rbuf},46,1) . "', ";
   $trcbuf .= "anz_fehlersen=" . sprintf("%d",substr(${$rbuf},48,2)) . ", ";
   $trcbuf .= "anz_fehlerart=" . sprintf("%d",substr(${$rbuf},51,2)) . ", ";
   $trcbuf .= "anz_fehlerbei=" . sprintf("%d",substr(${$rbuf},54,2)) . ", ";
   $trcbuf .= "anz_fehlerauf=" . sprintf("%d",substr(${$rbuf},57,2)) . "";

   return $trcbuf;
}


sub BSA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSA: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "sta_sendg='" . substr(${$rbuf},22,1) . "', ";
   $trcbuf .= "anz_artikel=" . sprintf("%d",substr(${$rbuf},23,2)) . ", ";
   $trcbuf .= "anz_beilagen=" . sprintf("%d",substr(${$rbuf},25,2)) . ", ";
   $trcbuf .= "anz_aufkleber=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "anz_kom_stat=" . sprintf("%d",substr(${$rbuf},29,2)) . ", ";
   $trcbuf .= "anz_kom_dyn=" . sprintf("%d",substr(${$rbuf},31,2)) . ", ";
   $trcbuf .= "sta_abschl='" . substr(${$rbuf},33,1) . "', ";
   $trcbuf .= "anz_fehlersen=" . sprintf("%d",substr(${$rbuf},34,2)) . ", ";
   $trcbuf .= "anz_fehlerart=" . sprintf("%d",substr(${$rbuf},36,2)) . ", ";
   $trcbuf .= "anz_fehlerbei=" . sprintf("%d",substr(${$rbuf},38,2)) . ", ";
   $trcbuf .= "anz_fehlerauf=" . sprintf("%d",substr(${$rbuf},40,2)) . "";

   return $trcbuf;
}


sub BSA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BSA: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "sta_sendg='" . $f[7]  . "', ";
   $trcbuf .= "anz_artikel=" . $f[8]  . ", ";
   $trcbuf .= "anz_beilagen=" . $f[9]  . ", ";
   $trcbuf .= "anz_aufkleber=" . $f[10]  . ", ";
   $trcbuf .= "anz_kom_stat=" . $f[11]  . ", ";
   $trcbuf .= "anz_kom_dyn=" . $f[12]  . ", ";
   $trcbuf .= "sta_abschl='" . $f[13]  . "', ";
   $trcbuf .= "anz_fehlersen=" . $f[14]  . ", ";
   $trcbuf .= "anz_fehlerart=" . $f[15]  . ", ";
   $trcbuf .= "anz_fehlerbei=" . $f[16]  . ", ";
   $trcbuf .= "anz_fehlerauf=" . $f[17]  . "";

   return $trcbuf;
}


sub BSA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSA: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "sta_sendg='" . ${$rtel}{"sta_sendg"} . "', ";
   $trcbuf .= "anz_artikel=" . ${$rtel}{"anz_artikel"} . ", ";
   $trcbuf .= "anz_beilagen=" . ${$rtel}{"anz_beilagen"} . ", ";
   $trcbuf .= "anz_aufkleber=" . ${$rtel}{"anz_aufkleber"} . ", ";
   $trcbuf .= "anz_kom_stat=" . ${$rtel}{"anz_kom_stat"} . ", ";
   $trcbuf .= "anz_kom_dyn=" . ${$rtel}{"anz_kom_dyn"} . ", ";
   $trcbuf .= "sta_abschl='" . ${$rtel}{"sta_abschl"} . "', ";
   $trcbuf .= "anz_fehlersen=" . ${$rtel}{"anz_fehlersen"} . ", ";
   $trcbuf .= "anz_fehlerart=" . ${$rtel}{"anz_fehlerart"} . ", ";
   $trcbuf .= "anz_fehlerbei=" . ${$rtel}{"anz_fehlerbei"} . ", ";
   $trcbuf .= "anz_fehlerauf=" . ${$rtel}{"anz_fehlerauf"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BFS                                            #
#############################################################

sub BFS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFS";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},29,3);
   ${$rtel}{'ftyp_anz'} = sprintf("%d",substr(${$rbuf},33,2));
}


sub BFS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFS";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},22,3);
   ${$rtel}{'ftyp_anz'} = sprintf("%d",substr(${$rbuf},25,2));
}


sub BFS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BFS";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'ftyp_bek'} = $f[7];
   ${$rtel}{'ftyp_anz'} = sprintf("%d",$f[8]);
}


sub BFS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFS";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'ftyp_anz'});
}


sub BFS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFS";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'ftyp_anz'});
}


sub BFS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'ftyp_anz'});
}


sub BFS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFS: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},29,3) . "', ";
   $trcbuf .= "ftyp_anz=" . sprintf("%d",substr(${$rbuf},33,2)) . "";

   return $trcbuf;
}


sub BFS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFS: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},22,3) . "', ";
   $trcbuf .= "ftyp_anz=" . sprintf("%d",substr(${$rbuf},25,2)) . "";

   return $trcbuf;
}


sub BFS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BFS: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "ftyp_bek='" . $f[7]  . "', ";
   $trcbuf .= "ftyp_anz=" . $f[8]  . "";

   return $trcbuf;
}


sub BFS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFS: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "ftyp_bek='" . ${$rtel}{"ftyp_bek"} . "', ";
   $trcbuf .= "ftyp_anz=" . ${$rtel}{"ftyp_anz"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BFA                                            #
#############################################################

sub BFA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFA";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},29,2));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},32,3);
   ${$rtel}{'kz_ppteil'} = substr(${$rbuf},36,1);
}


sub BFA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFA";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},22,2));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},24,3);
   ${$rtel}{'kz_ppteil'} = substr(${$rbuf},27,1);
}


sub BFA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BFA";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[7]);
   ${$rtel}{'ftyp_bek'} = $f[8];
   ${$rtel}{'kz_ppteil'} = $f[9];
}


sub BFA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFA";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kz_ppteil'});
}


sub BFA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFA";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kz_ppteil'});
}


sub BFA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ftyp_bek'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kz_ppteil'});
}


sub BFA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFA: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},29,2)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},32,3) . "', ";
   $trcbuf .= "kz_ppteil='" . substr(${$rbuf},36,1) . "'";

   return $trcbuf;
}


sub BFA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFA: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},22,2)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},24,3) . "', ";
   $trcbuf .= "kz_ppteil='" . substr(${$rbuf},27,1) . "'";

   return $trcbuf;
}


sub BFA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BFA: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "art_za=" . $f[7]  . ", ";
   $trcbuf .= "ftyp_bek='" . $f[8]  . "', ";
   $trcbuf .= "kz_ppteil='" . $f[9]  . "'";

   return $trcbuf;
}


sub BFA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFA: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "ftyp_bek='" . ${$rtel}{"ftyp_bek"} . "', ";
   $trcbuf .= "kz_ppteil='" . ${$rtel}{"kz_ppteil"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BFB                                            #
#############################################################

sub BFB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFB";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'schluessel'} = substr(${$rbuf},29,4);
   ${$rtel}{'menge_bei'} = sprintf("%d",substr(${$rbuf},34,2));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},37,3);
}


sub BFB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFB";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'schluessel'} = substr(${$rbuf},22,4);
   ${$rtel}{'menge_bei'} = sprintf("%d",substr(${$rbuf},26,2));
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},28,3);
}


sub BFB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BFB";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'schluessel'} = $f[7];
   ${$rtel}{'menge_bei'} = sprintf("%d",$f[8]);
   ${$rtel}{'ftyp_bek'} = $f[9];
}


sub BFB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFB";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'schluessel'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'menge_bei'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ftyp_bek'});
}


sub BFB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFB";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'schluessel'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'menge_bei'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ftyp_bek'});
}


sub BFB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'schluessel'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge_bei'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ftyp_bek'});
}


sub BFB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFB: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "schluessel='" . substr(${$rbuf},29,4) . "', ";
   $trcbuf .= "menge_bei=" . sprintf("%d",substr(${$rbuf},34,2)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},37,3) . "'";

   return $trcbuf;
}


sub BFB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFB: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "schluessel='" . substr(${$rbuf},22,4) . "', ";
   $trcbuf .= "menge_bei=" . sprintf("%d",substr(${$rbuf},26,2)) . ", ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},28,3) . "'";

   return $trcbuf;
}


sub BFB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BFB: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "schluessel='" . $f[7]  . "', ";
   $trcbuf .= "menge_bei=" . $f[8]  . ", ";
   $trcbuf .= "ftyp_bek='" . $f[9]  . "'";

   return $trcbuf;
}


sub BFB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFB: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "schluessel='" . ${$rtel}{"schluessel"} . "', ";
   $trcbuf .= "menge_bei=" . ${$rtel}{"menge_bei"} . ", ";
   $trcbuf .= "ftyp_bek='" . ${$rtel}{"ftyp_bek"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BFK                                            #
#############################################################

sub BFK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFK";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'kz_aufkl'} = substr(${$rbuf},29,1);
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},31,3);
}


sub BFK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFK";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'kz_aufkl'} = substr(${$rbuf},22,1);
   ${$rtel}{'ftyp_bek'} = substr(${$rbuf},23,3);
}


sub BFK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BFK";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'kz_aufkl'} = $f[7];
   ${$rtel}{'ftyp_bek'} = $f[8];
}


sub BFK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFK";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'kz_aufkl'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ftyp_bek'});
}


sub BFK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFK";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'kz_aufkl'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ftyp_bek'});
}


sub BFK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'kz_aufkl'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ftyp_bek'});
}


sub BFK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFK: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "kz_aufkl='" . substr(${$rbuf},29,1) . "', ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},31,3) . "'";

   return $trcbuf;
}


sub BFK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFK: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "kz_aufkl='" . substr(${$rbuf},22,1) . "', ";
   $trcbuf .= "ftyp_bek='" . substr(${$rbuf},23,3) . "'";

   return $trcbuf;
}


sub BFK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BFK: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "kz_aufkl='" . $f[7]  . "', ";
   $trcbuf .= "ftyp_bek='" . $f[8]  . "'";

   return $trcbuf;
}


sub BFK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFK: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "kz_aufkl='" . ${$rtel}{"kz_aufkl"} . "', ";
   $trcbuf .= "ftyp_bek='" . ${$rtel}{"ftyp_bek"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BFF                                            #
#############################################################

sub BFF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFF";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},7,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},14,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'galicode'} = substr(${$rbuf},29,10);
}


sub BFF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BFF";
   ${$rtel}{'apnr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},5,6));
   ${$rtel}{'schkz'} = substr(${$rbuf},11,2);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},13,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'galicode'} = substr(${$rbuf},22,10);
}


sub BFF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BFF";
   ${$rtel}{'apnr'} = sprintf("%d",$f[1]);
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'schkz'} = $f[3];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[4]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'galicode'} = $f[7];
}


sub BFF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFF";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'galicode'});
}


sub BFF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFF";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'galicode'});
}


sub BFF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BFF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'apnr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'schkz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'galicode'});
}


sub BFF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFF: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},7,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},14,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "galicode='" . substr(${$rbuf},29,10) . "'";

   return $trcbuf;
}


sub BFF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFF: ";
   $trcbuf .= "apnr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},5,6)) . ", ";
   $trcbuf .= "schkz='" . substr(${$rbuf},11,2) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},13,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "galicode='" . substr(${$rbuf},22,10) . "'";

   return $trcbuf;
}


sub BFF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BFF: ";
   $trcbuf .= "apnr=" . $f[1]  . ", ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "schkz='" . $f[3]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[4]  . ", ";
   $trcbuf .= "bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "galicode='" . $f[7]  . "'";

   return $trcbuf;
}


sub BFF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BFF: ";
   $trcbuf .= "apnr=" . ${$rtel}{"apnr"} . ", ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "schkz='" . ${$rtel}{"schkz"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "galicode='" . ${$rtel}{"galicode"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BKS                                            #
#############################################################

sub BKS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
}


sub BKS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
}


sub BKS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BKS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
}


sub BKS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BKS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
}


sub BKS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BKS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
}


sub BKS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BKS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
}


sub BKS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . "";

   return $trcbuf;
}


sub BKS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BKS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . "";

   return $trcbuf;
}


sub BKS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BKS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . "";

   return $trcbuf;
}


sub BKS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BKS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BE1                                            #
#############################################################

sub BE1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
}


sub BE1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
}


sub BE1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BE1";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
}


sub BE1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE1";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
}


sub BE1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE1";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
}


sub BE1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
}


sub BE1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . "";

   return $trcbuf;
}


sub BE1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE1: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . "";

   return $trcbuf;
}


sub BE1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BE1: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . "";

   return $trcbuf;
}


sub BE1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE1: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BE2                                            #
#############################################################

sub BE2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'status'} = substr(${$rbuf},16,1);
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},18,6));
   ${$rtel}{'name'} = substr(${$rbuf},25,15);
   ${$rtel}{'sorternr'} = sprintf("%d",substr(${$rbuf},41,1));
   ${$rtel}{'sorterrutsche'} = sprintf("%d",substr(${$rbuf},43,3));
   ${$rtel}{'rech_zeit'} = substr(${$rbuf},47,14);
}


sub BE2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'status'} = substr(${$rbuf},12,1);
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},13,6));
   ${$rtel}{'name'} = substr(${$rbuf},19,15);
   ${$rtel}{'sorternr'} = sprintf("%d",substr(${$rbuf},34,1));
   ${$rtel}{'sorterrutsche'} = sprintf("%d",substr(${$rbuf},35,3));
   ${$rtel}{'rech_zeit'} = substr(${$rbuf},38,14);
}


sub BE2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BE2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'status'} = $f[4];
   ${$rtel}{'persnr'} = sprintf("%d",$f[5]);
   ${$rtel}{'name'} = $f[6];
   ${$rtel}{'sorternr'} = sprintf("%d",$f[7]);
   ${$rtel}{'sorterrutsche'} = sprintf("%d",$f[8]);
   ${$rtel}{'rech_zeit'} = $f[9];
}


sub BE2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE2";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-15.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sorternr'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'sorterrutsche'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'rech_zeit'});
}


sub BE2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE2";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-15.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sorternr'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'sorterrutsche'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'rech_zeit'});
}


sub BE2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE2";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sorternr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sorterrutsche'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'rech_zeit'});
}


sub BE2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},16,1) . "', ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},18,6)) . ", ";
   $trcbuf .= "name='" . substr(${$rbuf},25,15) . "', ";
   $trcbuf .= "sorternr=" . sprintf("%d",substr(${$rbuf},41,1)) . ", ";
   $trcbuf .= "sorterrutsche=" . sprintf("%d",substr(${$rbuf},43,3)) . ", ";
   $trcbuf .= "rech_zeit='" . substr(${$rbuf},47,14) . "'";

   return $trcbuf;
}


sub BE2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},12,1) . "', ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},13,6)) . ", ";
   $trcbuf .= "name='" . substr(${$rbuf},19,15) . "', ";
   $trcbuf .= "sorternr=" . sprintf("%d",substr(${$rbuf},34,1)) . ", ";
   $trcbuf .= "sorterrutsche=" . sprintf("%d",substr(${$rbuf},35,3)) . ", ";
   $trcbuf .= "rech_zeit='" . substr(${$rbuf},38,14) . "'";

   return $trcbuf;
}


sub BE2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BE2: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "status='" . $f[4]  . "', ";
   $trcbuf .= "persnr=" . $f[5]  . ", ";
   $trcbuf .= "name='" . $f[6]  . "', ";
   $trcbuf .= "sorternr=" . $f[7]  . ", ";
   $trcbuf .= "sorterrutsche=" . $f[8]  . ", ";
   $trcbuf .= "rech_zeit='" . $f[9]  . "'";

   return $trcbuf;
}


sub BE2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE2: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "', ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "name='" . ${$rtel}{"name"} . "', ";
   $trcbuf .= "sorternr=" . ${$rtel}{"sorternr"} . ", ";
   $trcbuf .= "sorterrutsche=" . ${$rtel}{"sorterrutsche"} . ", ";
   $trcbuf .= "rech_zeit='" . ${$rtel}{"rech_zeit"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BE3                                            #
#############################################################

sub BE3_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE3";
   ${$rtel}{'leist_code'} = substr(${$rbuf},4,12);
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},17,6));
   ${$rtel}{'name'} = substr(${$rbuf},24,15);
   ${$rtel}{'bde_zeit'} = substr(${$rbuf},40,14);
}


sub BE3_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BE3";
   ${$rtel}{'leist_code'} = substr(${$rbuf},3,12);
   ${$rtel}{'persnr'} = sprintf("%d",substr(${$rbuf},15,6));
   ${$rtel}{'name'} = substr(${$rbuf},21,15);
   ${$rtel}{'bde_zeit'} = substr(${$rbuf},36,14);
}


sub BE3_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BE3";
   ${$rtel}{'leist_code'} = $f[1];
   ${$rtel}{'persnr'} = sprintf("%d",$f[2]);
   ${$rtel}{'name'} = $f[3];
   ${$rtel}{'bde_zeit'} = $f[4];
}


sub BE3_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE3";
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'leist_code'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf(" %-15.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'bde_zeit'});
}


sub BE3_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE3";
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'leist_code'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("%-15.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'bde_zeit'});
}


sub BE3_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BE3";
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'leist_code'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'persnr'});
   ${$rbuf} .= sprintf("\t%-.15s",${$rtel}{'name'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'bde_zeit'});
}


sub BE3_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE3: ";
   $trcbuf .= "leist_code='" . substr(${$rbuf},4,12) . "', ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},17,6)) . ", ";
   $trcbuf .= "name='" . substr(${$rbuf},24,15) . "', ";
   $trcbuf .= "bde_zeit='" . substr(${$rbuf},40,14) . "'";

   return $trcbuf;
}


sub BE3_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE3: ";
   $trcbuf .= "leist_code='" . substr(${$rbuf},3,12) . "', ";
   $trcbuf .= "persnr=" . sprintf("%d",substr(${$rbuf},15,6)) . ", ";
   $trcbuf .= "name='" . substr(${$rbuf},21,15) . "', ";
   $trcbuf .= "bde_zeit='" . substr(${$rbuf},36,14) . "'";

   return $trcbuf;
}


sub BE3_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BE3: ";
   $trcbuf .= "leist_code='" . $f[1]  . "', ";
   $trcbuf .= "persnr=" . $f[2]  . ", ";
   $trcbuf .= "name='" . $f[3]  . "', ";
   $trcbuf .= "bde_zeit='" . $f[4]  . "'";

   return $trcbuf;
}


sub BE3_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BE3: ";
   $trcbuf .= "leist_code='" . ${$rtel}{"leist_code"} . "', ";
   $trcbuf .= "persnr=" . ${$rtel}{"persnr"} . ", ";
   $trcbuf .= "name='" . ${$rtel}{"name"} . "', ";
   $trcbuf .= "bde_zeit='" . ${$rtel}{"bde_zeit"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm RPR                                            #
#############################################################

sub RPR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RPR";
   ${$rtel}{'path_filename'} = substr(${$rbuf},4,100);
}


sub RPR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RPR";
   ${$rtel}{'path_filename'} = substr(${$rbuf},3,100);
}


sub RPR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RPR";
   ${$rtel}{'path_filename'} = $f[1];
}


sub RPR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RPR";
   ${$rbuf} .= sprintf(" %-100.100s",${$rtel}{'path_filename'});
}


sub RPR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RPR";
   ${$rbuf} .= sprintf("%-100.100s",${$rtel}{'path_filename'});
}


sub RPR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RPR";
   ${$rbuf} .= sprintf("\t%-.100s",${$rtel}{'path_filename'});
}


sub RPR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RPR: ";
   $trcbuf .= "path_filename='" . substr(${$rbuf},4,100) . "'";

   return $trcbuf;
}


sub RPR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RPR: ";
   $trcbuf .= "path_filename='" . substr(${$rbuf},3,100) . "'";

   return $trcbuf;
}


sub RPR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RPR: ";
   $trcbuf .= "path_filename='" . $f[1]  . "'";

   return $trcbuf;
}


sub RPR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RPR: ";
   $trcbuf .= "path_filename='" . ${$rtel}{"path_filename"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm AVI                                            #
#############################################################

sub AVI_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AVI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'nn_betr'} = sprintf("%d",substr(${$rbuf},16,8));
   ${$rtel}{'identnrzw'} = substr(${$rbuf},25,14);
}


sub AVI_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AVI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'nn_betr'} = sprintf("%d",substr(${$rbuf},12,8));
   ${$rtel}{'identnrzw'} = substr(${$rbuf},20,14);
}


sub AVI_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AVI";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'nn_betr'} = sprintf("%d",$f[4]);
   ${$rtel}{'identnrzw'} = $f[5];
}


sub AVI_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AVI";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'nn_betr'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'identnrzw'});
}


sub AVI_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AVI";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'nn_betr'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'identnrzw'});
}


sub AVI_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AVI";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nn_betr'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'identnrzw'});
}


sub AVI_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AVI: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "nn_betr=" . sprintf("%d",substr(${$rbuf},16,8)) . ", ";
   $trcbuf .= "identnrzw='" . substr(${$rbuf},25,14) . "'";

   return $trcbuf;
}


sub AVI_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AVI: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "nn_betr=" . sprintf("%d",substr(${$rbuf},12,8)) . ", ";
   $trcbuf .= "identnrzw='" . substr(${$rbuf},20,14) . "'";

   return $trcbuf;
}


sub AVI_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AVI: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "nn_betr=" . $f[4]  . ", ";
   $trcbuf .= "identnrzw='" . $f[5]  . "'";

   return $trcbuf;
}


sub AVI_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AVI: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "nn_betr=" . ${$rtel}{"nn_betr"} . ", ";
   $trcbuf .= "identnrzw='" . ${$rtel}{"identnrzw"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm AEF                                            #
#############################################################

sub AEF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},19,8);
   ${$rtel}{'termin_kz'} = substr(${$rbuf},28,1);
}


sub AEF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},14,8);
   ${$rtel}{'termin_kz'} = substr(${$rbuf},22,1);
}


sub AEF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'la_ort'} = $f[5];
   ${$rtel}{'termin_kz'} = $f[6];
}


sub AEF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AEF";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'termin_kz'});
}


sub AEF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AEF";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'termin_kz'});
}


sub AEF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AEF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'termin_kz'});
}


sub AEF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AEF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},19,8) . "', ";
   $trcbuf .= "termin_kz='" . substr(${$rbuf},28,1) . "'";

   return $trcbuf;
}


sub AEF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AEF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},14,8) . "', ";
   $trcbuf .= "termin_kz='" . substr(${$rbuf},22,1) . "'";

   return $trcbuf;
}


sub AEF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AEF: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "la_ort='" . $f[5]  . "', ";
   $trcbuf .= "termin_kz='" . $f[6]  . "'";

   return $trcbuf;
}


sub AEF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AEF: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "termin_kz='" . ${$rtel}{"termin_kz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm LEF                                            #
#############################################################

sub LEF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},19,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},28,1);
}


sub LEF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},14,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},22,1);
}


sub LEF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LEF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'la_ort'} = $f[5];
   ${$rtel}{'raeum_stat'} = $f[6];
}


sub LEF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LEF";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'raeum_stat'});
}


sub LEF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LEF";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'raeum_stat'});
}


sub LEF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LEF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'raeum_stat'});
}


sub LEF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LEF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},19,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},28,1) . "'";

   return $trcbuf;
}


sub LEF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LEF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},14,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},22,1) . "'";

   return $trcbuf;
}


sub LEF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LEF: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "la_ort='" . $f[5]  . "', ";
   $trcbuf .= "raeum_stat='" . $f[6]  . "'";

   return $trcbuf;
}


sub LEF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LEF: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "raeum_stat='" . ${$rtel}{"raeum_stat"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ANF                                            #
#############################################################

sub ANF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},19,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},28,1);
}


sub ANF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'la_ort'} = substr(${$rbuf},14,8);
   ${$rtel}{'raeum_stat'} = substr(${$rbuf},22,1);
}


sub ANF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ANF";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'la_ort'} = $f[5];
   ${$rtel}{'raeum_stat'} = $f[6];
}


sub ANF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANF";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'raeum_stat'});
}


sub ANF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANF";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'raeum_stat'});
}


sub ANF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANF";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'raeum_stat'});
}


sub ANF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},19,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},28,1) . "'";

   return $trcbuf;
}


sub ANF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANF: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},14,8) . "', ";
   $trcbuf .= "raeum_stat='" . substr(${$rbuf},22,1) . "'";

   return $trcbuf;
}


sub ANF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ANF: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "la_ort='" . $f[5]  . "', ";
   $trcbuf .= "raeum_stat='" . $f[6]  . "'";

   return $trcbuf;
}


sub ANF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANF: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "raeum_stat='" . ${$rtel}{"raeum_stat"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ZSD                                            #
#############################################################

sub ZSD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ZSD";
   ${$rtel}{'wa_code'} = substr(${$rbuf},4,18);
   ${$rtel}{'bfirma'} = sprintf("%d",substr(${$rbuf},23,2));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},26,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},35,3);
   ${$rtel}{'art_menge'} = sprintf("%d",substr(${$rbuf},39,6));
   ${$rtel}{'la_ort'} = substr(${$rbuf},46,8);
   ${$rtel}{'datum'} = substr(${$rbuf},55,8);
   ${$rtel}{'kart_typ'} = substr(${$rbuf},64,2);
   ${$rtel}{'status'} = substr(${$rbuf},67,1);
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},69,3));
}


sub ZSD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ZSD";
   ${$rtel}{'wa_code'} = substr(${$rbuf},3,18);
   ${$rtel}{'bfirma'} = sprintf("%d",substr(${$rbuf},21,2));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},23,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},31,3);
   ${$rtel}{'art_menge'} = sprintf("%d",substr(${$rbuf},34,6));
   ${$rtel}{'la_ort'} = substr(${$rbuf},40,8);
   ${$rtel}{'datum'} = substr(${$rbuf},48,8);
   ${$rtel}{'kart_typ'} = substr(${$rbuf},56,2);
   ${$rtel}{'status'} = substr(${$rbuf},58,1);
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},59,3));
}


sub ZSD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ZSD";
   ${$rtel}{'wa_code'} = $f[1];
   ${$rtel}{'bfirma'} = sprintf("%d",$f[2]);
   ${$rtel}{'art_num'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_gr'} = $f[4];
   ${$rtel}{'art_menge'} = sprintf("%d",$f[5]);
   ${$rtel}{'la_ort'} = $f[6];
   ${$rtel}{'datum'} = $f[7];
   ${$rtel}{'kart_typ'} = $f[8];
   ${$rtel}{'status'} = $f[9];
   ${$rtel}{'richtung'} = sprintf("%d",$f[10]);
}


sub ZSD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZSD";
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'wa_code'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'kart_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
}


sub ZSD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZSD";
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'wa_code'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'kart_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
}


sub ZSD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ZSD";
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'wa_code'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'datum'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'kart_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
}


sub ZSD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZSD: ";
   $trcbuf .= "wa_code='" . substr(${$rbuf},4,18) . "', ";
   $trcbuf .= "bfirma=" . sprintf("%d",substr(${$rbuf},23,2)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},26,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},35,3) . "', ";
   $trcbuf .= "art_menge=" . sprintf("%d",substr(${$rbuf},39,6)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},46,8) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},55,8) . "', ";
   $trcbuf .= "kart_typ='" . substr(${$rbuf},64,2) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},67,1) . "', ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},69,3)) . "";

   return $trcbuf;
}


sub ZSD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZSD: ";
   $trcbuf .= "wa_code='" . substr(${$rbuf},3,18) . "', ";
   $trcbuf .= "bfirma=" . sprintf("%d",substr(${$rbuf},21,2)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},23,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},31,3) . "', ";
   $trcbuf .= "art_menge=" . sprintf("%d",substr(${$rbuf},34,6)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},40,8) . "', ";
   $trcbuf .= "datum='" . substr(${$rbuf},48,8) . "', ";
   $trcbuf .= "kart_typ='" . substr(${$rbuf},56,2) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},58,1) . "', ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},59,3)) . "";

   return $trcbuf;
}


sub ZSD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ZSD: ";
   $trcbuf .= "wa_code='" . $f[1]  . "', ";
   $trcbuf .= "bfirma=" . $f[2]  . ", ";
   $trcbuf .= "art_num=" . $f[3]  . ", ";
   $trcbuf .= "art_gr='" . $f[4]  . "', ";
   $trcbuf .= "art_menge=" . $f[5]  . ", ";
   $trcbuf .= "la_ort='" . $f[6]  . "', ";
   $trcbuf .= "datum='" . $f[7]  . "', ";
   $trcbuf .= "kart_typ='" . $f[8]  . "', ";
   $trcbuf .= "status='" . $f[9]  . "', ";
   $trcbuf .= "richtung=" . $f[10]  . "";

   return $trcbuf;
}


sub ZSD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ZSD: ";
   $trcbuf .= "wa_code='" . ${$rtel}{"wa_code"} . "', ";
   $trcbuf .= "bfirma=" . ${$rtel}{"bfirma"} . ", ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "art_menge=" . ${$rtel}{"art_menge"} . ", ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "datum='" . ${$rtel}{"datum"} . "', ";
   $trcbuf .= "kart_typ='" . ${$rtel}{"kart_typ"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "', ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm MSA                                            #
#############################################################

sub MSA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "MSA";
   ${$rtel}{'kto'} = substr(${$rbuf},4,10);
   ${$rtel}{'kfirma'} = substr(${$rbuf},15,2);
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},18,8));
   ${$rtel}{'art_prom'} = substr(${$rbuf},27,3);
   ${$rtel}{'art_gr'} = substr(${$rbuf},31,3);
   ${$rtel}{'art_menge'} = sprintf("%d",substr(${$rbuf},35,6));
   ${$rtel}{'rech_datum'} = substr(${$rbuf},42,8);
   ${$rtel}{'ret_key'} = substr(${$rbuf},51,12);
}


sub MSA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "MSA";
   ${$rtel}{'kto'} = substr(${$rbuf},3,10);
   ${$rtel}{'kfirma'} = substr(${$rbuf},13,2);
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},15,8));
   ${$rtel}{'art_prom'} = substr(${$rbuf},23,3);
   ${$rtel}{'art_gr'} = substr(${$rbuf},26,3);
   ${$rtel}{'art_menge'} = sprintf("%d",substr(${$rbuf},29,6));
   ${$rtel}{'rech_datum'} = substr(${$rbuf},35,8);
   ${$rtel}{'ret_key'} = substr(${$rbuf},43,12);
}


sub MSA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "MSA";
   ${$rtel}{'kto'} = $f[1];
   ${$rtel}{'kfirma'} = $f[2];
   ${$rtel}{'art_num'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_prom'} = $f[4];
   ${$rtel}{'art_gr'} = $f[5];
   ${$rtel}{'art_menge'} = sprintf("%d",$f[6]);
   ${$rtel}{'rech_datum'} = $f[7];
   ${$rtel}{'ret_key'} = $f[8];
}


sub MSA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "MSA";
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'kto'});
   ${$rbuf} .= sprintf(" %-2.2s",${$rtel}{'kfirma'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_prom'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'rech_datum'});
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'ret_key'});
}


sub MSA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "MSA";
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'kto'});
   ${$rbuf} .= sprintf("%-2.2s",${$rtel}{'kfirma'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_prom'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'rech_datum'});
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'ret_key'});
}


sub MSA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "MSA";
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'kto'});
   ${$rbuf} .= sprintf("\t%-.2s",${$rtel}{'kfirma'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_prom'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_menge'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'rech_datum'});
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'ret_key'});
}


sub MSA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm MSA: ";
   $trcbuf .= "kto='" . substr(${$rbuf},4,10) . "', ";
   $trcbuf .= "kfirma='" . substr(${$rbuf},15,2) . "', ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},18,8)) . ", ";
   $trcbuf .= "art_prom='" . substr(${$rbuf},27,3) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},31,3) . "', ";
   $trcbuf .= "art_menge=" . sprintf("%d",substr(${$rbuf},35,6)) . ", ";
   $trcbuf .= "rech_datum='" . substr(${$rbuf},42,8) . "', ";
   $trcbuf .= "ret_key='" . substr(${$rbuf},51,12) . "'";

   return $trcbuf;
}


sub MSA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm MSA: ";
   $trcbuf .= "kto='" . substr(${$rbuf},3,10) . "', ";
   $trcbuf .= "kfirma='" . substr(${$rbuf},13,2) . "', ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},15,8)) . ", ";
   $trcbuf .= "art_prom='" . substr(${$rbuf},23,3) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},26,3) . "', ";
   $trcbuf .= "art_menge=" . sprintf("%d",substr(${$rbuf},29,6)) . ", ";
   $trcbuf .= "rech_datum='" . substr(${$rbuf},35,8) . "', ";
   $trcbuf .= "ret_key='" . substr(${$rbuf},43,12) . "'";

   return $trcbuf;
}


sub MSA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm MSA: ";
   $trcbuf .= "kto='" . $f[1]  . "', ";
   $trcbuf .= "kfirma='" . $f[2]  . "', ";
   $trcbuf .= "art_num=" . $f[3]  . ", ";
   $trcbuf .= "art_prom='" . $f[4]  . "', ";
   $trcbuf .= "art_gr='" . $f[5]  . "', ";
   $trcbuf .= "art_menge=" . $f[6]  . ", ";
   $trcbuf .= "rech_datum='" . $f[7]  . "', ";
   $trcbuf .= "ret_key='" . $f[8]  . "'";

   return $trcbuf;
}


sub MSA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm MSA: ";
   $trcbuf .= "kto='" . ${$rtel}{"kto"} . "', ";
   $trcbuf .= "kfirma='" . ${$rtel}{"kfirma"} . "', ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_prom='" . ${$rtel}{"art_prom"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "art_menge=" . ${$rtel}{"art_menge"} . ", ";
   $trcbuf .= "rech_datum='" . ${$rtel}{"rech_datum"} . "', ";
   $trcbuf .= "ret_key='" . ${$rtel}{"ret_key"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm LDF                                            #
#############################################################

sub LDF_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LDF";
   ${$rtel}{'identcode'} = substr(${$rbuf},4,30);
   ${$rtel}{'bfirma'} = sprintf("%d",substr(${$rbuf},35,2));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},38,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},47,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},51,4));
   ${$rtel}{'kundenart'} = sprintf("%d",substr(${$rbuf},56,2));
}


sub LDF_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LDF";
   ${$rtel}{'identcode'} = substr(${$rbuf},3,30);
   ${$rtel}{'bfirma'} = sprintf("%d",substr(${$rbuf},33,2));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},35,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},43,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},46,4));
   ${$rtel}{'kundenart'} = sprintf("%d",substr(${$rbuf},50,2));
}


sub LDF_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LDF";
   ${$rtel}{'identcode'} = $f[1];
   ${$rtel}{'bfirma'} = sprintf("%d",$f[2]);
   ${$rtel}{'art_num'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_gr'} = $f[4];
   ${$rtel}{'menge4'} = sprintf("%d",$f[5]);
   ${$rtel}{'kundenart'} = sprintf("%d",$f[6]);
}


sub LDF_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LDF";
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'kundenart'});
}


sub LDF_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LDF";
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'kundenart'});
}


sub LDF_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LDF";
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'identcode'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bfirma'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kundenart'});
}


sub LDF_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LDF: ";
   $trcbuf .= "identcode='" . substr(${$rbuf},4,30) . "', ";
   $trcbuf .= "bfirma=" . sprintf("%d",substr(${$rbuf},35,2)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},38,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},47,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},51,4)) . ", ";
   $trcbuf .= "kundenart=" . sprintf("%d",substr(${$rbuf},56,2)) . "";

   return $trcbuf;
}


sub LDF_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LDF: ";
   $trcbuf .= "identcode='" . substr(${$rbuf},3,30) . "', ";
   $trcbuf .= "bfirma=" . sprintf("%d",substr(${$rbuf},33,2)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},35,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},43,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},46,4)) . ", ";
   $trcbuf .= "kundenart=" . sprintf("%d",substr(${$rbuf},50,2)) . "";

   return $trcbuf;
}


sub LDF_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LDF: ";
   $trcbuf .= "identcode='" . $f[1]  . "', ";
   $trcbuf .= "bfirma=" . $f[2]  . ", ";
   $trcbuf .= "art_num=" . $f[3]  . ", ";
   $trcbuf .= "art_gr='" . $f[4]  . "', ";
   $trcbuf .= "menge4=" . $f[5]  . ", ";
   $trcbuf .= "kundenart=" . $f[6]  . "";

   return $trcbuf;
}


sub LDF_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LDF: ";
   $trcbuf .= "identcode='" . ${$rtel}{"identcode"} . "', ";
   $trcbuf .= "bfirma=" . ${$rtel}{"bfirma"} . ", ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "menge4=" . ${$rtel}{"menge4"} . ", ";
   $trcbuf .= "kundenart=" . ${$rtel}{"kundenart"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm HIS                                            #
#############################################################

sub HIS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "HIS";
   ${$rtel}{'dat7_pos'} = sprintf("%d",substr(${$rbuf},4,9));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},14,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},23,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},27,4));
   ${$rtel}{'kundenart'} = sprintf("%d",substr(${$rbuf},32,2));
}


sub HIS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "HIS";
   ${$rtel}{'dat7_pos'} = sprintf("%d",substr(${$rbuf},3,9));
   ${$rtel}{'art_num'} = sprintf("%d",substr(${$rbuf},12,8));
   ${$rtel}{'art_gr'} = substr(${$rbuf},20,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'kundenart'} = sprintf("%d",substr(${$rbuf},27,2));
}


sub HIS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "HIS";
   ${$rtel}{'dat7_pos'} = sprintf("%d",$f[1]);
   ${$rtel}{'art_num'} = sprintf("%d",$f[2]);
   ${$rtel}{'art_gr'} = $f[3];
   ${$rtel}{'menge4'} = sprintf("%d",$f[4]);
   ${$rtel}{'kundenart'} = sprintf("%d",$f[5]);
}


sub HIS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "HIS";
   ${$rbuf} .= sprintf(" %09d",${$rtel}{'dat7_pos'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'kundenart'});
}


sub HIS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "HIS";
   ${$rbuf} .= sprintf("%09d",${$rtel}{'dat7_pos'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'kundenart'});
}


sub HIS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "HIS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'dat7_pos'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_num'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge4'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kundenart'});
}


sub HIS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm HIS: ";
   $trcbuf .= "dat7_pos=" . sprintf("%d",substr(${$rbuf},4,9)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},14,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},23,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},27,4)) . ", ";
   $trcbuf .= "kundenart=" . sprintf("%d",substr(${$rbuf},32,2)) . "";

   return $trcbuf;
}


sub HIS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm HIS: ";
   $trcbuf .= "dat7_pos=" . sprintf("%d",substr(${$rbuf},3,9)) . ", ";
   $trcbuf .= "art_num=" . sprintf("%d",substr(${$rbuf},12,8)) . ", ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},20,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "kundenart=" . sprintf("%d",substr(${$rbuf},27,2)) . "";

   return $trcbuf;
}


sub HIS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm HIS: ";
   $trcbuf .= "dat7_pos=" . $f[1]  . ", ";
   $trcbuf .= "art_num=" . $f[2]  . ", ";
   $trcbuf .= "art_gr='" . $f[3]  . "', ";
   $trcbuf .= "menge4=" . $f[4]  . ", ";
   $trcbuf .= "kundenart=" . $f[5]  . "";

   return $trcbuf;
}


sub HIS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm HIS: ";
   $trcbuf .= "dat7_pos=" . ${$rtel}{"dat7_pos"} . ", ";
   $trcbuf .= "art_num=" . ${$rtel}{"art_num"} . ", ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "menge4=" . ${$rtel}{"menge4"} . ", ";
   $trcbuf .= "kundenart=" . ${$rtel}{"kundenart"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm FGP                                            #
#############################################################

sub FGP_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGP";
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},4,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'druckfilename'} = substr(${$rbuf},8,20);
}


sub FGP_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGP";
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},3,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},4,1));
   ${$rtel}{'druckfilename'} = substr(${$rbuf},5,20);
}


sub FGP_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FGP";
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",$f[1]);
   ${$rtel}{'fgali_etage'} = sprintf("%d",$f[2]);
   ${$rtel}{'druckfilename'} = $f[3];
}


sub FGP_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGP";
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf(" %-20.20s",${$rtel}{'druckfilename'});
}


sub FGP_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGP";
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("%-20.20s",${$rtel}{'druckfilename'});
}


sub FGP_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGP";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("\t%-.20s",${$rtel}{'druckfilename'});
}


sub FGP_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGP: ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},4,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "druckfilename='" . substr(${$rbuf},8,20) . "'";

   return $trcbuf;
}


sub FGP_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGP: ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},3,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},4,1)) . ", ";
   $trcbuf .= "druckfilename='" . substr(${$rbuf},5,20) . "'";

   return $trcbuf;
}


sub FGP_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FGP: ";
   $trcbuf .= "fgali_lagerhaelfte=" . $f[1]  . ", ";
   $trcbuf .= "fgali_etage=" . $f[2]  . ", ";
   $trcbuf .= "druckfilename='" . $f[3]  . "'";

   return $trcbuf;
}


sub FGP_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGP: ";
   $trcbuf .= "fgali_lagerhaelfte=" . ${$rtel}{"fgali_lagerhaelfte"} . ", ";
   $trcbuf .= "fgali_etage=" . ${$rtel}{"fgali_etage"} . ", ";
   $trcbuf .= "druckfilename='" . ${$rtel}{"druckfilename"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FGA                                            #
#############################################################

sub FGA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGA";
   ${$rtel}{'industrietag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'nummer'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},13,1));
   ${$rtel}{'filename'} = substr(${$rbuf},15,14);
   ${$rtel}{'galityp'} = substr(${$rbuf},30,1);
}


sub FGA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGA";
   ${$rtel}{'industrietag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'nummer'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},9,1));
   ${$rtel}{'filename'} = substr(${$rbuf},10,14);
   ${$rtel}{'galityp'} = substr(${$rbuf},24,1);
}


sub FGA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FGA";
   ${$rtel}{'industrietag'} = sprintf("%d",$f[1]);
   ${$rtel}{'nummer'} = sprintf("%d",$f[2]);
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",$f[3]);
   ${$rtel}{'fgali_etage'} = sprintf("%d",$f[4]);
   ${$rtel}{'filename'} = $f[5];
   ${$rtel}{'galityp'} = $f[6];
}


sub FGA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGA";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'galityp'});
}


sub FGA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGA";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'galityp'});
}


sub FGA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'galityp'});
}


sub FGA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGA: ";
   $trcbuf .= "industrietag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "nummer=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},13,1)) . ", ";
   $trcbuf .= "filename='" . substr(${$rbuf},15,14) . "', ";
   $trcbuf .= "galityp='" . substr(${$rbuf},30,1) . "'";

   return $trcbuf;
}


sub FGA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGA: ";
   $trcbuf .= "industrietag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "nummer=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},9,1)) . ", ";
   $trcbuf .= "filename='" . substr(${$rbuf},10,14) . "', ";
   $trcbuf .= "galityp='" . substr(${$rbuf},24,1) . "'";

   return $trcbuf;
}


sub FGA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FGA: ";
   $trcbuf .= "industrietag=" . $f[1]  . ", ";
   $trcbuf .= "nummer=" . $f[2]  . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . $f[3]  . ", ";
   $trcbuf .= "fgali_etage=" . $f[4]  . ", ";
   $trcbuf .= "filename='" . $f[5]  . "', ";
   $trcbuf .= "galityp='" . $f[6]  . "'";

   return $trcbuf;
}


sub FGA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGA: ";
   $trcbuf .= "industrietag=" . ${$rtel}{"industrietag"} . ", ";
   $trcbuf .= "nummer=" . ${$rtel}{"nummer"} . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . ${$rtel}{"fgali_lagerhaelfte"} . ", ";
   $trcbuf .= "fgali_etage=" . ${$rtel}{"fgali_etage"} . ", ";
   $trcbuf .= "filename='" . ${$rtel}{"filename"} . "', ";
   $trcbuf .= "galityp='" . ${$rtel}{"galityp"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm FGR                                            #
#############################################################

sub FGR_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGR";
   ${$rtel}{'industrietag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'nummer'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},13,1));
   ${$rtel}{'filename'} = substr(${$rbuf},15,14);
   ${$rtel}{'galityp'} = substr(${$rbuf},30,1);
}


sub FGR_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "FGR";
   ${$rtel}{'industrietag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'nummer'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'fgali_etage'} = sprintf("%d",substr(${$rbuf},9,1));
   ${$rtel}{'filename'} = substr(${$rbuf},10,14);
   ${$rtel}{'galityp'} = substr(${$rbuf},24,1);
}


sub FGR_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "FGR";
   ${$rtel}{'industrietag'} = sprintf("%d",$f[1]);
   ${$rtel}{'nummer'} = sprintf("%d",$f[2]);
   ${$rtel}{'fgali_lagerhaelfte'} = sprintf("%d",$f[3]);
   ${$rtel}{'fgali_etage'} = sprintf("%d",$f[4]);
   ${$rtel}{'filename'} = $f[5];
   ${$rtel}{'galityp'} = $f[6];
}


sub FGR_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGR";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf(" %-1.1s",${$rtel}{'galityp'});
}


sub FGR_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGR";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf("%-1.1s",${$rtel}{'galityp'});
}


sub FGR_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "FGR";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'industrietag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'nummer'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_lagerhaelfte'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'fgali_etage'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'filename'});
   ${$rbuf} .= sprintf("\t%-.1s",${$rtel}{'galityp'});
}


sub FGR_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGR: ";
   $trcbuf .= "industrietag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "nummer=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},13,1)) . ", ";
   $trcbuf .= "filename='" . substr(${$rbuf},15,14) . "', ";
   $trcbuf .= "galityp='" . substr(${$rbuf},30,1) . "'";

   return $trcbuf;
}


sub FGR_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGR: ";
   $trcbuf .= "industrietag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "nummer=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "fgali_etage=" . sprintf("%d",substr(${$rbuf},9,1)) . ", ";
   $trcbuf .= "filename='" . substr(${$rbuf},10,14) . "', ";
   $trcbuf .= "galityp='" . substr(${$rbuf},24,1) . "'";

   return $trcbuf;
}


sub FGR_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm FGR: ";
   $trcbuf .= "industrietag=" . $f[1]  . ", ";
   $trcbuf .= "nummer=" . $f[2]  . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . $f[3]  . ", ";
   $trcbuf .= "fgali_etage=" . $f[4]  . ", ";
   $trcbuf .= "filename='" . $f[5]  . "', ";
   $trcbuf .= "galityp='" . $f[6]  . "'";

   return $trcbuf;
}


sub FGR_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm FGR: ";
   $trcbuf .= "industrietag=" . ${$rtel}{"industrietag"} . ", ";
   $trcbuf .= "nummer=" . ${$rtel}{"nummer"} . ", ";
   $trcbuf .= "fgali_lagerhaelfte=" . ${$rtel}{"fgali_lagerhaelfte"} . ", ";
   $trcbuf .= "fgali_etage=" . ${$rtel}{"fgali_etage"} . ", ";
   $trcbuf .= "filename='" . ${$rtel}{"filename"} . "', ";
   $trcbuf .= "galityp='" . ${$rtel}{"galityp"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm BAK                                            #
#############################################################

sub BAK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},13,4));
   ${$rtel}{'anz_art_ist_pb'} = sprintf("%d",substr(${$rbuf},18,6));
}


sub BAK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BAK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'anz_art_ist_pb'} = sprintf("%d",substr(${$rbuf},13,6));
}


sub BAK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BAK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_art_ist_pb'} = sprintf("%d",$f[5]);
}


sub BAK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAK";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_art_ist_pb'});
}


sub BAK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAK";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_art_ist_pb'});
}


sub BAK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BAK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art_ist_pb'});
}


sub BAK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},13,4)) . ", ";
   $trcbuf .= "anz_art_ist_pb=" . sprintf("%d",substr(${$rbuf},18,6)) . "";

   return $trcbuf;
}


sub BAK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "anz_art_ist_pb=" . sprintf("%d",substr(${$rbuf},13,6)) . "";

   return $trcbuf;
}


sub BAK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BAK: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen_ist=" . $f[4]  . ", ";
   $trcbuf .= "anz_art_ist_pb=" . $f[5]  . "";

   return $trcbuf;
}


sub BAK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BAK: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "anz_sen_ist=" . ${$rtel}{"anz_sen_ist"} . ", ";
   $trcbuf .= "anz_art_ist_pb=" . ${$rtel}{"anz_art_ist_pb"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SAK                                            #
#############################################################

sub SAK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAK";
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},9,5);
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",substr(${$rbuf},15,2));
   ${$rtel}{'pz_sor'} = sprintf("%d",substr(${$rbuf},18,4));
   ${$rtel}{'sta_sen'} = substr(${$rbuf},23,1);
   ${$rtel}{'vol_kz'} = sprintf("%d",substr(${$rbuf},25,1));
   ${$rtel}{'spp_flag'} = substr(${$rbuf},27,1);
   ${$rtel}{'pz_sor_grv'} = sprintf("%d",substr(${$rbuf},29,4));
   ${$rtel}{'pz_sor_beu'} = sprintf("%d",substr(${$rbuf},34,4));
}


sub SAK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SAK";
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},7,5);
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'pz_sor'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'sta_sen'} = substr(${$rbuf},18,1);
   ${$rtel}{'vol_kz'} = sprintf("%d",substr(${$rbuf},19,1));
   ${$rtel}{'spp_flag'} = substr(${$rbuf},20,1);
   ${$rtel}{'pz_sor_grv'} = sprintf("%d",substr(${$rbuf},21,4));
   ${$rtel}{'pz_sor_beu'} = sprintf("%d",substr(${$rbuf},25,4));
}


sub SAK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SAK";
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'sen_typ'} = $f[2];
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",$f[3]);
   ${$rtel}{'pz_sor'} = sprintf("%d",$f[4]);
   ${$rtel}{'sta_sen'} = $f[5];
   ${$rtel}{'vol_kz'} = sprintf("%d",$f[6]);
   ${$rtel}{'spp_flag'} = $f[7];
   ${$rtel}{'pz_sor_grv'} = sprintf("%d",$f[8]);
   ${$rtel}{'pz_sor_beu'} = sprintf("%d",$f[9]);
}


sub SAK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAK";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_art_ist_ps'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'pz_sor'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sta_sen'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'vol_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'pz_sor_grv'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'pz_sor_beu'});
}


sub SAK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAK";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_art_ist_ps'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'pz_sor'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sta_sen'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'vol_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'pz_sor_grv'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'pz_sor_beu'});
}


sub SAK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SAK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art_ist_ps'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'pz_sor'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sta_sen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'vol_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'pz_sor_grv'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'pz_sor_beu'});
}


sub SAK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAK: ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},9,5) . "', ";
   $trcbuf .= "anz_art_ist_ps=" . sprintf("%d",substr(${$rbuf},15,2)) . ", ";
   $trcbuf .= "pz_sor=" . sprintf("%d",substr(${$rbuf},18,4)) . ", ";
   $trcbuf .= "sta_sen='" . substr(${$rbuf},23,1) . "', ";
   $trcbuf .= "vol_kz=" . sprintf("%d",substr(${$rbuf},25,1)) . ", ";
   $trcbuf .= "spp_flag='" . substr(${$rbuf},27,1) . "', ";
   $trcbuf .= "pz_sor_grv=" . sprintf("%d",substr(${$rbuf},29,4)) . ", ";
   $trcbuf .= "pz_sor_beu=" . sprintf("%d",substr(${$rbuf},34,4)) . "";

   return $trcbuf;
}


sub SAK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAK: ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},7,5) . "', ";
   $trcbuf .= "anz_art_ist_ps=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "pz_sor=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "sta_sen='" . substr(${$rbuf},18,1) . "', ";
   $trcbuf .= "vol_kz=" . sprintf("%d",substr(${$rbuf},19,1)) . ", ";
   $trcbuf .= "spp_flag='" . substr(${$rbuf},20,1) . "', ";
   $trcbuf .= "pz_sor_grv=" . sprintf("%d",substr(${$rbuf},21,4)) . ", ";
   $trcbuf .= "pz_sor_beu=" . sprintf("%d",substr(${$rbuf},25,4)) . "";

   return $trcbuf;
}


sub SAK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SAK: ";
   $trcbuf .= "sen_nr=" . $f[1]  . ", ";
   $trcbuf .= "sen_typ='" . $f[2]  . "', ";
   $trcbuf .= "anz_art_ist_ps=" . $f[3]  . ", ";
   $trcbuf .= "pz_sor=" . $f[4]  . ", ";
   $trcbuf .= "sta_sen='" . $f[5]  . "', ";
   $trcbuf .= "vol_kz=" . $f[6]  . ", ";
   $trcbuf .= "spp_flag='" . $f[7]  . "', ";
   $trcbuf .= "pz_sor_grv=" . $f[8]  . ", ";
   $trcbuf .= "pz_sor_beu=" . $f[9]  . "";

   return $trcbuf;
}


sub SAK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SAK: ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "sen_typ='" . ${$rtel}{"sen_typ"} . "', ";
   $trcbuf .= "anz_art_ist_ps=" . ${$rtel}{"anz_art_ist_ps"} . ", ";
   $trcbuf .= "pz_sor=" . ${$rtel}{"pz_sor"} . ", ";
   $trcbuf .= "sta_sen='" . ${$rtel}{"sta_sen"} . "', ";
   $trcbuf .= "vol_kz=" . ${$rtel}{"vol_kz"} . ", ";
   $trcbuf .= "spp_flag='" . ${$rtel}{"spp_flag"} . "', ";
   $trcbuf .= "pz_sor_grv=" . ${$rtel}{"pz_sor_grv"} . ", ";
   $trcbuf .= "pz_sor_beu=" . ${$rtel}{"pz_sor_beu"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm TFB                                            #
#############################################################

sub TFB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},13,4));
}


sub TFB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub TFB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "TFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",$f[4]);
}


sub TFB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFB";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen_ist'});
}


sub TFB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFB";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen_ist'});
}


sub TFB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen_ist'});
}


sub TFB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},13,4)) . "";

   return $trcbuf;
}


sub TFB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub TFB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm TFB: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "anz_sen_ist=" . $f[4]  . "";

   return $trcbuf;
}


sub TFB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFB: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "anz_sen_ist=" . ${$rtel}{"anz_sen_ist"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm TFS                                            #
#############################################################

sub TFS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFS";
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",substr(${$rbuf},9,2));
}


sub TFS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFS";
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",substr(${$rbuf},7,2));
}


sub TFS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "TFS";
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'anz_art_ist_ps'} = sprintf("%d",$f[2]);
}


sub TFS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFS";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'anz_art_ist_ps'});
}


sub TFS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFS";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'anz_art_ist_ps'});
}


sub TFS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_art_ist_ps'});
}


sub TFS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFS: ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "anz_art_ist_ps=" . sprintf("%d",substr(${$rbuf},9,2)) . "";

   return $trcbuf;
}


sub TFS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFS: ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "anz_art_ist_ps=" . sprintf("%d",substr(${$rbuf},7,2)) . "";

   return $trcbuf;
}


sub TFS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm TFS: ";
   $trcbuf .= "sen_nr=" . $f[1]  . ", ";
   $trcbuf .= "anz_art_ist_ps=" . $f[2]  . "";

   return $trcbuf;
}


sub TFS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFS: ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "anz_art_ist_ps=" . ${$rtel}{"anz_art_ist_ps"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm TFP                                            #
#############################################################

sub TFP_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFP";
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},4,2));
}


sub TFP_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TFP";
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},3,2));
}


sub TFP_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "TFP";
   ${$rtel}{'art_za'} = sprintf("%d",$f[1]);
}


sub TFP_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFP";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
}


sub TFP_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFP";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
}


sub TFP_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TFP";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
}


sub TFP_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFP: ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},4,2)) . "";

   return $trcbuf;
}


sub TFP_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFP: ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},3,2)) . "";

   return $trcbuf;
}


sub TFP_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm TFP: ";
   $trcbuf .= "art_za=" . $f[1]  . "";

   return $trcbuf;
}


sub TFP_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TFP: ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm KFB                                            #
#############################################################

sub KFB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},11,1));
}


sub KFB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub KFB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KFB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[3]);
}


sub KFB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KFB";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
}


sub KFB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KFB";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
}


sub KFB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KFB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
}


sub KFB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},11,1)) . "";

   return $trcbuf;
}


sub KFB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KFB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub KFB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KFB: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[3]  . "";

   return $trcbuf;
}


sub KFB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KFB: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm LF1                                            #
#############################################################

sub LF1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LF1";
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},4,2));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'la_ort'} = substr(${$rbuf},11,8);
   ${$rtel}{'art_nr'} = substr(${$rbuf},20,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},35,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},39,4));
}


sub LF1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LF1";
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},3,2));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},5,3));
   ${$rtel}{'la_ort'} = substr(${$rbuf},8,8);
   ${$rtel}{'art_nr'} = substr(${$rbuf},16,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},30,3);
   ${$rtel}{'menge4'} = sprintf("%d",substr(${$rbuf},33,4));
}


sub LF1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LF1";
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[1]);
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'la_ort'} = $f[3];
   ${$rtel}{'art_nr'} = $f[4];
   ${$rtel}{'art_gr'} = $f[5];
   ${$rtel}{'menge4'} = sprintf("%d",$f[6]);
}


sub LF1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF1";
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'menge4'});
}


sub LF1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF1";
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'menge4'});
}


sub LF1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF1";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'la_ort'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'menge4'});
}


sub LF1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF1: ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},4,2)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},11,8) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},20,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},35,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},39,4)) . "";

   return $trcbuf;
}


sub LF1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF1: ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},3,2)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},5,3)) . ", ";
   $trcbuf .= "la_ort='" . substr(${$rbuf},8,8) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},16,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},30,3) . "', ";
   $trcbuf .= "menge4=" . sprintf("%d",substr(${$rbuf},33,4)) . "";

   return $trcbuf;
}


sub LF1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LF1: ";
   $trcbuf .= "bat_nr=" . $f[1]  . ", ";
   $trcbuf .= "lfd_tag=" . $f[2]  . ", ";
   $trcbuf .= "la_ort='" . $f[3]  . "', ";
   $trcbuf .= "art_nr='" . $f[4]  . "', ";
   $trcbuf .= "art_gr='" . $f[5]  . "', ";
   $trcbuf .= "menge4=" . $f[6]  . "";

   return $trcbuf;
}


sub LF1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF1: ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "la_ort='" . ${$rtel}{"la_ort"} . "', ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "menge4=" . ${$rtel}{"menge4"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SNL                                            #
#############################################################

sub SNL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SNL";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},4,4));
   ${$rtel}{'aplatz'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},12,6));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},19,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},21,1);
   ${$rtel}{'errtxt'} = substr(${$rbuf},23,80);
}


sub SNL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SNL";
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},3,4));
   ${$rtel}{'aplatz'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},9,6));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},15,1);
   ${$rtel}{'druck_typ'} = substr(${$rbuf},16,1);
   ${$rtel}{'errtxt'} = substr(${$rbuf},17,80);
}


sub SNL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SNL";
   ${$rtel}{'rutsche'} = sprintf("%d",$f[1]);
   ${$rtel}{'aplatz'} = sprintf("%d",$f[2]);
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[3]);
   ${$rtel}{'flag_druck'} = $f[4];
   ${$rtel}{'druck_typ'} = $f[5];
   ${$rtel}{'errtxt'} = $f[6];
}


sub SNL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNL";
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf(" %-80.80s",${$rtel}{'errtxt'});
}


sub SNL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNL";
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("%-80.80s",${$rtel}{'errtxt'});
}


sub SNL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SNL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_druck'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'druck_typ'});
   ${$rbuf} .= sprintf("\t%-.80s",${$rtel}{'errtxt'});
}


sub SNL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNL: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},4,4)) . ", ";
   $trcbuf .= "aplatz=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},12,6)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},21,1) . "', ";
   $trcbuf .= "errtxt='" . substr(${$rbuf},23,80) . "'";

   return $trcbuf;
}


sub SNL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNL: ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},3,4)) . ", ";
   $trcbuf .= "aplatz=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},9,6)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},15,1) . "', ";
   $trcbuf .= "druck_typ='" . substr(${$rbuf},16,1) . "', ";
   $trcbuf .= "errtxt='" . substr(${$rbuf},17,80) . "'";

   return $trcbuf;
}


sub SNL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SNL: ";
   $trcbuf .= "rutsche=" . $f[1]  . ", ";
   $trcbuf .= "aplatz=" . $f[2]  . ", ";
   $trcbuf .= "wannen_id=" . $f[3]  . ", ";
   $trcbuf .= "flag_druck='" . $f[4]  . "', ";
   $trcbuf .= "druck_typ='" . $f[5]  . "', ";
   $trcbuf .= "errtxt='" . $f[6]  . "'";

   return $trcbuf;
}


sub SNL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SNL: ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "aplatz=" . ${$rtel}{"aplatz"} . ", ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "flag_druck='" . ${$rtel}{"flag_druck"} . "', ";
   $trcbuf .= "druck_typ='" . ${$rtel}{"druck_typ"} . "', ";
   $trcbuf .= "errtxt='" . ${$rtel}{"errtxt"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ARL                                            #
#############################################################

sub ARL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},11,4));
}


sub ARL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub ARL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ARL";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[2]);
}


sub ARL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
}


sub ARL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
}


sub ARL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
}


sub ARL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},11,4)) . "";

   return $trcbuf;
}


sub ARL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub ARL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ARL: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "rutsche=" . $f[2]  . "";

   return $trcbuf;
}


sub ARL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARL: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm ARN                                            #
#############################################################

sub ARN_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARN";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},16,5);
   ${$rtel}{'lo_fst'} = substr(${$rbuf},22,7);
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},30,4));
}


sub ARN_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARN";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},12,5);
   ${$rtel}{'lo_fst'} = substr(${$rbuf},17,7);
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},24,4));
}


sub ARN_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ARN";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'sen_typ'} = $f[4];
   ${$rtel}{'lo_fst'} = $f[5];
   ${$rtel}{'rutsche'} = sprintf("%d",$f[6]);
}


sub ARN_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARN";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf(" %-7.7s",${$rtel}{'lo_fst'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
}


sub ARN_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARN";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("%-7.7s",${$rtel}{'lo_fst'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
}


sub ARN_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARN";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("\t%-.7s",${$rtel}{'lo_fst'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
}


sub ARN_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARN: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},16,5) . "', ";
   $trcbuf .= "lo_fst='" . substr(${$rbuf},22,7) . "', ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},30,4)) . "";

   return $trcbuf;
}


sub ARN_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARN: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},12,5) . "', ";
   $trcbuf .= "lo_fst='" . substr(${$rbuf},17,7) . "', ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},24,4)) . "";

   return $trcbuf;
}


sub ARN_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ARN: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "sen_typ='" . $f[4]  . "', ";
   $trcbuf .= "lo_fst='" . $f[5]  . "', ";
   $trcbuf .= "rutsche=" . $f[6]  . "";

   return $trcbuf;
}


sub ARN_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARN: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "sen_typ='" . ${$rtel}{"sen_typ"} . "', ";
   $trcbuf .= "lo_fst='" . ${$rtel}{"lo_fst"} . "', ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm ARK                                            #
#############################################################

sub ARK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},16,5);
   ${$rtel}{'lo_fst'} = substr(${$rbuf},22,7);
}


sub ARK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ARK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},12,5);
   ${$rtel}{'lo_fst'} = substr(${$rbuf},17,7);
}


sub ARK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ARK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'sen_typ'} = $f[4];
   ${$rtel}{'lo_fst'} = $f[5];
}


sub ARK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARK";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf(" %-7.7s",${$rtel}{'lo_fst'});
}


sub ARK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARK";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("%-7.7s",${$rtel}{'lo_fst'});
}


sub ARK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ARK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%-.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("\t%-.7s",${$rtel}{'lo_fst'});
}


sub ARK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},16,5) . "', ";
   $trcbuf .= "lo_fst='" . substr(${$rbuf},22,7) . "'";

   return $trcbuf;
}


sub ARK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},12,5) . "', ";
   $trcbuf .= "lo_fst='" . substr(${$rbuf},17,7) . "'";

   return $trcbuf;
}


sub ARK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ARK: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "sen_typ='" . $f[4]  . "', ";
   $trcbuf .= "lo_fst='" . $f[5]  . "'";

   return $trcbuf;
}


sub ARK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ARK: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "sen_typ='" . ${$rtel}{"sen_typ"} . "', ";
   $trcbuf .= "lo_fst='" . ${$rtel}{"lo_fst"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm LVS                                            #
#############################################################

sub LVS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub LVS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub LVS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub LVS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LVS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub LVS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LVS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub LVS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LVS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub LVS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LVS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub LVS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LVS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub LVS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LVS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub LVS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LVS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm EVS                                            #
#############################################################

sub EVS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub EVS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "EVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub EVS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "EVS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub EVS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EVS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub EVS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EVS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub EVS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "EVS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub EVS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EVS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub EVS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EVS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub EVS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm EVS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub EVS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm EVS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm BSK                                            #
#############################################################

sub BSK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'lvs_prio'} = sprintf("%d",substr(${$rbuf},10,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},15,4));
}


sub BSK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "BSK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'lvs_prio'} = sprintf("%d",substr(${$rbuf},7,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},10,4));
}


sub BSK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "BSK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'lvs_prio'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",$f[5]);
}


sub BSK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSK";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen_ist'});
}


sub BSK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSK";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen_ist'});
}


sub BSK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "BSK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen_ist'});
}


sub BSK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "lvs_prio=" . sprintf("%d",substr(${$rbuf},10,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},15,4)) . "";

   return $trcbuf;
}


sub BSK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "lvs_prio=" . sprintf("%d",substr(${$rbuf},7,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},10,4)) . "";

   return $trcbuf;
}


sub BSK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm BSK: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "lvs_prio=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "anz_sen_ist=" . $f[5]  . "";

   return $trcbuf;
}


sub BSK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm BSK: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "lvs_prio=" . ${$rtel}{"lvs_prio"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "anz_sen_ist=" . ${$rtel}{"anz_sen_ist"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm STP                                            #
#############################################################

sub STP_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STP";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'lvs_prio'} = sprintf("%d",substr(${$rbuf},10,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},15,5);
   ${$rtel}{'spp_flag'} = substr(${$rbuf},21,1);
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},28,1));
}


sub STP_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "STP";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'lvs_prio'} = sprintf("%d",substr(${$rbuf},7,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_typ'} = substr(${$rbuf},10,5);
   ${$rtel}{'spp_flag'} = substr(${$rbuf},15,1);
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",substr(${$rbuf},16,4));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},20,1));
}


sub STP_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "STP";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'lvs_prio'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sen_typ'} = $f[5];
   ${$rtel}{'spp_flag'} = $f[6];
   ${$rtel}{'anz_sen_ist'} = sprintf("%d",$f[7]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[8]);
}


sub STP_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STP";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
}


sub STP_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STP";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%-5.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
}


sub STP_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "STP";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs_prio'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%-.5s",${$rtel}{'sen_typ'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'spp_flag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_sen_ist'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
}


sub STP_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STP: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "lvs_prio=" . sprintf("%d",substr(${$rbuf},10,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},15,5) . "', ";
   $trcbuf .= "spp_flag='" . substr(${$rbuf},21,1) . "', ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},28,1)) . "";

   return $trcbuf;
}


sub STP_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STP: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "lvs_prio=" . sprintf("%d",substr(${$rbuf},7,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_typ='" . substr(${$rbuf},10,5) . "', ";
   $trcbuf .= "spp_flag='" . substr(${$rbuf},15,1) . "', ";
   $trcbuf .= "anz_sen_ist=" . sprintf("%d",substr(${$rbuf},16,4)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},20,1)) . "";

   return $trcbuf;
}


sub STP_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm STP: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "lvs_prio=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sen_typ='" . $f[5]  . "', ";
   $trcbuf .= "spp_flag='" . $f[6]  . "', ";
   $trcbuf .= "anz_sen_ist=" . $f[7]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[8]  . "";

   return $trcbuf;
}


sub STP_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm STP: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "lvs_prio=" . ${$rtel}{"lvs_prio"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_typ='" . ${$rtel}{"sen_typ"} . "', ";
   $trcbuf .= "spp_flag='" . ${$rtel}{"spp_flag"} . "', ";
   $trcbuf .= "anz_sen_ist=" . ${$rtel}{"anz_sen_ist"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm TAG                                            #
#############################################################

sub TAG_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TAG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub TAG_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TAG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub TAG_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "TAG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub TAG_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAG";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub TAG_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAG";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub TAG_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAG";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub TAG_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub TAG_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub TAG_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm TAG: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub TAG_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAG: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm TAE                                            #
#############################################################

sub TAE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
}


sub TAE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "TAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
}


sub TAE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "TAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
}


sub TAE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAE";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
}


sub TAE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAE";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
}


sub TAE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "TAE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
}


sub TAE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . "";

   return $trcbuf;
}


sub TAE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . "";

   return $trcbuf;
}


sub TAE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm TAE: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . "";

   return $trcbuf;
}


sub TAE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm TAE: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm RTG                                            #
#############################################################

sub RTG_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RTG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},10,3));
}


sub RTG_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RTG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},7,3));
}


sub RTG_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RTG";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[3]);
}


sub RTG_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RTG";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
}


sub RTG_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RTG";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
}


sub RTG_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RTG";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
}


sub RTG_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RTG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},10,3)) . "";

   return $trcbuf;
}


sub RTG_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RTG: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},7,3)) . "";

   return $trcbuf;
}


sub RTG_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RTG: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "richtung=" . $f[3]  . "";

   return $trcbuf;
}


sub RTG_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RTG: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SBA                                            #
#############################################################

sub SBA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},10,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},17,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},31,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},38,6));
}


sub SBA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},10,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},12,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},18,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},30,6));
}


sub SBA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SBA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_kartons'} = sprintf("%d",$f[5]);
   ${$rtel}{'anz_tueten'} = sprintf("%d",$f[6]);
   ${$rtel}{'kar_volumen'} = sprintf("%d",$f[7]);
   ${$rtel}{'tue_volumen'} = sprintf("%d",$f[8]);
}


sub SBA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBA";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'tue_volumen'});
}


sub SBA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBA";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'tue_volumen'});
}


sub SBA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SBA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'tue_volumen'});
}


sub SBA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},10,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},17,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},31,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},38,6)) . "";

   return $trcbuf;
}


sub SBA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},10,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},12,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},18,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},30,6)) . "";

   return $trcbuf;
}


sub SBA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SBA: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "richtung=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "anz_kartons=" . $f[5]  . ", ";
   $trcbuf .= "anz_tueten=" . $f[6]  . ", ";
   $trcbuf .= "kar_volumen=" . $f[7]  . ", ";
   $trcbuf .= "tue_volumen=" . $f[8]  . "";

   return $trcbuf;
}


sub SBA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SBA: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "anz_kartons=" . ${$rtel}{"anz_kartons"} . ", ";
   $trcbuf .= "anz_tueten=" . ${$rtel}{"anz_tueten"} . ", ";
   $trcbuf .= "kar_volumen=" . ${$rtel}{"kar_volumen"} . ", ";
   $trcbuf .= "tue_volumen=" . ${$rtel}{"tue_volumen"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SEB                                            #
#############################################################

sub SEB_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SEB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},10,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},17,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},31,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},38,6));
}


sub SEB_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SEB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},10,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},12,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},18,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},30,6));
}


sub SEB_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SEB";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_kartons'} = sprintf("%d",$f[5]);
   ${$rtel}{'anz_tueten'} = sprintf("%d",$f[6]);
   ${$rtel}{'kar_volumen'} = sprintf("%d",$f[7]);
   ${$rtel}{'tue_volumen'} = sprintf("%d",$f[8]);
}


sub SEB_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SEB";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'tue_volumen'});
}


sub SEB_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SEB";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'tue_volumen'});
}


sub SEB_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SEB";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'tue_volumen'});
}


sub SEB_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SEB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},10,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},17,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},31,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},38,6)) . "";

   return $trcbuf;
}


sub SEB_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SEB: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},10,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},12,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},18,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},30,6)) . "";

   return $trcbuf;
}


sub SEB_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SEB: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "richtung=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "anz_kartons=" . $f[5]  . ", ";
   $trcbuf .= "anz_tueten=" . $f[6]  . ", ";
   $trcbuf .= "kar_volumen=" . $f[7]  . ", ";
   $trcbuf .= "tue_volumen=" . $f[8]  . "";

   return $trcbuf;
}


sub SEB_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SEB: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "anz_kartons=" . ${$rtel}{"anz_kartons"} . ", ";
   $trcbuf .= "anz_tueten=" . ${$rtel}{"anz_tueten"} . ", ";
   $trcbuf .= "kar_volumen=" . ${$rtel}{"kar_volumen"} . ", ";
   $trcbuf .= "tue_volumen=" . ${$rtel}{"tue_volumen"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm SOK                                            #
#############################################################

sub SOK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SOK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},10,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},17,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},31,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},38,6));
}


sub SOK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "SOK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},10,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},12,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},18,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},30,6));
}


sub SOK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "SOK";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_kartons'} = sprintf("%d",$f[5]);
   ${$rtel}{'anz_tueten'} = sprintf("%d",$f[6]);
   ${$rtel}{'kar_volumen'} = sprintf("%d",$f[7]);
   ${$rtel}{'tue_volumen'} = sprintf("%d",$f[8]);
}


sub SOK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SOK";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'tue_volumen'});
}


sub SOK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SOK";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'tue_volumen'});
}


sub SOK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "SOK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'tue_volumen'});
}


sub SOK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SOK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},10,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},17,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},31,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},38,6)) . "";

   return $trcbuf;
}


sub SOK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SOK: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},10,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},12,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},18,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},30,6)) . "";

   return $trcbuf;
}


sub SOK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm SOK: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "richtung=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "anz_kartons=" . $f[5]  . ", ";
   $trcbuf .= "anz_tueten=" . $f[6]  . ", ";
   $trcbuf .= "kar_volumen=" . $f[7]  . ", ";
   $trcbuf .= "tue_volumen=" . $f[8]  . "";

   return $trcbuf;
}


sub SOK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm SOK: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "anz_kartons=" . ${$rtel}{"anz_kartons"} . ", ";
   $trcbuf .= "anz_tueten=" . ${$rtel}{"anz_tueten"} . ", ";
   $trcbuf .= "kar_volumen=" . ${$rtel}{"kar_volumen"} . ", ";
   $trcbuf .= "tue_volumen=" . ${$rtel}{"tue_volumen"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm KLE                                            #
#############################################################

sub KLE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KLE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},10,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},14,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},17,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},31,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},38,6));
}


sub KLE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KLE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'richtung'} = sprintf("%d",substr(${$rbuf},7,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},10,2));
   ${$rtel}{'anz_kartons'} = sprintf("%d",substr(${$rbuf},12,6));
   ${$rtel}{'anz_tueten'} = sprintf("%d",substr(${$rbuf},18,6));
   ${$rtel}{'kar_volumen'} = sprintf("%d",substr(${$rbuf},24,6));
   ${$rtel}{'tue_volumen'} = sprintf("%d",substr(${$rbuf},30,6));
}


sub KLE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KLE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'richtung'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_kartons'} = sprintf("%d",$f[5]);
   ${$rtel}{'anz_tueten'} = sprintf("%d",$f[6]);
   ${$rtel}{'kar_volumen'} = sprintf("%d",$f[7]);
   ${$rtel}{'tue_volumen'} = sprintf("%d",$f[8]);
}


sub KLE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KLE";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'tue_volumen'});
}


sub KLE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KLE";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'tue_volumen'});
}


sub KLE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KLE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'richtung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_kartons'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_tueten'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'kar_volumen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'tue_volumen'});
}


sub KLE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KLE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},10,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},14,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},17,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},31,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},38,6)) . "";

   return $trcbuf;
}


sub KLE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KLE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "richtung=" . sprintf("%d",substr(${$rbuf},7,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},10,2)) . ", ";
   $trcbuf .= "anz_kartons=" . sprintf("%d",substr(${$rbuf},12,6)) . ", ";
   $trcbuf .= "anz_tueten=" . sprintf("%d",substr(${$rbuf},18,6)) . ", ";
   $trcbuf .= "kar_volumen=" . sprintf("%d",substr(${$rbuf},24,6)) . ", ";
   $trcbuf .= "tue_volumen=" . sprintf("%d",substr(${$rbuf},30,6)) . "";

   return $trcbuf;
}


sub KLE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KLE: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "richtung=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "anz_kartons=" . $f[5]  . ", ";
   $trcbuf .= "anz_tueten=" . $f[6]  . ", ";
   $trcbuf .= "kar_volumen=" . $f[7]  . ", ";
   $trcbuf .= "tue_volumen=" . $f[8]  . "";

   return $trcbuf;
}


sub KLE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KLE: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "richtung=" . ${$rtel}{"richtung"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "anz_kartons=" . ${$rtel}{"anz_kartons"} . ", ";
   $trcbuf .= "anz_tueten=" . ${$rtel}{"anz_tueten"} . ", ";
   $trcbuf .= "kar_volumen=" . ${$rtel}{"kar_volumen"} . ", ";
   $trcbuf .= "tue_volumen=" . ${$rtel}{"tue_volumen"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm KGA                                            #
#############################################################

sub KGA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KGA";
   ${$rtel}{'art_nr'} = substr(${$rbuf},4,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},19,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},23,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},30,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},32,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},34,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},42,6));
   ${$rtel}{'upi'} = substr(${$rbuf},49,50);
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},100,12);
   ${$rtel}{'status'} = substr(${$rbuf},113,1);
}


sub KGA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KGA";
   ${$rtel}{'art_nr'} = substr(${$rbuf},3,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},17,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},20,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},26,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},27,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},28,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},35,6));
   ${$rtel}{'upi'} = substr(${$rbuf},41,50);
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},91,12);
   ${$rtel}{'status'} = substr(${$rbuf},103,1);
}


sub KGA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KGA";
   ${$rtel}{'art_nr'} = $f[1];
   ${$rtel}{'art_gr'} = $f[2];
   ${$rtel}{'lkz'} = $f[3];
   ${$rtel}{'zoll_kz'} = $f[4];
   ${$rtel}{'sperr_kz'} = $f[5];
   ${$rtel}{'we_sendung'} = sprintf("%d",$f[6]);
   ${$rtel}{'wap_nr'} = sprintf("%d",$f[7]);
   ${$rtel}{'upi'} = $f[8];
   ${$rtel}{'wannen_id_12'} = $f[9];
   ${$rtel}{'status'} = $f[10];
}


sub KGA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KGA";
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf(" %07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf(" %-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub KGA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KGA";
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("%07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("%-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub KGA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KGA";
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("\t%-.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub KGA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KGA: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},4,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},19,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},23,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},30,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},32,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},34,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},42,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},49,50) . "', ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},100,12) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},113,1) . "'";

   return $trcbuf;
}


sub KGA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KGA: ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},3,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},17,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},20,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},26,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},27,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},28,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},35,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},41,50) . "', ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},91,12) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},103,1) . "'";

   return $trcbuf;
}


sub KGA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KGA: ";
   $trcbuf .= "art_nr='" . $f[1]  . "', ";
   $trcbuf .= "art_gr='" . $f[2]  . "', ";
   $trcbuf .= "lkz='" . $f[3]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[4]  . "', ";
   $trcbuf .= "sperr_kz='" . $f[5]  . "', ";
   $trcbuf .= "we_sendung=" . $f[6]  . ", ";
   $trcbuf .= "wap_nr=" . $f[7]  . ", ";
   $trcbuf .= "upi='" . $f[8]  . "', ";
   $trcbuf .= "wannen_id_12='" . $f[9]  . "', ";
   $trcbuf .= "status='" . $f[10]  . "'";

   return $trcbuf;
}


sub KGA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KGA: ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "', ";
   $trcbuf .= "sperr_kz='" . ${$rtel}{"sperr_kz"} . "', ";
   $trcbuf .= "we_sendung=" . ${$rtel}{"we_sendung"} . ", ";
   $trcbuf .= "wap_nr=" . ${$rtel}{"wap_nr"} . ", ";
   $trcbuf .= "upi='" . ${$rtel}{"upi"} . "', ";
   $trcbuf .= "wannen_id_12='" . ${$rtel}{"wannen_id_12"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm KAS                                            #
#############################################################

sub KAS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'block_typ'} = substr(${$rbuf},10,1);
}


sub KAS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'block_typ'} = substr(${$rbuf},7,1);
}


sub KAS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KAS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'block_typ'} = $f[3];
}


sub KAS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'block_typ'});
}


sub KAS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'block_typ'});
}


sub KAS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'block_typ'});
}


sub KAS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "block_typ='" . substr(${$rbuf},10,1) . "'";

   return $trcbuf;
}


sub KAS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "block_typ='" . substr(${$rbuf},7,1) . "'";

   return $trcbuf;
}


sub KAS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KAS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "block_typ='" . $f[3]  . "'";

   return $trcbuf;
}


sub KAS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "block_typ='" . ${$rtel}{"block_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm KAD                                            #
#############################################################

sub KAD_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAD";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},4,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},9,1);
   ${$rtel}{'subtyp'} = sprintf("%d",substr(${$rbuf},11,2));
   ${$rtel}{'aufseq'} = sprintf("%d",substr(${$rbuf},14,6));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},21,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},25,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},30,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},32,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},37,2));
   ${$rtel}{'bs_flag'} = substr(${$rbuf},40,1);
   ${$rtel}{'art_nr'} = substr(${$rbuf},42,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},57,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},61,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},68,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},70,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},72,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},80,6));
   ${$rtel}{'art_bez'} = substr(${$rbuf},87,18);
   ${$rtel}{'art_farbe'} = substr(${$rbuf},106,12);
   ${$rtel}{'upi'} = substr(${$rbuf},119,50);
   ${$rtel}{'arb_nr'} = substr(${$rbuf},170,8);
   ${$rtel}{'beleg_nr'} = sprintf("%d",substr(${$rbuf},179,6));
   ${$rtel}{'layout_nr'} = sprintf("%d",substr(${$rbuf},186,2));
}


sub KAD_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAD";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},3,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},7,1);
   ${$rtel}{'subtyp'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'aufseq'} = sprintf("%d",substr(${$rbuf},10,6));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},16,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},19,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},20,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},22,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'bs_flag'} = substr(${$rbuf},29,1);
   ${$rtel}{'art_nr'} = substr(${$rbuf},30,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},44,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},47,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},53,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},54,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},55,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},62,6));
   ${$rtel}{'art_bez'} = substr(${$rbuf},68,18);
   ${$rtel}{'art_farbe'} = substr(${$rbuf},86,12);
   ${$rtel}{'upi'} = substr(${$rbuf},98,50);
   ${$rtel}{'arb_nr'} = substr(${$rbuf},148,8);
   ${$rtel}{'beleg_nr'} = sprintf("%d",substr(${$rbuf},156,6));
   ${$rtel}{'layout_nr'} = sprintf("%d",substr(${$rbuf},162,2));
   ${$rtel}{'druckdaten'} = sprintf("%s",substr(${$rbuf},164,500));
}


sub KAD_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KAD";
   ${$rtel}{'auftyp_kr'} = $f[1];
   ${$rtel}{'auftyp_arl'} = $f[2];
   ${$rtel}{'subtyp'} = sprintf("%d",$f[3]);
   ${$rtel}{'aufseq'} = sprintf("%d",$f[4]);
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[5]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[6]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[7]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[8]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[9]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[10]);
   ${$rtel}{'bs_flag'} = $f[11];
   ${$rtel}{'art_nr'} = $f[12];
   ${$rtel}{'art_gr'} = $f[13];
   ${$rtel}{'lkz'} = $f[14];
   ${$rtel}{'zoll_kz'} = $f[15];
   ${$rtel}{'sperr_kz'} = $f[16];
   ${$rtel}{'we_sendung'} = sprintf("%d",$f[17]);
   ${$rtel}{'wap_nr'} = sprintf("%d",$f[18]);
   ${$rtel}{'art_bez'} = $f[19];
   ${$rtel}{'art_farbe'} = $f[20];
   ${$rtel}{'upi'} = $f[21];
   ${$rtel}{'arb_nr'} = $f[22];
   ${$rtel}{'beleg_nr'} = sprintf("%d",$f[23]);
   ${$rtel}{'layout_nr'} = sprintf("%d",$f[24]);
}


sub KAD_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAD";
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'bs_flag'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf(" %07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf(" %-18.18s",${$rtel}{'art_bez'});
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'art_farbe'});
   ${$rbuf} .= sprintf(" %-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf(" %-8.8s",${$rtel}{'arb_nr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'beleg_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'layout_nr'});
}


sub KAD_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAD";
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'bs_flag'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("%07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("%-18.18s",${$rtel}{'art_bez'});
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'art_farbe'});
   ${$rbuf} .= sprintf("%-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("%-8.8s",${$rtel}{'arb_nr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'beleg_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'layout_nr'});
}


sub KAD_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAD";
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'bs_flag'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("\t%-.18s",${$rtel}{'art_bez'});
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'art_farbe'});
   ${$rbuf} .= sprintf("\t%-.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("\t%-.8s",${$rtel}{'arb_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'beleg_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'layout_nr'});
}


sub KAD_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAD: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},4,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},9,1) . "', ";
   $trcbuf .= "subtyp=" . sprintf("%d",substr(${$rbuf},11,2)) . ", ";
   $trcbuf .= "aufseq=" . sprintf("%d",substr(${$rbuf},14,6)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},21,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},25,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},30,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},32,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},37,2)) . ", ";
   $trcbuf .= "bs_flag='" . substr(${$rbuf},40,1) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},42,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},57,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},61,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},68,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},70,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},72,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},80,6)) . ", ";
   $trcbuf .= "art_bez='" . substr(${$rbuf},87,18) . "', ";
   $trcbuf .= "art_farbe='" . substr(${$rbuf},106,12) . "', ";
   $trcbuf .= "upi='" . substr(${$rbuf},119,50) . "', ";
   $trcbuf .= "arb_nr='" . substr(${$rbuf},170,8) . "', ";
   $trcbuf .= "beleg_nr=" . sprintf("%d",substr(${$rbuf},179,6)) . ", ";
   $trcbuf .= "layout_nr=" . sprintf("%d",substr(${$rbuf},186,2)) . "";

   return $trcbuf;
}


sub KAD_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAD: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},3,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},7,1) . "', ";
   $trcbuf .= "subtyp=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "aufseq=" . sprintf("%d",substr(${$rbuf},10,6)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},16,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},19,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},20,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},22,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "bs_flag='" . substr(${$rbuf},29,1) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},30,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},44,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},47,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},53,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},54,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},55,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},62,6)) . ", ";
   $trcbuf .= "art_bez='" . substr(${$rbuf},68,18) . "', ";
   $trcbuf .= "art_farbe='" . substr(${$rbuf},86,12) . "', ";
   $trcbuf .= "upi='" . substr(${$rbuf},98,50) . "', ";
   $trcbuf .= "arb_nr='" . substr(${$rbuf},148,8) . "', ";
   $trcbuf .= "beleg_nr=" . sprintf("%d",substr(${$rbuf},156,6)) . ", ";
   $trcbuf .= "layout_nr=" . sprintf("%d",substr(${$rbuf},162,2)) . "";

   return $trcbuf;
}


sub KAD_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KAD: ";
   $trcbuf .= "auftyp_kr='" . $f[1]  . "', ";
   $trcbuf .= "auftyp_arl='" . $f[2]  . "', ";
   $trcbuf .= "subtyp=" . $f[3]  . ", ";
   $trcbuf .= "aufseq=" . $f[4]  . ", ";
   $trcbuf .= "lfd_tag=" . $f[5]  . ", ";
   $trcbuf .= "lvs=" . $f[6]  . ", ";
   $trcbuf .= "bat_nr=" . $f[7]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[8]  . ", ";
   $trcbuf .= "sen_nr=" . $f[9]  . ", ";
   $trcbuf .= "art_za=" . $f[10]  . ", ";
   $trcbuf .= "bs_flag='" . $f[11]  . "', ";
   $trcbuf .= "art_nr='" . $f[12]  . "', ";
   $trcbuf .= "art_gr='" . $f[13]  . "', ";
   $trcbuf .= "lkz='" . $f[14]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[15]  . "', ";
   $trcbuf .= "sperr_kz='" . $f[16]  . "', ";
   $trcbuf .= "we_sendung=" . $f[17]  . ", ";
   $trcbuf .= "wap_nr=" . $f[18]  . ", ";
   $trcbuf .= "art_bez='" . $f[19]  . "', ";
   $trcbuf .= "art_farbe='" . $f[20]  . "', ";
   $trcbuf .= "upi='" . $f[21]  . "', ";
   $trcbuf .= "arb_nr='" . $f[22]  . "', ";
   $trcbuf .= "beleg_nr=" . $f[23]  . ", ";
   $trcbuf .= "layout_nr=" . $f[24]  . "";

   return $trcbuf;
}


sub KAD_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAD: ";
   $trcbuf .= "auftyp_kr='" . ${$rtel}{"auftyp_kr"} . "', ";
   $trcbuf .= "auftyp_arl='" . ${$rtel}{"auftyp_arl"} . "', ";
   $trcbuf .= "subtyp=" . ${$rtel}{"subtyp"} . ", ";
   $trcbuf .= "aufseq=" . ${$rtel}{"aufseq"} . ", ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "bs_flag='" . ${$rtel}{"bs_flag"} . "', ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "', ";
   $trcbuf .= "sperr_kz='" . ${$rtel}{"sperr_kz"} . "', ";
   $trcbuf .= "we_sendung=" . ${$rtel}{"we_sendung"} . ", ";
   $trcbuf .= "wap_nr=" . ${$rtel}{"wap_nr"} . ", ";
   $trcbuf .= "art_bez='" . ${$rtel}{"art_bez"} . "', ";
   $trcbuf .= "art_farbe='" . ${$rtel}{"art_farbe"} . "', ";
   $trcbuf .= "upi='" . ${$rtel}{"upi"} . "', ";
   $trcbuf .= "arb_nr='" . ${$rtel}{"arb_nr"} . "', ";
   $trcbuf .= "beleg_nr=" . ${$rtel}{"beleg_nr"} . ", ";
   $trcbuf .= "layout_nr=" . ${$rtel}{"layout_nr"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm KAE                                            #
#############################################################

sub KAE_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'block_typ'} = substr(${$rbuf},10,1);
}


sub KAE_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'block_typ'} = substr(${$rbuf},7,1);
}


sub KAE_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KAE";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'block_typ'} = $f[3];
}


sub KAE_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAE";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'block_typ'});
}


sub KAE_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAE";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'block_typ'});
}


sub KAE_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KAE";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'block_typ'});
}


sub KAE_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "block_typ='" . substr(${$rbuf},10,1) . "'";

   return $trcbuf;
}


sub KAE_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAE: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "block_typ='" . substr(${$rbuf},7,1) . "'";

   return $trcbuf;
}


sub KAE_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KAE: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "block_typ='" . $f[3]  . "'";

   return $trcbuf;
}


sub KAE_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KAE: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "block_typ='" . ${$rtel}{"block_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm GW1                                            #
#############################################################

sub GW1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "GW1";
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},4,12);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},17,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},21,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},23,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},26,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},28,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},33,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},36,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},51,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},55,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},62,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},64,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},66,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},74,6));
   ${$rtel}{'upi'} = substr(${$rbuf},81,50);
   ${$rtel}{'auftr_kz'} = substr(${$rbuf},132,1);
}


sub GW1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "GW1";
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},3,12);
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},15,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},18,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},19,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},21,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},22,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},26,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},28,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},42,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},45,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},51,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},52,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},53,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},60,6));
   ${$rtel}{'upi'} = substr(${$rbuf},66,50);
   ${$rtel}{'auftr_kz'} = substr(${$rbuf},116,1);
}


sub GW1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "GW1";
   ${$rtel}{'wannen_id_12'} = $f[1];
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[2]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[3]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[5]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[7]);
   ${$rtel}{'art_nr'} = $f[8];
   ${$rtel}{'art_gr'} = $f[9];
   ${$rtel}{'lkz'} = $f[10];
   ${$rtel}{'zoll_kz'} = $f[11];
   ${$rtel}{'sperr_kz'} = $f[12];
   ${$rtel}{'we_sendung'} = sprintf("%d",$f[13]);
   ${$rtel}{'wap_nr'} = sprintf("%d",$f[14]);
   ${$rtel}{'upi'} = $f[15];
   ${$rtel}{'auftr_kz'} = $f[16];
}


sub GW1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW1";
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf(" %07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf(" %-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'auftr_kz'});
}


sub GW1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW1";
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("%07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("%-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'auftr_kz'});
}


sub GW1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW1";
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("\t%-.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'auftr_kz'});
}


sub GW1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW1: ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},4,12) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},17,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},21,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},23,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},26,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},28,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},33,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},36,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},51,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},55,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},62,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},64,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},66,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},74,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},81,50) . "', ";
   $trcbuf .= "auftr_kz='" . substr(${$rbuf},132,1) . "'";

   return $trcbuf;
}


sub GW1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW1: ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},3,12) . "', ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},15,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},18,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},19,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},21,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},22,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},26,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},28,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},42,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},45,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},51,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},52,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},53,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},60,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},66,50) . "', ";
   $trcbuf .= "auftr_kz='" . substr(${$rbuf},116,1) . "'";

   return $trcbuf;
}


sub GW1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm GW1: ";
   $trcbuf .= "wannen_id_12='" . $f[1]  . "', ";
   $trcbuf .= "lfd_tag=" . $f[2]  . ", ";
   $trcbuf .= "lvs=" . $f[3]  . ", ";
   $trcbuf .= "bat_nr=" . $f[4]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[5]  . ", ";
   $trcbuf .= "sen_nr=" . $f[6]  . ", ";
   $trcbuf .= "art_za=" . $f[7]  . ", ";
   $trcbuf .= "art_nr='" . $f[8]  . "', ";
   $trcbuf .= "art_gr='" . $f[9]  . "', ";
   $trcbuf .= "lkz='" . $f[10]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[11]  . "', ";
   $trcbuf .= "sperr_kz='" . $f[12]  . "', ";
   $trcbuf .= "we_sendung=" . $f[13]  . ", ";
   $trcbuf .= "wap_nr=" . $f[14]  . ", ";
   $trcbuf .= "upi='" . $f[15]  . "', ";
   $trcbuf .= "auftr_kz='" . $f[16]  . "'";

   return $trcbuf;
}


sub GW1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW1: ";
   $trcbuf .= "wannen_id_12='" . ${$rtel}{"wannen_id_12"} . "', ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "', ";
   $trcbuf .= "sperr_kz='" . ${$rtel}{"sperr_kz"} . "', ";
   $trcbuf .= "we_sendung=" . ${$rtel}{"we_sendung"} . ", ";
   $trcbuf .= "wap_nr=" . ${$rtel}{"wap_nr"} . ", ";
   $trcbuf .= "upi='" . ${$rtel}{"upi"} . "', ";
   $trcbuf .= "auftr_kz='" . ${$rtel}{"auftr_kz"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm GW2                                            #
#############################################################

sub GW2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "GW2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},10,12);
   ${$rtel}{'end_typ'} = substr(${$rbuf},23,1);
}


sub GW2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "GW2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'wannen_id_12'} = substr(${$rbuf},7,12);
   ${$rtel}{'end_typ'} = substr(${$rbuf},19,1);
}


sub GW2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "GW2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'wannen_id_12'} = $f[3];
   ${$rtel}{'end_typ'} = $f[4];
}


sub GW2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW2";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'end_typ'});
}


sub GW2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW2";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%-12.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'end_typ'});
}


sub GW2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "GW2";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%-.12s",${$rtel}{'wannen_id_12'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'end_typ'});
}


sub GW2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},10,12) . "', ";
   $trcbuf .= "end_typ='" . substr(${$rbuf},23,1) . "'";

   return $trcbuf;
}


sub GW2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "wannen_id_12='" . substr(${$rbuf},7,12) . "', ";
   $trcbuf .= "end_typ='" . substr(${$rbuf},19,1) . "'";

   return $trcbuf;
}


sub GW2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm GW2: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "wannen_id_12='" . $f[3]  . "', ";
   $trcbuf .= "end_typ='" . $f[4]  . "'";

   return $trcbuf;
}


sub GW2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm GW2: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "wannen_id_12='" . ${$rtel}{"wannen_id_12"} . "', ";
   $trcbuf .= "end_typ='" . ${$rtel}{"end_typ"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm KQ1                                            #
#############################################################

sub KQ1_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KQ1";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},4,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},9,1);
   ${$rtel}{'subtyp'} = sprintf("%d",substr(${$rbuf},11,2));
   ${$rtel}{'aufseq'} = sprintf("%d",substr(${$rbuf},14,6));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},21,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},25,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},30,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},32,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},37,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},40,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},55,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},59,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},66,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},68,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},70,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},78,6));
   ${$rtel}{'upi'} = substr(${$rbuf},85,50);
   ${$rtel}{'ap_arl'} = substr(${$rbuf},136,3);
   ${$rtel}{'arl_persnr'} = sprintf("%d",substr(${$rbuf},140,8));
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},149,10);
   ${$rtel}{'status'} = substr(${$rbuf},160,1);
}


sub KQ1_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KQ1";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},3,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},7,1);
   ${$rtel}{'subtyp'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'aufseq'} = sprintf("%d",substr(${$rbuf},10,6));
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},16,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},19,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},20,2));
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",substr(${$rbuf},22,1));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},23,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},27,2));
   ${$rtel}{'art_nr'} = substr(${$rbuf},29,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},43,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},46,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},52,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},53,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},54,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},61,6));
   ${$rtel}{'upi'} = substr(${$rbuf},67,50);
   ${$rtel}{'ap_arl'} = substr(${$rbuf},117,3);
   ${$rtel}{'arl_persnr'} = sprintf("%d",substr(${$rbuf},120,8));
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},128,10);
   ${$rtel}{'status'} = substr(${$rbuf},138,1);
}


sub KQ1_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KQ1";
   ${$rtel}{'auftyp_kr'} = $f[1];
   ${$rtel}{'auftyp_arl'} = $f[2];
   ${$rtel}{'subtyp'} = sprintf("%d",$f[3]);
   ${$rtel}{'aufseq'} = sprintf("%d",$f[4]);
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[5]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[6]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[7]);
   ${$rtel}{'sub_bat_nr'} = sprintf("%d",$f[8]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[9]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[10]);
   ${$rtel}{'art_nr'} = $f[11];
   ${$rtel}{'art_gr'} = $f[12];
   ${$rtel}{'lkz'} = $f[13];
   ${$rtel}{'zoll_kz'} = $f[14];
   ${$rtel}{'sperr_kz'} = $f[15];
   ${$rtel}{'we_sendung'} = sprintf("%d",$f[16]);
   ${$rtel}{'wap_nr'} = sprintf("%d",$f[17]);
   ${$rtel}{'upi'} = $f[18];
   ${$rtel}{'ap_arl'} = $f[19];
   ${$rtel}{'arl_persnr'} = sprintf("%d",$f[20]);
   ${$rtel}{'arl_wannen_id'} = $f[21];
   ${$rtel}{'status'} = $f[22];
}


sub KQ1_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ1";
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf(" %07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf(" %-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf(" %08d",${$rtel}{'arl_persnr'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub KQ1_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ1";
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("%07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("%-50.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf("%08d",${$rtel}{'arl_persnr'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub KQ1_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ1";
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'subtyp'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'aufseq'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sub_bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("\t%-.50s",${$rtel}{'upi'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'arl_persnr'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub KQ1_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ1: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},4,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},9,1) . "', ";
   $trcbuf .= "subtyp=" . sprintf("%d",substr(${$rbuf},11,2)) . ", ";
   $trcbuf .= "aufseq=" . sprintf("%d",substr(${$rbuf},14,6)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},21,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},25,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},30,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},32,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},37,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},40,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},55,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},59,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},66,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},68,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},70,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},78,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},85,50) . "', ";
   $trcbuf .= "ap_arl='" . substr(${$rbuf},136,3) . "', ";
   $trcbuf .= "arl_persnr=" . sprintf("%d",substr(${$rbuf},140,8)) . ", ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},149,10) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},160,1) . "'";

   return $trcbuf;
}


sub KQ1_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ1: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},3,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},7,1) . "', ";
   $trcbuf .= "subtyp=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "aufseq=" . sprintf("%d",substr(${$rbuf},10,6)) . ", ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},16,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},19,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},20,2)) . ", ";
   $trcbuf .= "sub_bat_nr=" . sprintf("%d",substr(${$rbuf},22,1)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},23,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},27,2)) . ", ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},29,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},43,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},46,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},52,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},53,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},54,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},61,6)) . ", ";
   $trcbuf .= "upi='" . substr(${$rbuf},67,50) . "', ";
   $trcbuf .= "ap_arl='" . substr(${$rbuf},117,3) . "', ";
   $trcbuf .= "arl_persnr=" . sprintf("%d",substr(${$rbuf},120,8)) . ", ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},128,10) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},138,1) . "'";

   return $trcbuf;
}


sub KQ1_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KQ1: ";
   $trcbuf .= "auftyp_kr='" . $f[1]  . "', ";
   $trcbuf .= "auftyp_arl='" . $f[2]  . "', ";
   $trcbuf .= "subtyp=" . $f[3]  . ", ";
   $trcbuf .= "aufseq=" . $f[4]  . ", ";
   $trcbuf .= "lfd_tag=" . $f[5]  . ", ";
   $trcbuf .= "lvs=" . $f[6]  . ", ";
   $trcbuf .= "bat_nr=" . $f[7]  . ", ";
   $trcbuf .= "sub_bat_nr=" . $f[8]  . ", ";
   $trcbuf .= "sen_nr=" . $f[9]  . ", ";
   $trcbuf .= "art_za=" . $f[10]  . ", ";
   $trcbuf .= "art_nr='" . $f[11]  . "', ";
   $trcbuf .= "art_gr='" . $f[12]  . "', ";
   $trcbuf .= "lkz='" . $f[13]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[14]  . "', ";
   $trcbuf .= "sperr_kz='" . $f[15]  . "', ";
   $trcbuf .= "we_sendung=" . $f[16]  . ", ";
   $trcbuf .= "wap_nr=" . $f[17]  . ", ";
   $trcbuf .= "upi='" . $f[18]  . "', ";
   $trcbuf .= "ap_arl='" . $f[19]  . "', ";
   $trcbuf .= "arl_persnr=" . $f[20]  . ", ";
   $trcbuf .= "arl_wannen_id='" . $f[21]  . "', ";
   $trcbuf .= "status='" . $f[22]  . "'";

   return $trcbuf;
}


sub KQ1_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ1: ";
   $trcbuf .= "auftyp_kr='" . ${$rtel}{"auftyp_kr"} . "', ";
   $trcbuf .= "auftyp_arl='" . ${$rtel}{"auftyp_arl"} . "', ";
   $trcbuf .= "subtyp=" . ${$rtel}{"subtyp"} . ", ";
   $trcbuf .= "aufseq=" . ${$rtel}{"aufseq"} . ", ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sub_bat_nr=" . ${$rtel}{"sub_bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "', ";
   $trcbuf .= "sperr_kz='" . ${$rtel}{"sperr_kz"} . "', ";
   $trcbuf .= "we_sendung=" . ${$rtel}{"we_sendung"} . ", ";
   $trcbuf .= "wap_nr=" . ${$rtel}{"wap_nr"} . ", ";
   $trcbuf .= "upi='" . ${$rtel}{"upi"} . "', ";
   $trcbuf .= "ap_arl='" . ${$rtel}{"ap_arl"} . "', ";
   $trcbuf .= "arl_persnr=" . ${$rtel}{"arl_persnr"} . ", ";
   $trcbuf .= "arl_wannen_id='" . ${$rtel}{"arl_wannen_id"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm KQ2                                            #
#############################################################

sub KQ2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KQ2";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},4,4);
   ${$rtel}{'wannen_typ'} = substr(${$rbuf},9,1);
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},11,10);
   ${$rtel}{'status'} = substr(${$rbuf},22,1);
}


sub KQ2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KQ2";
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},3,4);
   ${$rtel}{'wannen_typ'} = substr(${$rbuf},7,1);
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},8,10);
   ${$rtel}{'status'} = substr(${$rbuf},18,1);
}


sub KQ2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KQ2";
   ${$rtel}{'auftyp_kr'} = $f[1];
   ${$rtel}{'wannen_typ'} = $f[2];
   ${$rtel}{'arl_wannen_id'} = $f[3];
   ${$rtel}{'status'} = $f[4];
}


sub KQ2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ2";
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'wannen_typ'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub KQ2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ2";
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'wannen_typ'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub KQ2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KQ2";
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'wannen_typ'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub KQ2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ2: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},4,4) . "', ";
   $trcbuf .= "wannen_typ='" . substr(${$rbuf},9,1) . "', ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},11,10) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},22,1) . "'";

   return $trcbuf;
}


sub KQ2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ2: ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},3,4) . "', ";
   $trcbuf .= "wannen_typ='" . substr(${$rbuf},7,1) . "', ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},8,10) . "', ";
   $trcbuf .= "status='" . substr(${$rbuf},18,1) . "'";

   return $trcbuf;
}


sub KQ2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KQ2: ";
   $trcbuf .= "auftyp_kr='" . $f[1]  . "', ";
   $trcbuf .= "wannen_typ='" . $f[2]  . "', ";
   $trcbuf .= "arl_wannen_id='" . $f[3]  . "', ";
   $trcbuf .= "status='" . $f[4]  . "'";

   return $trcbuf;
}


sub KQ2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KQ2: ";
   $trcbuf .= "auftyp_kr='" . ${$rtel}{"auftyp_kr"} . "', ";
   $trcbuf .= "wannen_typ='" . ${$rtel}{"wannen_typ"} . "', ";
   $trcbuf .= "arl_wannen_id='" . ${$rtel}{"arl_wannen_id"} . "', ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm LF2                                            #
#############################################################

sub LF2_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LF2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},8,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},10,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},13,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},18,2));
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},21,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},26,1);
   ${$rtel}{'art_nr'} = substr(${$rbuf},28,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},43,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},47,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},54,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},56,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},58,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},66,6));
   ${$rtel}{'ap_arl'} = substr(${$rbuf},73,3);
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},77,10);
   ${$rtel}{'identcode'} = substr(${$rbuf},88,30);
}


sub LF2_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "LF2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'lvs'} = sprintf("%d",substr(${$rbuf},6,1));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},7,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},9,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},13,2));
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},15,4);
   ${$rtel}{'auftyp_arl'} = substr(${$rbuf},19,1);
   ${$rtel}{'art_nr'} = substr(${$rbuf},20,14);
   ${$rtel}{'art_gr'} = substr(${$rbuf},34,3);
   ${$rtel}{'lkz'} = substr(${$rbuf},37,6);
   ${$rtel}{'zoll_kz'} = substr(${$rbuf},43,1);
   ${$rtel}{'sperr_kz'} = substr(${$rbuf},44,1);
   ${$rtel}{'we_sendung'} = sprintf("%d",substr(${$rbuf},45,7));
   ${$rtel}{'wap_nr'} = sprintf("%d",substr(${$rbuf},52,6));
   ${$rtel}{'ap_arl'} = substr(${$rbuf},58,3);
   ${$rtel}{'arl_wannen_id'} = substr(${$rbuf},61,10);
   ${$rtel}{'identcode'} = substr(${$rbuf},71,30);
}


sub LF2_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "LF2";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'lvs'} = sprintf("%d",$f[2]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[4]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[5]);
   ${$rtel}{'auftyp_kr'} = $f[6];
   ${$rtel}{'auftyp_arl'} = $f[7];
   ${$rtel}{'art_nr'} = $f[8];
   ${$rtel}{'art_gr'} = $f[9];
   ${$rtel}{'lkz'} = $f[10];
   ${$rtel}{'zoll_kz'} = $f[11];
   ${$rtel}{'sperr_kz'} = $f[12];
   ${$rtel}{'we_sendung'} = sprintf("%d",$f[13]);
   ${$rtel}{'wap_nr'} = sprintf("%d",$f[14]);
   ${$rtel}{'ap_arl'} = $f[15];
   ${$rtel}{'arl_wannen_id'} = $f[16];
   ${$rtel}{'identcode'} = $f[17];
}


sub LF2_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF2";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf(" %-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf(" %-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf(" %07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf(" %-3.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf(" %-30.30s",${$rtel}{'identcode'});
}


sub LF2_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF2";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%01d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("%-14.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("%-6.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("%07d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("%-3.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("%-30.30s",${$rtel}{'identcode'});
}


sub LF2_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "LF2";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lvs'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'auftyp_arl'});
   ${$rbuf} .= sprintf("\t%-.14s",${$rtel}{'art_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'art_gr'});
   ${$rbuf} .= sprintf("\t%-.6s",${$rtel}{'lkz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'zoll_kz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'sperr_kz'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'we_sendung'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wap_nr'});
   ${$rbuf} .= sprintf("\t%-.3s",${$rtel}{'ap_arl'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'arl_wannen_id'});
   ${$rbuf} .= sprintf("\t%-.30s",${$rtel}{'identcode'});
}


sub LF2_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},8,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},10,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},13,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},18,2)) . ", ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},21,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},26,1) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},28,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},43,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},47,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},54,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},56,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},58,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},66,6)) . ", ";
   $trcbuf .= "ap_arl='" . substr(${$rbuf},73,3) . "', ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},77,10) . "', ";
   $trcbuf .= "identcode='" . substr(${$rbuf},88,30) . "'";

   return $trcbuf;
}


sub LF2_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF2: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "lvs=" . sprintf("%d",substr(${$rbuf},6,1)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},7,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},9,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},13,2)) . ", ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},15,4) . "', ";
   $trcbuf .= "auftyp_arl='" . substr(${$rbuf},19,1) . "', ";
   $trcbuf .= "art_nr='" . substr(${$rbuf},20,14) . "', ";
   $trcbuf .= "art_gr='" . substr(${$rbuf},34,3) . "', ";
   $trcbuf .= "lkz='" . substr(${$rbuf},37,6) . "', ";
   $trcbuf .= "zoll_kz='" . substr(${$rbuf},43,1) . "', ";
   $trcbuf .= "sperr_kz='" . substr(${$rbuf},44,1) . "', ";
   $trcbuf .= "we_sendung=" . sprintf("%d",substr(${$rbuf},45,7)) . ", ";
   $trcbuf .= "wap_nr=" . sprintf("%d",substr(${$rbuf},52,6)) . ", ";
   $trcbuf .= "ap_arl='" . substr(${$rbuf},58,3) . "', ";
   $trcbuf .= "arl_wannen_id='" . substr(${$rbuf},61,10) . "', ";
   $trcbuf .= "identcode='" . substr(${$rbuf},71,30) . "'";

   return $trcbuf;
}


sub LF2_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm LF2: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "lvs=" . $f[2]  . ", ";
   $trcbuf .= "bat_nr=" . $f[3]  . ", ";
   $trcbuf .= "sen_nr=" . $f[4]  . ", ";
   $trcbuf .= "art_za=" . $f[5]  . ", ";
   $trcbuf .= "auftyp_kr='" . $f[6]  . "', ";
   $trcbuf .= "auftyp_arl='" . $f[7]  . "', ";
   $trcbuf .= "art_nr='" . $f[8]  . "', ";
   $trcbuf .= "art_gr='" . $f[9]  . "', ";
   $trcbuf .= "lkz='" . $f[10]  . "', ";
   $trcbuf .= "zoll_kz='" . $f[11]  . "', ";
   $trcbuf .= "sperr_kz='" . $f[12]  . "', ";
   $trcbuf .= "we_sendung=" . $f[13]  . ", ";
   $trcbuf .= "wap_nr=" . $f[14]  . ", ";
   $trcbuf .= "ap_arl='" . $f[15]  . "', ";
   $trcbuf .= "arl_wannen_id='" . $f[16]  . "', ";
   $trcbuf .= "identcode='" . $f[17]  . "'";

   return $trcbuf;
}


sub LF2_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm LF2: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "lvs=" . ${$rtel}{"lvs"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "auftyp_kr='" . ${$rtel}{"auftyp_kr"} . "', ";
   $trcbuf .= "auftyp_arl='" . ${$rtel}{"auftyp_arl"} . "', ";
   $trcbuf .= "art_nr='" . ${$rtel}{"art_nr"} . "', ";
   $trcbuf .= "art_gr='" . ${$rtel}{"art_gr"} . "', ";
   $trcbuf .= "lkz='" . ${$rtel}{"lkz"} . "', ";
   $trcbuf .= "zoll_kz='" . ${$rtel}{"zoll_kz"} . "', ";
   $trcbuf .= "sperr_kz='" . ${$rtel}{"sperr_kz"} . "', ";
   $trcbuf .= "we_sendung=" . ${$rtel}{"we_sendung"} . ", ";
   $trcbuf .= "wap_nr=" . ${$rtel}{"wap_nr"} . ", ";
   $trcbuf .= "ap_arl='" . ${$rtel}{"ap_arl"} . "', ";
   $trcbuf .= "arl_wannen_id='" . ${$rtel}{"arl_wannen_id"} . "', ";
   $trcbuf .= "identcode='" . ${$rtel}{"identcode"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm KWA                                            #
#############################################################

sub KWA_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KWA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'seq_kennung'} = sprintf("%d",substr(${$rbuf},8,5));
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},14,4);
   ${$rtel}{'anz_wannen'} = sprintf("%d",substr(${$rbuf},19,6));
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},26,6));
}


sub KWA_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "KWA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'seq_kennung'} = sprintf("%d",substr(${$rbuf},6,5));
   ${$rtel}{'auftyp_kr'} = substr(${$rbuf},11,4);
   ${$rtel}{'anz_wannen'} = sprintf("%d",substr(${$rbuf},15,6));
   ${$rtel}{'anz_ak'} = sprintf("%d",substr(${$rbuf},21,6));
}


sub KWA_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "KWA";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'seq_kennung'} = sprintf("%d",$f[2]);
   ${$rtel}{'auftyp_kr'} = $f[3];
   ${$rtel}{'anz_wannen'} = sprintf("%d",$f[4]);
   ${$rtel}{'anz_ak'} = sprintf("%d",$f[5]);
}


sub KWA_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KWA";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %05d",${$rtel}{'seq_kennung'});
   ${$rbuf} .= sprintf(" %-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_wannen'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'anz_ak'});
}


sub KWA_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KWA";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%05d",${$rtel}{'seq_kennung'});
   ${$rbuf} .= sprintf("%-4.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_wannen'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'anz_ak'});
}


sub KWA_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "KWA";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'seq_kennung'});
   ${$rbuf} .= sprintf("\t%-.4s",${$rtel}{'auftyp_kr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_wannen'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'anz_ak'});
}


sub KWA_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KWA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "seq_kennung=" . sprintf("%d",substr(${$rbuf},8,5)) . ", ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},14,4) . "', ";
   $trcbuf .= "anz_wannen=" . sprintf("%d",substr(${$rbuf},19,6)) . ", ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},26,6)) . "";

   return $trcbuf;
}


sub KWA_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KWA: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "seq_kennung=" . sprintf("%d",substr(${$rbuf},6,5)) . ", ";
   $trcbuf .= "auftyp_kr='" . substr(${$rbuf},11,4) . "', ";
   $trcbuf .= "anz_wannen=" . sprintf("%d",substr(${$rbuf},15,6)) . ", ";
   $trcbuf .= "anz_ak=" . sprintf("%d",substr(${$rbuf},21,6)) . "";

   return $trcbuf;
}


sub KWA_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm KWA: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "seq_kennung=" . $f[2]  . ", ";
   $trcbuf .= "auftyp_kr='" . $f[3]  . "', ";
   $trcbuf .= "anz_wannen=" . $f[4]  . ", ";
   $trcbuf .= "anz_ak=" . $f[5]  . "";

   return $trcbuf;
}


sub KWA_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm KWA: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "seq_kennung=" . ${$rtel}{"seq_kennung"} . ", ";
   $trcbuf .= "auftyp_kr='" . ${$rtel}{"auftyp_kr"} . "', ";
   $trcbuf .= "anz_wannen=" . ${$rtel}{"anz_wannen"} . ", ";
   $trcbuf .= "anz_ak=" . ${$rtel}{"anz_ak"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm AWS                                            #
#############################################################

sub AWS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AWS";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
}


sub AWS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AWS";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
}


sub AWS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AWS";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
}


sub AWS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWS";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
}


sub AWS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWS";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
}


sub AWS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
}


sub AWS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWS: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . "";

   return $trcbuf;
}


sub AWS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWS: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . "";

   return $trcbuf;
}


sub AWS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AWS: ";
   $trcbuf .= "wannen_id=" . $f[1]  . "";

   return $trcbuf;
}


sub AWS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWS: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm AWK                                            #
#############################################################

sub AWK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AWK";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
}


sub AWK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AWK";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
}


sub AWK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AWK";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
}


sub AWK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWK";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
}


sub AWK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWK";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
}


sub AWK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AWK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
}


sub AWK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWK: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . "";

   return $trcbuf;
}


sub AWK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWK: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . "";

   return $trcbuf;
}


sub AWK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AWK: ";
   $trcbuf .= "wannen_id=" . $f[1]  . "";

   return $trcbuf;
}


sub AWK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AWK: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm ANS                                            #
#############################################################

sub ANS_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},19,6));
   ${$rtel}{'lfd_nr'} = sprintf("%d",substr(${$rbuf},26,4));
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",substr(${$rbuf},31,4));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},36,4));
   ${$rtel}{'flag_mehrfachartikel'} = substr(${$rbuf},41,1);
}


sub ANS_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},14,6));
   ${$rtel}{'lfd_nr'} = sprintf("%d",substr(${$rbuf},20,4));
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",substr(${$rbuf},24,4));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},28,4));
   ${$rtel}{'flag_mehrfachartikel'} = substr(${$rbuf},32,1);
}


sub ANS_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ANS";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[5]);
   ${$rtel}{'lfd_nr'} = sprintf("%d",$f[6]);
   ${$rtel}{'lfd_nr_max'} = sprintf("%d",$f[7]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[8]);
   ${$rtel}{'flag_mehrfachartikel'} = $f[9];
}


sub ANS_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANS";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_mehrfachartikel'});
}


sub ANS_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANS";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_mehrfachartikel'});
}


sub ANS_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANS";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_nr_max'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_mehrfachartikel'});
}


sub ANS_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},19,6)) . ", ";
   $trcbuf .= "lfd_nr=" . sprintf("%d",substr(${$rbuf},26,4)) . ", ";
   $trcbuf .= "lfd_nr_max=" . sprintf("%d",substr(${$rbuf},31,4)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},36,4)) . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . substr(${$rbuf},41,1) . "'";

   return $trcbuf;
}


sub ANS_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANS: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},14,6)) . ", ";
   $trcbuf .= "lfd_nr=" . sprintf("%d",substr(${$rbuf},20,4)) . ", ";
   $trcbuf .= "lfd_nr_max=" . sprintf("%d",substr(${$rbuf},24,4)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},28,4)) . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . substr(${$rbuf},32,1) . "'";

   return $trcbuf;
}


sub ANS_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ANS: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "wannen_id=" . $f[5]  . ", ";
   $trcbuf .= "lfd_nr=" . $f[6]  . ", ";
   $trcbuf .= "lfd_nr_max=" . $f[7]  . ", ";
   $trcbuf .= "rutsche=" . $f[8]  . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . $f[9]  . "'";

   return $trcbuf;
}


sub ANS_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANS: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "lfd_nr=" . ${$rtel}{"lfd_nr"} . ", ";
   $trcbuf .= "lfd_nr_max=" . ${$rtel}{"lfd_nr_max"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . ${$rtel}{"flag_mehrfachartikel"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ANL                                            #
#############################################################

sub ANL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'aplatz'} = sprintf("%d",substr(${$rbuf},11,2));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},14,1);
}


sub ANL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ANL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'aplatz'} = sprintf("%d",substr(${$rbuf},9,2));
   ${$rtel}{'flag_druck'} = substr(${$rbuf},11,1);
}


sub ANL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ANL";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'aplatz'} = sprintf("%d",$f[2]);
   ${$rtel}{'flag_druck'} = $f[3];
}


sub ANL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_druck'});
}


sub ANL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_druck'});
}


sub ANL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ANL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'aplatz'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_druck'});
}


sub ANL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "aplatz=" . sprintf("%d",substr(${$rbuf},11,2)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},14,1) . "'";

   return $trcbuf;
}


sub ANL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "aplatz=" . sprintf("%d",substr(${$rbuf},9,2)) . ", ";
   $trcbuf .= "flag_druck='" . substr(${$rbuf},11,1) . "'";

   return $trcbuf;
}


sub ANL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ANL: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "aplatz=" . $f[2]  . ", ";
   $trcbuf .= "flag_druck='" . $f[3]  . "'";

   return $trcbuf;
}


sub ANL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ANL: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "aplatz=" . ${$rtel}{"aplatz"} . ", ";
   $trcbuf .= "flag_druck='" . ${$rtel}{"flag_druck"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm AQL                                            #
#############################################################

sub AQL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'status'} = substr(${$rbuf},11,1);
}


sub AQL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "AQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'status'} = substr(${$rbuf},9,1);
}


sub AQL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "AQL";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'status'} = $f[2];
}


sub AQL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AQL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'status'});
}


sub AQL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AQL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'status'});
}


sub AQL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "AQL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'status'});
}


sub AQL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AQL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},11,1) . "'";

   return $trcbuf;
}


sub AQL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AQL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "status='" . substr(${$rbuf},9,1) . "'";

   return $trcbuf;
}


sub AQL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm AQL: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "status='" . $f[2]  . "'";

   return $trcbuf;
}


sub AQL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm AQL: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "status='" . ${$rtel}{"status"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm ALK                                            #
#############################################################

sub ALK_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ALK";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},11,4));
}


sub ALK_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "ALK";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub ALK_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "ALK";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[2]);
}


sub ALK_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ALK";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
}


sub ALK_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ALK";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
}


sub ALK_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "ALK";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
}


sub ALK_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ALK: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},11,4)) . "";

   return $trcbuf;
}


sub ALK_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ALK: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub ALK_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm ALK: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "rutsche=" . $f[2]  . "";

   return $trcbuf;
}


sub ALK_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm ALK: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . "";

   return $trcbuf;
}



#############################################################
#  Telegramm REW                                            #
#############################################################

sub REW_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "REW";
   ${$rtel}{'typ'} = substr(${$rbuf},4,1);
   ${$rtel}{'id'} = substr(${$rbuf},6,10);
}


sub REW_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "REW";
   ${$rtel}{'typ'} = substr(${$rbuf},3,1);
   ${$rtel}{'id'} = substr(${$rbuf},4,10);
}


sub REW_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "REW";
   ${$rtel}{'typ'} = $f[1];
   ${$rtel}{'id'} = $f[2];
}


sub REW_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REW";
   ${$rbuf} .= sprintf(" %s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf(" %-10.10s",${$rtel}{'id'});
}


sub REW_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REW";
   ${$rbuf} .= sprintf("%s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf("%-10.10s",${$rtel}{'id'});
}


sub REW_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REW";
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'typ'});
   ${$rbuf} .= sprintf("\t%-.10s",${$rtel}{'id'});
}


sub REW_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REW: ";
   $trcbuf .= "typ='" . substr(${$rbuf},4,1) . "', ";
   $trcbuf .= "id='" . substr(${$rbuf},6,10) . "'";

   return $trcbuf;
}


sub REW_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REW: ";
   $trcbuf .= "typ='" . substr(${$rbuf},3,1) . "', ";
   $trcbuf .= "id='" . substr(${$rbuf},4,10) . "'";

   return $trcbuf;
}


sub REW_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm REW: ";
   $trcbuf .= "typ='" . $f[1]  . "', ";
   $trcbuf .= "id='" . $f[2]  . "'";

   return $trcbuf;
}


sub REW_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REW: ";
   $trcbuf .= "typ='" . ${$rtel}{"typ"} . "', ";
   $trcbuf .= "id='" . ${$rtel}{"id"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm RES                                            #
#############################################################

sub RES_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RES";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},4,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},8,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},11,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},16,2));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},19,4));
   ${$rtel}{'flag_mehrfachartikel'} = substr(${$rbuf},24,1);
}


sub RES_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "RES";
   ${$rtel}{'lfd_tag'} = sprintf("%d",substr(${$rbuf},3,3));
   ${$rtel}{'bat_nr'} = sprintf("%d",substr(${$rbuf},6,2));
   ${$rtel}{'sen_nr'} = sprintf("%d",substr(${$rbuf},8,4));
   ${$rtel}{'art_za'} = sprintf("%d",substr(${$rbuf},12,2));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},14,4));
   ${$rtel}{'flag_mehrfachartikel'} = substr(${$rbuf},18,1);
}


sub RES_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "RES";
   ${$rtel}{'lfd_tag'} = sprintf("%d",$f[1]);
   ${$rtel}{'bat_nr'} = sprintf("%d",$f[2]);
   ${$rtel}{'sen_nr'} = sprintf("%d",$f[3]);
   ${$rtel}{'art_za'} = sprintf("%d",$f[4]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[5]);
   ${$rtel}{'flag_mehrfachartikel'} = $f[6];
}


sub RES_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RES";
   ${$rbuf} .= sprintf(" %03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf(" %02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf(" %s",${$rtel}{'flag_mehrfachartikel'});
}


sub RES_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RES";
   ${$rbuf} .= sprintf("%03d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("%02d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("%s",${$rtel}{'flag_mehrfachartikel'});
}


sub RES_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "RES";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'lfd_tag'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'bat_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'sen_nr'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'art_za'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
   ${$rbuf} .= sprintf("\t%s",${$rtel}{'flag_mehrfachartikel'});
}


sub RES_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RES: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},4,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},8,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},11,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},16,2)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},19,4)) . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . substr(${$rbuf},24,1) . "'";

   return $trcbuf;
}


sub RES_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RES: ";
   $trcbuf .= "lfd_tag=" . sprintf("%d",substr(${$rbuf},3,3)) . ", ";
   $trcbuf .= "bat_nr=" . sprintf("%d",substr(${$rbuf},6,2)) . ", ";
   $trcbuf .= "sen_nr=" . sprintf("%d",substr(${$rbuf},8,4)) . ", ";
   $trcbuf .= "art_za=" . sprintf("%d",substr(${$rbuf},12,2)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},14,4)) . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . substr(${$rbuf},18,1) . "'";

   return $trcbuf;
}


sub RES_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm RES: ";
   $trcbuf .= "lfd_tag=" . $f[1]  . ", ";
   $trcbuf .= "bat_nr=" . $f[2]  . ", ";
   $trcbuf .= "sen_nr=" . $f[3]  . ", ";
   $trcbuf .= "art_za=" . $f[4]  . ", ";
   $trcbuf .= "rutsche=" . $f[5]  . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . $f[6]  . "'";

   return $trcbuf;
}


sub RES_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm RES: ";
   $trcbuf .= "lfd_tag=" . ${$rtel}{"lfd_tag"} . ", ";
   $trcbuf .= "bat_nr=" . ${$rtel}{"bat_nr"} . ", ";
   $trcbuf .= "sen_nr=" . ${$rtel}{"sen_nr"} . ", ";
   $trcbuf .= "art_za=" . ${$rtel}{"art_za"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . ", ";
   $trcbuf .= "flag_mehrfachartikel='" . ${$rtel}{"flag_mehrfachartikel"} . "'";

   return $trcbuf;
}



#############################################################
#  Telegramm REL                                            #
#############################################################

sub REL_buf_to_tel {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "REL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},4,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},11,4));
}


sub REL_buf_to_tel_n {
   my ($rbuf,$rtel) = @_;

   ${$rtel}{'TELTYP'} = "REL";
   ${$rtel}{'wannen_id'} = sprintf("%d",substr(${$rbuf},3,6));
   ${$rtel}{'rutsche'} = sprintf("%d",substr(${$rbuf},9,4));
}


sub REL_buf_to_tel_t {
   my ($rbuf,$rtel) = @_;

   my @f = split(/\t/,${$rbuf});

   ${$rtel}{'TELTYP'} = "REL";
   ${$rtel}{'wannen_id'} = sprintf("%d",$f[1]);
   ${$rtel}{'rutsche'} = sprintf("%d",$f[2]);
}


sub REL_tel_to_buf {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REL";
   ${$rbuf} .= sprintf(" %06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf(" %04d",${$rtel}{'rutsche'});
}


sub REL_tel_to_buf_n {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REL";
   ${$rbuf} .= sprintf("%06d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("%04d",${$rtel}{'rutsche'});
}


sub REL_tel_to_buf_t {
   my ($rtel,$rbuf) = @_;

   ${$rbuf}  = "REL";
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'wannen_id'});
   ${$rbuf} .= sprintf("\t%d",${$rtel}{'rutsche'});
}


sub REL_trace_buf {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},4,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},11,4)) . "";

   return $trcbuf;
}


sub REL_trace_buf_n {
   my $rbuf = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REL: ";
   $trcbuf .= "wannen_id=" . sprintf("%d",substr(${$rbuf},3,6)) . ", ";
   $trcbuf .= "rutsche=" . sprintf("%d",substr(${$rbuf},9,4)) . "";

   return $trcbuf;
}


sub REL_trace_buf_t {
   my $rbuf = shift;
   my $trcbuf;

   my @f = split(/\t/,${$rbuf});

   $trcbuf  = "Telegramm REL: ";
   $trcbuf .= "wannen_id=" . $f[1]  . ", ";
   $trcbuf .= "rutsche=" . $f[2]  . "";

   return $trcbuf;
}


sub REL_trace_tel {
   my $rtel = shift;
   my $trcbuf;

   $trcbuf  = "Telegramm REL: ";
   $trcbuf .= "wannen_id=" . ${$rtel}{"wannen_id"} . ", ";
   $trcbuf .= "rutsche=" . ${$rtel}{"rutsche"} . "";

   return $trcbuf;
}

1;
